/*! For license information please see main.87b7cdf1.js.LICENSE.txt */
(()=>{"use strict";var e={43(e,t,n){e.exports=n(202)},153(e,t,n){var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:a.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},202(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=b.prototype=new v;w.constructor=b,m(w,y.prototype),w.isPureReactComponent=!0;var I=Array.isArray,x=Object.prototype.hasOwnProperty,E={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function N(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,i)&&!_.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:E.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var S=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function k(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+C(l,0):s,I(o)?(i="",null!=e&&(i=e.replace(S,"$&/")+"/"),k(o,t,i,"",function(e){return e})):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(S,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",I(e))for(var c=0;c<e.length;c++){var u=s+C(a=e[c],c);l+=k(a,t,i,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=k(a=a.value,t,i,u=s+C(a,c++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function A(e,t,n){if(null==e)return e;var r=[],i=0;return k(e,r,"","",function(e){return t.call(n,e,i++)}),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},O={transition:null},L={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:O,ReactCurrentOwner:E};function M(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:A,forEach:function(e,t,n){A(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return A(e,function(){t++}),t},toArray:function(e){return A(e,function(e){return e})||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=b,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.act=M,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=E.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)x.call(t,c)&&!_.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=N,t.createFactory=function(e){var t=N.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=M,t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.3.1"},234(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function I(e){if(g=!1,w(e),!m)if(null!==r(c))m=!0,O(x);else{var t=r(u);null!==t&&L(I,t.startTime-e)}}function x(e,n){m=!1,g&&(g=!1,v(T),T=-1),p=!0;var s=f;try{for(w(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!k());){var o=h.callback;if("function"===typeof o){h.callback=null,f=h.priorityLevel;var a=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?h.callback=a:h===r(c)&&i(c),w(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&L(I,d.startTime-n),l=!1}return l}finally{h=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,_=!1,N=null,T=-1,S=5,C=-1;function k(){return!(t.unstable_now()-C<S)}function A(){if(null!==N){var e=t.unstable_now();C=e;var n=!0;try{n=N(!0,e)}finally{n?E():(_=!1,N=null)}}else _=!1}if("function"===typeof b)E=function(){b(A)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,P=R.port2;R.port1.onmessage=A,E=function(){P.postMessage(null)}}else E=function(){y(A,0)};function O(e){N=e,_||(_=!0,E())}function L(e,n){T=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,O(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(v(T),T=-1):g=!0,L(I,s-o))):(e.sortIndex=a,n(c,e),m||p||(m=!0,O(x))),e},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},391(e,t,n){var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},579(e,t,n){e.exports=n(153)},730(e,t,n){var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,I=Symbol.for("react.element"),x=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),S=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var L=Symbol.iterator;function M(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=L&&e[L]||e["@@iterator"])?e:null}var D,j=Object.assign;function F(e){if(void 0===D)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);D=t&&t[1]||""}return"\n"+D+e}var U=!1;function q(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function V(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=q(e.type,!1);case 11:return e=q(e.type.render,!1);case 1:return e=q(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case x:return"Portal";case N:return"Profiler";case _:return"StrictMode";case k:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case S:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function B(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Y(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(ln){return e.body}}function Q(e,t){var n=t.checked;return j({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function $(e,t){J(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Y(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return j({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function se(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ye=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function Ie(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,Ee=null,_e=null;function Ne(e){if(e=wi(e)){if("function"!==typeof xe)throw Error(s(280));var t=e.stateNode;t&&(t=xi(t),xe(e.stateNode,e.type,t))}}function Te(e){Ee?_e?_e.push(e):_e=[e]:Ee=e}function Se(){if(Ee){var e=Ee,t=_e;if(_e=Ee=null,Ne(e),t)for(e=0;e<t.length;e++)Ne(t[e])}}function Ce(e,t){return e(t)}function ke(){}var Ae=!1;function Re(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==Ee||null!==_e)&&(ke(),Se())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=xi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Oe=!1;if(u)try{var Le={};Object.defineProperty(Le,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",Le,Le),window.removeEventListener("test",Le,Le)}catch(ue){Oe=!1}function Me(e,t,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var De=!1,je=null,Fe=!1,Ue=null,qe={onError:function(e){De=!0,je=e}};function Ve(e,t,n,r,i,s,o,a,l){De=!1,je=null,Me.apply(qe,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Be(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(ze(e)!==e)throw Error(s(188))}function Ge(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return He(i),e;if(o===r)return He(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e),null!==e?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var Ke=i.unstable_scheduleCallback,Ye=i.unstable_cancelCallback,Qe=i.unstable_shouldYield,Xe=i.unstable_requestPaint,Je=i.unstable_now,$e=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=dt(a):0!==(s&=o)&&(r=dt(s))}else 0!==(o=n&~i)?r=dt(o):0!==s&&(r=dt(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var It,xt,Et,_t,Nt,Tt=!1,St=[],Ct=null,kt=null,At=null,Rt=new Map,Pt=new Map,Ot=[],Lt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":kt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Dt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=wi(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function jt(e){var t=bi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Be(n)))return e.blockedOn=t,void Nt(e.priority,function(){Et(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wi(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Ut(e,t,n){Ft(e)&&n.delete(t)}function qt(){Tt=!1,null!==Ct&&Ft(Ct)&&(Ct=null),null!==kt&&Ft(kt)&&(kt=null),null!==At&&Ft(At)&&(At=null),Rt.forEach(Ut),Pt.forEach(Ut)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,qt)))}function zt(e){function t(t){return Vt(t,e)}if(0<St.length){Vt(St[0],e);for(var n=1;n<St.length;n++){var r=St[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Vt(Ct,e),null!==kt&&Vt(kt,e),null!==At&&Vt(At,e),Rt.forEach(t),Pt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)jt(n),null===n.blockedOn&&Ot.shift()}var Bt=w.ReactCurrentBatchConfig,Ht=!0;function Gt(e,t,n,r){var i=bt,s=Bt.transition;Bt.transition=null;try{bt=1,Kt(e,t,n,r)}finally{bt=i,Bt.transition=s}}function Wt(e,t,n,r){var i=bt,s=Bt.transition;Bt.transition=null;try{bt=4,Kt(e,t,n,r)}finally{bt=i,Bt.transition=s}}function Kt(e,t,n,r){if(Ht){var i=Qt(e,t,n,r);if(null===i)Gr(e,t,r,Yt,n),Mt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Dt(Ct,e,t,n,r,i),!0;case"dragenter":return kt=Dt(kt,e,t,n,r,i),!0;case"mouseover":return At=Dt(At,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Rt.set(s,Dt(Rt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Pt.set(s,Dt(Pt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Mt(e,r),4&t&&-1<Lt.indexOf(e)){for(;null!==i;){var s=wi(i);if(null!==s&&It(s),null===(s=Qt(e,t,n,r))&&Gr(e,t,r,Yt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Gr(e,t,r,null,n)}}var Yt=null;function Qt(e,t,n,r){if(Yt=null,null!==(e=bi(e=Ie(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Be(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,$t=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=$t,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return j(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,cn,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=sn(un),hn=j({},un,{view:0,detail:0}),fn=sn(hn),pn=j({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cn&&(cn&&"mousemove"===e.type?(on=e.screenX-cn.screenX,an=e.screenY-cn.screenY):an=on=0,cn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),mn=sn(pn),gn=sn(j({},pn,{dataTransfer:0})),yn=sn(j({},hn,{relatedTarget:0})),vn=sn(j({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=j({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=sn(bn),In=sn(j({},un,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function Tn(){return Nn}var Sn=j({},hn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=sn(Sn),kn=sn(j({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=sn(j({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),Rn=sn(j({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=j({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=sn(Pn),Ln=[9,13,27,32],Mn=u&&"CompositionEvent"in window,Dn=null;u&&"documentMode"in document&&(Dn=document.documentMode);var jn=u&&"TextEvent"in window&&!Dn,Fn=u&&(!Mn||Dn&&8<Dn&&11>=Dn),Un=String.fromCharCode(32),qn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Ln.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function Wn(e,t,n,r){Te(r),0<(t=Kr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Yn=null;function Qn(e){Ur(e,0)}function Xn(e){if(K(Ii(e)))return e}function Jn(e,t){if("change"===e)return t}var $n=!1;if(u){var Zn;if(u){var er="oninput"in document;if(!er){var tr=document.createElement("div");tr.setAttribute("oninput","return;"),er="function"===typeof tr.oninput}Zn=er}else Zn=!1;$n=Zn&&(!document.documentMode||9<document.documentMode)}function nr(){Kn&&(Kn.detachEvent("onpropertychange",rr),Yn=Kn=null)}function rr(e){if("value"===e.propertyName&&Xn(Yn)){var t=[];Wn(t,Yn,e,Ie(e)),Re(Qn,t)}}function ir(e,t,n){"focusin"===e?(nr(),Yn=n,(Kn=t).attachEvent("onpropertychange",rr)):"focusout"===e&&nr()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(Yn)}function or(e,t){if("click"===e)return Xn(t)}function ar(e,t){if("input"===e||"change"===e)return Xn(t)}var lr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function cr(e,t){if(lr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!lr(e[i],t[i]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Y((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function mr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=dr(n,s);var o=dr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gr=u&&"documentMode"in document&&11>=document.documentMode,yr=null,vr=null,br=null,wr=!1;function Ir(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==yr||yr!==Y(r)||("selectionStart"in(r=yr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&cr(br,r)||(br=r,0<(r=Kr(vr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Er={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},_r={},Nr={};function Tr(e){if(_r[e])return _r[e];if(!Er[e])return e;var t,n=Er[e];for(t in n)if(n.hasOwnProperty(t)&&t in Nr)return _r[e]=n[t];return e}u&&(Nr=document.createElement("div").style,"AnimationEvent"in window||(delete Er.animationend.animation,delete Er.animationiteration.animation,delete Er.animationstart.animation),"TransitionEvent"in window||delete Er.transitionend.transition);var Sr=Tr("animationend"),Cr=Tr("animationiteration"),kr=Tr("animationstart"),Ar=Tr("transitionend"),Rr=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){Rr.set(e,t),l(t,[e])}for(var Lr=0;Lr<Pr.length;Lr++){var Mr=Pr[Lr];Or(Mr.toLowerCase(),"on"+(Mr[0].toUpperCase()+Mr.slice(1)))}Or(Sr,"onAnimationEnd"),Or(Cr,"onAnimationIteration"),Or(kr,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Ar,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,l,c){if(Ve.apply(this,arguments),De){if(!De)throw Error(s(198));var u=je;De=!1,je=null,Fe||(Fe=!0,Ue=u)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,c),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,c),s=l}}}if(Fe)throw e=Ue,Fe=!1,Ue=null,e}function qr(e,t){var n=t[gi];void 0===n&&(n=t[gi]=new Set);var r=e+"__bubble";n.has(r)||(Hr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),Hr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,o.forEach(function(t){"selectionchange"!==t&&(jr.has(t)||Vr(t,!1,e),Vr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function Hr(e,t,n,r){switch(Xt(t)){case 1:var i=Gt;break;case 4:i=Wt;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Gr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=bi(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}Re(function(){var r=s,i=Ie(n),o=[];e:{var a=Rr.get(e);if(void 0!==a){var l=dn,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":c="focus",l=yn;break;case"focusout":c="blur",l=yn;break;case"beforeblur":case"afterblur":l=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=An;break;case Sr:case Cr:case kr:l=vn;break;case Ar:l=Rn;break;case"scroll":l=fn;break;case"wheel":l=On;break;case"copy":case"cut":case"paste":l=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=kn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=Pe(p,h))&&u.push(Wr(p,m,f)))),d)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!bi(c)&&!c[mi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?bi(c):null)&&(c!==(d=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=mn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=kn,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?a:Ii(l),f=null==c?a:Ii(c),(a=new u(m,p+"leave",l,n,i)).target=d,a.relatedTarget=f,m=null,bi(i)===r&&((u=new u(h,p+"enter",c,n,i)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Yr(f))p++;for(f=0,m=h;m;m=Yr(m))f++;for(;0<p-f;)u=Yr(u),p--;for(;0<f-p;)h=Yr(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Yr(u),h=Yr(h)}u=null}else u=null;null!==l&&Qr(o,a,l,u,!1),null!==c&&null!==d&&Qr(o,d,c,u,!0)}if("select"===(l=(a=r?Ii(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Jn;else if(Gn(a))if($n)g=ar;else{g=sr;var y=ir}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=or);switch(g&&(g=g(e,r))?Wn(o,g,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?Ii(r):window,e){case"focusin":(Gn(y)||"true"===y.contentEditable)&&(yr=y,vr=r,br=null);break;case"focusout":br=vr=yr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,Ir(o,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":Ir(o,n,i)}var v;if(Mn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Bn?Vn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Fn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Bn&&(v=en()):($t="value"in(Jt=i)?Jt.value:Jt.textContent,Bn=!0)),0<(y=Kr(r,b)).length&&(b=new In(b,e,null,n,i),o.push({event:b,listeners:y}),v?b.data=v:null!==(v=zn(n))&&(b.data=v))),(v=jn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(qn=!0,Un);case"textInput":return(e=t.data)===Un&&qn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Mn&&Vn(e,t)?(e=en(),Zt=$t=Jt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new In("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=v))}Ur(o,t)})}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Pe(e,n))&&r.unshift(Wr(e,s,i)),null!=(s=Pe(e,t))&&r.push(Wr(e,s,i))),e=e.return}return r}function Yr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Pe(n,s))&&o.unshift(Wr(n,l,a)):i||null!=(l=Pe(n,s))&&o.push(Wr(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Xr=/\r\n?/g,Jr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Xr,"\n").replace(Jr,"")}function Zr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(s(425))}function ei(){}var ti=null,ni=null;function ri(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ii="function"===typeof setTimeout?setTimeout:void 0,si="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(li)}:ii;function li(e){setTimeout(function(){throw e})}function ci(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ui(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function di(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),fi="__reactFiber$"+hi,pi="__reactProps$"+hi,mi="__reactContainer$"+hi,gi="__reactEvents$"+hi,yi="__reactListeners$"+hi,vi="__reactHandles$"+hi;function bi(e){var t=e[fi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[mi]||n[fi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=di(e);null!==e;){if(n=e[fi])return n;e=di(e)}return t}n=(e=n).parentNode}return null}function wi(e){return!(e=e[fi]||e[mi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Ii(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function xi(e){return e[pi]||null}var Ei=[],_i=-1;function Ni(e){return{current:e}}function Ti(e){0>_i||(e.current=Ei[_i],Ei[_i]=null,_i--)}function Si(e,t){_i++,Ei[_i]=e.current,e.current=t}var Ci={},ki=Ni(Ci),Ai=Ni(!1),Ri=Ci;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Oi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Li(){Ti(Ai),Ti(ki)}function Mi(e,t,n){if(ki.current!==Ci)throw Error(s(168));Si(ki,t),Si(Ai,n)}function Di(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,B(e)||"Unknown",i));return j({},n,r)}function ji(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ci,Ri=ki.current,Si(ki,e),Si(Ai,Ai.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Di(e,t,Ri),r.__reactInternalMemoizedMergedChildContext=e,Ti(Ai),Ti(ki),Si(ki,e)):Ti(Ai),Si(Ai,n)}var Ui=null,qi=!1,Vi=!1;function zi(e){null===Ui?Ui=[e]:Ui.push(e)}function Bi(){if(!Vi&&null!==Ui){Vi=!0;var e=0,t=bt;try{var n=Ui;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,qi=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ke(Ze,Bi),i}finally{bt=t,Vi=!1}}return null}var Hi=[],Gi=0,Wi=null,Ki=0,Yi=[],Qi=0,Xi=null,Ji=1,$i="";function Zi(e,t){Hi[Gi++]=Ki,Hi[Gi++]=Wi,Wi=e,Ki=t}function es(e,t,n){Yi[Qi++]=Ji,Yi[Qi++]=$i,Yi[Qi++]=Xi,Xi=e;var r=Ji;e=$i;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ji=1<<32-ot(t)+i|n<<i|r,$i=s+e}else Ji=1<<s|n<<i|r,$i=e}function ts(e){null!==e.return&&(Zi(e,1),es(e,1,0))}function ns(e){for(;e===Wi;)Wi=Hi[--Gi],Hi[Gi]=null,Ki=Hi[--Gi],Hi[Gi]=null;for(;e===Xi;)Xi=Yi[--Qi],Yi[Qi]=null,$i=Yi[--Qi],Yi[Qi]=null,Ji=Yi[--Qi],Yi[Qi]=null}var rs=null,is=null,ss=!1,os=null;function as(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ls(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,rs=e,is=ui(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,rs=e,is=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Xi?{id:Ji,overflow:$i}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,rs=e,is=null,!0);default:return!1}}function cs(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function us(e){if(ss){var t=is;if(t){var n=t;if(!ls(e,t)){if(cs(e))throw Error(s(418));t=ui(n.nextSibling);var r=rs;t&&ls(e,t)?as(r,n):(e.flags=-4097&e.flags|2,ss=!1,rs=e)}}else{if(cs(e))throw Error(s(418));e.flags=-4097&e.flags|2,ss=!1,rs=e}}}function ds(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;rs=e}function hs(e){if(e!==rs)return!1;if(!ss)return ds(e),ss=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ri(e.type,e.memoizedProps)),t&&(t=is)){if(cs(e))throw fs(),Error(s(418));for(;t;)as(e,t),t=ui(t.nextSibling)}if(ds(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){is=ui(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}is=null}}else is=rs?ui(e.stateNode.nextSibling):null;return!0}function fs(){for(var e=is;e;)e=ui(e.nextSibling)}function ps(){is=rs=null,ss=!1}function ms(e){null===os?os=[e]:os.push(e)}var gs=w.ReactCurrentBatchConfig;function ys(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function vs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bs(e){return(0,e._init)(e._payload)}function ws(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=jc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===E?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===P&&bs(s)===t.type)?((r=i(t,n.props)).ref=ys(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=ys(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,s){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=jc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case I:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=ys(e,null,t),n.return=e,n;case x:return(t=Fc(t,e.mode,n)).return=e,t;case P:return h(e,(0,t._init)(t._payload),n)}if(te(t)||M(t))return(t=Mc(t,e.mode,n,null)).return=e,t;vs(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case I:return n.key===i?c(e,t,n,r):null;case x:return n.key===i?u(e,t,n,r):null;case P:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||M(n))return null!==i?null:d(e,t,n,r,null);vs(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case I:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||M(r))return d(t,e=e.get(n)||null,r,i,null);vs(t,r)}return null}function m(i,s,a,l){for(var c=null,u=null,d=s,m=s=0,g=null;null!==d&&m<a.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=f(i,d,a[m],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(i,d),s=o(y,s,m),null===u?c=y:u.sibling=y,u=y,d=g}if(m===a.length)return n(i,d),ss&&Zi(i,m),c;if(null===d){for(;m<a.length;m++)null!==(d=h(i,a[m],l))&&(s=o(d,s,m),null===u?c=d:u.sibling=d,u=d);return ss&&Zi(i,m),c}for(d=r(i,d);m<a.length;m++)null!==(g=p(d,i,m,a[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),s=o(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(i,e)}),ss&&Zi(i,m),c}function g(i,a,l,c){var u=M(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var d=u=null,m=a,g=a=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=f(i,m,v.value,c);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(i,m),a=o(b,a,g),null===d?u=b:d.sibling=b,d=b,m=y}if(v.done)return n(i,m),ss&&Zi(i,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=h(i,v.value,c))&&(a=o(v,a,g),null===d?u=v:d.sibling=v,d=v);return ss&&Zi(i,g),u}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=o(v,a,g),null===d?u=v:d.sibling=v,d=v);return e&&m.forEach(function(e){return t(i,e)}),ss&&Zi(i,g),u}return function e(r,s,o,l){if("object"===typeof o&&null!==o&&o.type===E&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case I:e:{for(var c=o.key,u=s;null!==u;){if(u.key===c){if((c=o.type)===E){if(7===u.tag){n(r,u.sibling),(s=i(u,o.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&bs(c)===u.type){n(r,u.sibling),(s=i(u,o.props)).ref=ys(r,u,o),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===E?((s=Mc(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=Lc(o.type,o.key,o.props,null,r.mode,l)).ref=ys(r,s,o),l.return=r,r=l)}return a(r);case x:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Fc(o,r.mode,l)).return=r,r=s}return a(r);case P:return e(r,s,(u=o._init)(o._payload),l)}if(te(o))return m(r,s,o,l);if(M(o))return g(r,s,o,l);vs(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=jc(o,r.mode,l)).return=r,r=s),a(r)):n(r,s)}}var Is=ws(!0),xs=ws(!1),Es=Ni(null),_s=null,Ns=null,Ts=null;function Ss(){Ts=Ns=_s=null}function Cs(e){var t=Es.current;Ti(Es),e._currentValue=t}function ks(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function As(e,t){_s=e,Ts=Ns=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wa=!0),e.firstContext=null)}function Rs(e){var t=e._currentValue;if(Ts!==e)if(e={context:e,memoizedValue:t,next:null},null===Ns){if(null===_s)throw Error(s(308));Ns=e,_s.dependencies={lanes:0,firstContext:e}}else Ns=Ns.next=e;return t}var Ps=null;function Os(e){null===Ps?Ps=[e]:Ps.push(e)}function Ls(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Os(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ms(e,r)}function Ms(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ds=!1;function js(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Us(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function qs(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ms(e,n)}return null===(i=r.interleaved)?(t.next=t,Os(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ms(e,n)}function Vs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function zs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Bs(e,t,n,r){var i=e.updateQueue;Ds=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=i.baseState;for(o=0,u=c=l=null,a=s;;){var h=a.lane,f=a.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(h=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=m.payload)?p.call(f,d,h):p)||void 0===h)break e;d=j({},d,h);break e;case 2:Ds=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,o|=h;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(h=a).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Dl|=o,e.lanes=o,e.memoizedState=d}}function Hs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Gs={},Ws=Ni(Gs),Ks=Ni(Gs),Ys=Ni(Gs);function Qs(e){if(e===Gs)throw Error(s(174));return e}function Xs(e,t){switch(Si(Ys,t),Si(Ks,e),Si(Ws,Gs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ti(Ws),Si(Ws,t)}function Js(){Ti(Ws),Ti(Ks),Ti(Ys)}function $s(e){Qs(Ys.current);var t=Qs(Ws.current),n=le(t,e.type);t!==n&&(Si(Ks,e),Si(Ws,n))}function Zs(e){Ks.current===e&&(Ti(Ws),Ti(Ks))}var eo=Ni(0);function to(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var no=[];function ro(){for(var e=0;e<no.length;e++)no[e]._workInProgressVersionPrimary=null;no.length=0}var io=w.ReactCurrentDispatcher,so=w.ReactCurrentBatchConfig,oo=0,ao=null,lo=null,co=null,uo=!1,ho=!1,fo=0,po=0;function mo(){throw Error(s(321))}function go(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lr(e[n],t[n]))return!1;return!0}function yo(e,t,n,r,i,o){if(oo=o,ao=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,io.current=null===e||null===e.memoizedState?ea:ta,e=n(r,i),ho){o=0;do{if(ho=!1,fo=0,25<=o)throw Error(s(301));o+=1,co=lo=null,t.updateQueue=null,io.current=na,e=n(r,i)}while(ho)}if(io.current=Zo,t=null!==lo&&null!==lo.next,oo=0,co=lo=ao=null,uo=!1,t)throw Error(s(300));return e}function vo(){var e=0!==fo;return fo=0,e}function bo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===co?ao.memoizedState=co=e:co=co.next=e,co}function wo(){if(null===lo){var e=ao.alternate;e=null!==e?e.memoizedState:null}else e=lo.next;var t=null===co?ao.memoizedState:co.next;if(null!==t)co=t,lo=e;else{if(null===e)throw Error(s(310));e={memoizedState:(lo=e).memoizedState,baseState:lo.baseState,baseQueue:lo.baseQueue,queue:lo.queue,next:null},null===co?ao.memoizedState=co=e:co=co.next=e}return co}function Io(e,t){return"function"===typeof t?t(e):t}function xo(e){var t=wo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=lo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,c=null,u=o;do{var d=u.lane;if((oo&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,a=r):c=c.next=h,ao.lanes|=d,Dl|=d}u=u.next}while(null!==u&&u!==o);null===c?a=r:c.next=l,lr(r,t.memoizedState)||(wa=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,ao.lanes|=o,Dl|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Eo(e){var t=wo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);lr(o,t.memoizedState)||(wa=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function _o(){}function No(e,t){var n=ao,r=wo(),i=t(),o=!lr(r.memoizedState,i);if(o&&(r.memoizedState=i,wa=!0),r=r.queue,jo(Co.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==co&&1&co.memoizedState.tag){if(n.flags|=2048,Po(9,So.bind(null,n,r,i,t),void 0,null),null===kl)throw Error(s(349));0!==(30&oo)||To(n,t,i)}return i}function To(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ao.updateQueue)?(t={lastEffect:null,stores:null},ao.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function So(e,t,n,r){t.value=n,t.getSnapshot=r,ko(t)&&Ao(e)}function Co(e,t,n){return n(function(){ko(t)&&Ao(e)})}function ko(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!lr(e,n)}catch(r){return!0}}function Ao(e){var t=Ms(e,1);null!==t&&nc(t,e,1,-1)}function Ro(e){var t=bo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:e},t.queue=e,e=e.dispatch=Qo.bind(null,ao,e),[t.memoizedState,e]}function Po(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ao.updateQueue)?(t={lastEffect:null,stores:null},ao.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Oo(){return wo().memoizedState}function Lo(e,t,n,r){var i=bo();ao.flags|=e,i.memoizedState=Po(1|t,n,void 0,void 0===r?null:r)}function Mo(e,t,n,r){var i=wo();r=void 0===r?null:r;var s=void 0;if(null!==lo){var o=lo.memoizedState;if(s=o.destroy,null!==r&&go(r,o.deps))return void(i.memoizedState=Po(t,n,s,r))}ao.flags|=e,i.memoizedState=Po(1|t,n,s,r)}function Do(e,t){return Lo(8390656,8,e,t)}function jo(e,t){return Mo(2048,8,e,t)}function Fo(e,t){return Mo(4,2,e,t)}function Uo(e,t){return Mo(4,4,e,t)}function qo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Vo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Mo(4,4,qo.bind(null,t,e),n)}function zo(){}function Bo(e,t){var n=wo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&go(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ho(e,t){var n=wo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&go(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Go(e,t,n){return 0===(21&oo)?(e.baseState&&(e.baseState=!1,wa=!0),e.memoizedState=n):(lr(n,t)||(n=mt(),ao.lanes|=n,Dl|=n,e.baseState=!0),t)}function Wo(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=so.transition;so.transition={};try{e(!1),t()}finally{bt=n,so.transition=r}}function Ko(){return wo().memoizedState}function Yo(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Xo(e))Jo(t,n);else if(null!==(n=Ls(e,t,n,r))){nc(n,e,r,ec()),$o(n,t,r)}}function Qo(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Xo(e))Jo(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,lr(a,o)){var l=t.interleaved;return null===l?(i.next=i,Os(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ls(e,t,i,r))&&(nc(n,e,r,i=ec()),$o(n,t,r))}}function Xo(e){var t=e.alternate;return e===ao||null!==t&&t===ao}function Jo(e,t){ho=uo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function $o(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Zo={readContext:Rs,useCallback:mo,useContext:mo,useEffect:mo,useImperativeHandle:mo,useInsertionEffect:mo,useLayoutEffect:mo,useMemo:mo,useReducer:mo,useRef:mo,useState:mo,useDebugValue:mo,useDeferredValue:mo,useTransition:mo,useMutableSource:mo,useSyncExternalStore:mo,useId:mo,unstable_isNewReconciler:!1},ea={readContext:Rs,useCallback:function(e,t){return bo().memoizedState=[e,void 0===t?null:t],e},useContext:Rs,useEffect:Do,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Lo(4194308,4,qo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Lo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Lo(4,2,e,t)},useMemo:function(e,t){var n=bo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=bo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Yo.bind(null,ao,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},bo().memoizedState=e},useState:Ro,useDebugValue:zo,useDeferredValue:function(e){return bo().memoizedState=e},useTransition:function(){var e=Ro(!1),t=e[0];return e=Wo.bind(null,e[1]),bo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ao,i=bo();if(ss){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===kl)throw Error(s(349));0!==(30&oo)||To(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Do(Co.bind(null,r,o,e),[e]),r.flags|=2048,Po(9,So.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=bo(),t=kl.identifierPrefix;if(ss){var n=$i;t=":"+t+"R"+(n=(Ji&~(1<<32-ot(Ji)-1)).toString(32)+n),0<(n=fo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=po++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ta={readContext:Rs,useCallback:Bo,useContext:Rs,useEffect:jo,useImperativeHandle:Vo,useInsertionEffect:Fo,useLayoutEffect:Uo,useMemo:Ho,useReducer:xo,useRef:Oo,useState:function(){return xo(Io)},useDebugValue:zo,useDeferredValue:function(e){return Go(wo(),lo.memoizedState,e)},useTransition:function(){return[xo(Io)[0],wo().memoizedState]},useMutableSource:_o,useSyncExternalStore:No,useId:Ko,unstable_isNewReconciler:!1},na={readContext:Rs,useCallback:Bo,useContext:Rs,useEffect:jo,useImperativeHandle:Vo,useInsertionEffect:Fo,useLayoutEffect:Uo,useMemo:Ho,useReducer:Eo,useRef:Oo,useState:function(){return Eo(Io)},useDebugValue:zo,useDeferredValue:function(e){var t=wo();return null===lo?t.memoizedState=e:Go(t,lo.memoizedState,e)},useTransition:function(){return[Eo(Io)[0],wo().memoizedState]},useMutableSource:_o,useSyncExternalStore:No,useId:Ko,unstable_isNewReconciler:!1};function ra(e,t){if(e&&e.defaultProps){for(var n in t=j({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ia(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:j({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var sa={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),s=Us(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=qs(e,s,i))&&(nc(t,e,i,r),Vs(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),s=Us(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=qs(e,s,i))&&(nc(t,e,i,r),Vs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Us(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=qs(e,i,r))&&(nc(t,e,r,n),Vs(t,e,r))}};function oa(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!cr(n,r)||!cr(i,s))}function aa(e,t,n){var r=!1,i=Ci,s=t.contextType;return"object"===typeof s&&null!==s?s=Rs(s):(i=Oi(t)?Ri:ki.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Ci),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=sa,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function la(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&sa.enqueueReplaceState(t,t.state,null)}function ca(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},js(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Rs(s):(s=Oi(t)?Ri:ki.current,i.context=Pi(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ia(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&sa.enqueueReplaceState(i,i.state,null),Bs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function ua(e,t){try{var n="",r=t;do{n+=V(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function da(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ha(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var fa="function"===typeof WeakMap?WeakMap:Map;function pa(e,t,n){(n=Us(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,Gl=r),ha(0,t)},n}function ma(e,t,n){(n=Us(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ha(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){ha(0,t),"function"!==typeof r&&(null===Wl?Wl=new Set([this]):Wl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ga(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fa;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Nc.bind(null,e,t,n),t.then(e,e))}function ya(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function va(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Us(-1,1)).tag=2,qs(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ba=w.ReactCurrentOwner,wa=!1;function Ia(e,t,n,r){t.child=null===e?xs(t,null,n,r):Is(t,e.child,n,r)}function xa(e,t,n,r,i){n=n.render;var s=t.ref;return As(t,i),r=yo(e,t,n,r,s,i),n=vo(),null===e||wa?(ss&&n&&ts(t),t.flags|=1,Ia(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ha(e,t,i))}function Ea(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Pc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,_a(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:cr)(o,r)&&e.ref===t.ref)return Ha(e,t,i)}return t.flags|=1,(e=Oc(s,r)).ref=t.ref,e.return=t,t.child=e}function _a(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(cr(s,r)&&e.ref===t.ref){if(wa=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Ha(e,t,i);0!==(131072&e.flags)&&(wa=!0)}}return Sa(e,t,n,r,i)}function Na(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Si(Ol,Pl),Pl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Si(Ol,Pl),Pl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Si(Ol,Pl),Pl|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Si(Ol,Pl),Pl|=r;return Ia(e,t,i,n),t.child}function Ta(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Sa(e,t,n,r,i){var s=Oi(n)?Ri:ki.current;return s=Pi(t,s),As(t,i),n=yo(e,t,n,r,s,i),r=vo(),null===e||wa?(ss&&r&&ts(t),t.flags|=1,Ia(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ha(e,t,i))}function Ca(e,t,n,r,i){if(Oi(n)){var s=!0;ji(t)}else s=!1;if(As(t,i),null===t.stateNode)Ba(e,t),aa(t,n,r),ca(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Rs(c):c=Pi(t,c=Oi(n)?Ri:ki.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;d||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==c)&&la(t,o,r,c),Ds=!1;var h=t.memoizedState;o.state=h,Bs(t,r,o,i),l=t.memoizedState,a!==r||h!==l||Ai.current||Ds?("function"===typeof u&&(ia(t,n,u,r),l=t.memoizedState),(a=Ds||oa(t,n,a,r,h,l,c))?(d||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Fs(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:ra(t.type,a),o.props=c,d=t.pendingProps,h=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Rs(l):l=Pi(t,l=Oi(n)?Ri:ki.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==d||h!==l)&&la(t,o,r,l),Ds=!1,h=t.memoizedState,o.state=h,Bs(t,r,o,i);var p=t.memoizedState;a!==d||h!==p||Ai.current||Ds?("function"===typeof f&&(ia(t,n,f,r),p=t.memoizedState),(c=Ds||oa(t,n,c,r,h,p,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return ka(e,t,n,r,s,i)}function ka(e,t,n,r,i,s){Ta(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Ha(e,t,s);r=t.stateNode,ba.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Is(t,e.child,null,s),t.child=Is(t,null,a,s)):Ia(e,t,a,s),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Aa(e){var t=e.stateNode;t.pendingContext?Mi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Mi(0,t.context,!1),Xs(e,t.containerInfo)}function Ra(e,t,n,r,i){return ps(),ms(i),t.flags|=256,Ia(e,t,n,r),t.child}var Pa,Oa,La,Ma={dehydrated:null,treeContext:null,retryLane:0};function Da(e){return{baseLanes:e,cachePool:null,transitions:null}}function ja(e,t,n){var r,i=t.pendingProps,o=eo.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Si(eo,1&o),null===e)return us(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Dc(l,i,0,null),e=Mc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Da(n),t.memoizedState=Ma,e):Fa(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,Ua(e,t,a,r=da(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Dc({mode:"visible",children:r.children},i,0,null),(o=Mc(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Is(t,e.child,null,a),t.child.memoizedState=Da(a),t.memoizedState=Ma,o);if(0===(1&t.mode))return Ua(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Ua(e,t,a,r=da(o=Error(s(419)),r,void 0))}if(l=0!==(a&e.childLanes),wa||l){if(null!==(r=kl)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ms(e,i),nc(r,e,i,-1))}return mc(),Ua(e,t,a,r=da(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Sc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,is=ui(i.nextSibling),rs=t,ss=!0,os=null,null!==e&&(Yi[Qi++]=Ji,Yi[Qi++]=$i,Yi[Qi++]=Xi,Ji=e.id,$i=e.overflow,Xi=t),t=Fa(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(a){a=i.fallback,l=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Oc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Oc(r,a):(a=Mc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Da(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Ma,i}return e=(a=e.child).sibling,i=Oc(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fa(e,t){return(t=Dc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ua(e,t,n,r){return null!==r&&ms(r),Is(t,e.child,null,n),(e=Fa(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function qa(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),ks(e.return,t,n)}function Va(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function za(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Ia(e,t,r.children,n),0!==(2&(r=eo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&qa(e,n,t);else if(19===e.tag)qa(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Si(eo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===to(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Va(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===to(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Va(t,!0,n,null,s);break;case"together":Va(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ba(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ha(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Dl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ga(e,t){if(!ss)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wa(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ka(e,t,n){var r=t.pendingProps;switch(ns(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wa(t),null;case 1:case 17:return Oi(t.type)&&Li(),Wa(t),null;case 3:return r=t.stateNode,Js(),Ti(Ai),Ti(ki),ro(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==os&&(oc(os),os=null))),Wa(t),null;case 5:Zs(t);var i=Qs(Ys.current);if(n=t.type,null!==e&&null!=t.stateNode)Oa(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Wa(t),null}if(e=Qs(Ws.current),hs(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[fi]=t,r[pi]=o,e=0!==(1&t.mode),n){case"dialog":qr("cancel",r),qr("close",r);break;case"iframe":case"object":case"embed":qr("load",r);break;case"video":case"audio":for(i=0;i<Dr.length;i++)qr(Dr[i],r);break;case"source":qr("error",r);break;case"img":case"image":case"link":qr("error",r),qr("load",r);break;case"details":qr("toggle",r);break;case"input":X(r,o),qr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},qr("invalid",r);break;case"textarea":ie(r,o),qr("invalid",r)}for(var l in ve(n,o),i=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Zr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Zr(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&qr("scroll",r)}switch(n){case"input":W(r),Z(r,o,!0);break;case"textarea":W(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=ei)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[fi]=t,e[pi]=r,Pa(e,t),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":qr("cancel",e),qr("close",e),i=r;break;case"iframe":case"object":case"embed":qr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Dr.length;i++)qr(Dr[i],e);i=r;break;case"source":qr("error",e),i=r;break;case"img":case"image":case"link":qr("error",e),qr("load",e),i=r;break;case"details":qr("toggle",e),i=r;break;case"input":X(e,r),i=Q(e,r),qr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=j({},r,{value:void 0}),qr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),qr("invalid",e)}for(o in ve(n,i),c=i)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?ge(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&qr("scroll",e):null!=u&&b(e,o,u,l))}switch(n){case"input":W(e),Z(e,r,!1);break;case"textarea":W(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=ei)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wa(t),null;case 6:if(e&&null!=t.stateNode)La(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Qs(Ys.current),Qs(Ws.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[fi]=t,(o=r.nodeValue!==n)&&null!==(e=rs))switch(e.tag){case 3:Zr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fi]=t,t.stateNode=r}return Wa(t),null;case 13:if(Ti(eo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ss&&null!==is&&0!==(1&t.mode)&&0===(128&t.flags))fs(),ps(),t.flags|=98560,o=!1;else if(o=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[fi]=t}else ps(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wa(t),o=!1}else null!==os&&(oc(os),os=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&eo.current)?0===Ll&&(Ll=3):mc())),null!==t.updateQueue&&(t.flags|=4),Wa(t),null);case 4:return Js(),null===e&&Br(t.stateNode.containerInfo),Wa(t),null;case 10:return Cs(t.type._context),Wa(t),null;case 19:if(Ti(eo),null===(o=t.memoizedState))return Wa(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Ga(o,!1);else{if(0!==Ll||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=to(e))){for(t.flags|=128,Ga(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Si(eo,1&eo.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>zl&&(t.flags|=128,r=!0,Ga(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=to(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ga(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!ss)return Wa(t),null}else 2*Je()-o.renderingStartTime>zl&&1073741824!==n&&(t.flags|=128,r=!0,Ga(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=eo.current,Si(eo,r?1&n|2:1&n),t):(Wa(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Pl)&&(Wa(t),6&t.subtreeFlags&&(t.flags|=8192)):Wa(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Ya(e,t){switch(ns(t),t.tag){case 1:return Oi(t.type)&&Li(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Js(),Ti(Ai),Ti(ki),ro(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Zs(t),null;case 13:if(Ti(eo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ps()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ti(eo),null;case 4:return Js(),null;case 10:return Cs(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Pa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Oa=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Qs(Ws.current);var s,o=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),o=[];break;case"select":i=j({},i,{value:void 0}),r=j({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=ei)}for(u in ve(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&qr("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},La=function(e,t,n,r){n!==r&&(t.flags|=4)};var Qa=!1,Xa=!1,Ja="function"===typeof WeakSet?WeakSet:Set,$a=null;function Za(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){_c(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){_c(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&el(t,n,s)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fi],delete t[pi],delete t[gi],delete t[yi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function al(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=ei));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function hl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Xa||Za(n,t);case 6:var r=ul,i=dl;ul=null,hl(e,t,n),dl=i,null!==(ul=r)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?ci(e.parentNode,n):1===e.nodeType&&ci(e,n),zt(e)):ci(ul,n.stateNode));break;case 4:r=ul,i=dl,ul=n.stateNode.containerInfo,dl=!0,hl(e,t,n),ul=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Xa&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&el(n,t,o),i=i.next}while(i!==r)}hl(e,t,n);break;case 1:if(!Xa&&(Za(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){_c(n,t,a)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Xa=(r=Xa)||null!==n.memoizedState,hl(e,t,n),Xa=r):hl(e,t,n);break;default:hl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ja),t.forEach(function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(s(160));fl(o,a,i),ul=null,dl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){_c(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),yl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){_c(e,e.return,g)}try{nl(5,e,e.return)}catch(g){_c(e,e.return,g)}}break;case 1:ml(t,e),yl(e),512&r&&null!==n&&Za(n,n.return);break;case 5:if(ml(t,e),yl(e),512&r&&null!==n&&Za(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(g){_c(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&J(i,o),be(l,a);var u=be(l,o);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];"style"===d?ge(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):b(i,d,h,u)}switch(l){case"input":$(i,o);break;case"textarea":se(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[pi]=o}catch(g){_c(e,e.return,g)}}break;case 6:if(ml(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){_c(e,e.return,g)}}break;case 3:if(ml(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(g){_c(e,e.return,g)}break;case 4:default:ml(t,e),yl(e);break;case 13:ml(t,e),yl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Vl=Je())),4&r&&pl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Xa=(u=Xa)||d,ml(t,e),Xa=u):ml(t,e),yl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for($a=e,d=e.child;null!==d;){for(h=$a=d;null!==$a;){switch(p=(f=$a).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Za(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){_c(r,n,g)}}break;case 5:Za(f,f.return);break;case 22:if(null!==f.memoizedState){Il(h);continue}}null!==p?(p.return=f,$a=p):Il(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,u?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=h.stateNode,a=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",a))}catch(g){_c(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){_c(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ml(t,e),yl(e),4&r&&pl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ol(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cl(e,al(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ll(e,al(e),o);break;default:throw Error(s(161))}}catch(a){_c(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){$a=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==$a;){var i=$a,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Qa;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Xa;a=Qa;var c=Xa;if(Qa=o,(Xa=l)&&!c)for($a=i;null!==$a;)l=(o=$a).child,22===o.tag&&null!==o.memoizedState?xl(i):null!==l?(l.return=o,$a=l):xl(i);for(;null!==s;)$a=s,bl(s,t,n),s=s.sibling;$a=i,Qa=a,Xa=c}wl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,$a=s):wl(e)}}function wl(e){for(;null!==$a;){var t=$a;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xa||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xa)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ra(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Hs(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Hs(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(s(163))}Xa||512&t.flags&&il(t)}catch(f){_c(t,t.return,f)}}if(t===e){$a=null;break}if(null!==(n=t.sibling)){n.return=t.return,$a=n;break}$a=t.return}}function Il(e){for(;null!==$a;){var t=$a;if(t===e){$a=null;break}var n=t.sibling;if(null!==n){n.return=t.return,$a=n;break}$a=t.return}}function xl(e){for(;null!==$a;){var t=$a;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){_c(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){_c(t,i,l)}}var s=t.return;try{il(t)}catch(l){_c(t,s,l)}break;case 5:var o=t.return;try{il(t)}catch(l){_c(t,o,l)}}}catch(l){_c(t,t.return,l)}if(t===e){$a=null;break}var a=t.sibling;if(null!==a){a.return=t.return,$a=a;break}$a=t.return}}var El,_l=Math.ceil,Nl=w.ReactCurrentDispatcher,Tl=w.ReactCurrentOwner,Sl=w.ReactCurrentBatchConfig,Cl=0,kl=null,Al=null,Rl=0,Pl=0,Ol=Ni(0),Ll=0,Ml=null,Dl=0,jl=0,Fl=0,Ul=null,ql=null,Vl=0,zl=1/0,Bl=null,Hl=!1,Gl=null,Wl=null,Kl=!1,Yl=null,Ql=0,Xl=0,Jl=null,$l=-1,Zl=0;function ec(){return 0!==(6&Cl)?Je():-1!==$l?$l:$l=Je()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Cl)&&0!==Rl?Rl&-Rl:null!==gs.transition?(0===Zl&&(Zl=mt()),Zl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function nc(e,t,n,r){if(50<Xl)throw Xl=0,Jl=null,Error(s(185));yt(e,n,r),0!==(2&Cl)&&e===kl||(e===kl&&(0===(2&Cl)&&(jl|=n),4===Ll&&ac(e,Rl)),rc(e,r),1===n&&0===Cl&&0===(1&t.mode)&&(zl=Je()+500,qi&&Bi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=ft(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=ht(e,e===kl?Rl:0);if(0===r)null!==n&&Ye(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ye(n),1===t)0===e.tag?function(e){qi=!0,zi(e)}(lc.bind(null,e)):zi(lc.bind(null,e)),ai(function(){0===(6&Cl)&&Bi()}),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=kc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if($l=-1,Zl=0,0!==(6&Cl))throw Error(s(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var r=ht(e,e===kl?Rl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var i=Cl;Cl|=2;var o=pc();for(kl===e&&Rl===t||(Bl=null,zl=Je()+500,hc(e,t));;)try{vc();break}catch(l){fc(e,l)}Ss(),Nl.current=o,Cl=i,null!==Al?t=0:(kl=null,Rl=0,t=Ll)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=sc(e,i))),1===t)throw n=Ml,hc(e,0),ac(e,r),rc(e,Je()),n;if(6===t)ac(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!lr(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gc(e,r))&&(0!==(o=pt(e))&&(r=o,t=sc(e,o))),1===t))throw n=Ml,hc(e,0),ac(e,r),rc(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:Ic(e,ql,Bl);break;case 3:if(ac(e,r),(130023424&r)===r&&10<(t=Vl+500-Je())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ii(Ic.bind(null,e,ql,Bl),t);break}Ic(e,ql,Bl);break;case 4:if(ac(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_l(r/1960))-r)){e.timeoutHandle=ii(Ic.bind(null,e,ql,Bl),r);break}Ic(e,ql,Bl);break;default:throw Error(s(329))}}}return rc(e,Je()),e.callbackNode===n?ic.bind(null,e):null}function sc(e,t){var n=Ul;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=ql,ql=n,null!==t&&oc(t)),e}function oc(e){null===ql?ql=e:ql.push.apply(ql,e)}function ac(e,t){for(t&=~Fl,t&=~jl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Cl))throw Error(s(327));xc();var t=ht(e,0);if(0===(1&t))return rc(e,Je()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=sc(e,r))}if(1===n)throw n=Ml,hc(e,0),ac(e,t),rc(e,Je()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ic(e,ql,Bl),rc(e,Je()),null}function cc(e,t){var n=Cl;Cl|=1;try{return e(t)}finally{0===(Cl=n)&&(zl=Je()+500,qi&&Bi())}}function uc(e){null!==Yl&&0===Yl.tag&&0===(6&Cl)&&xc();var t=Cl;Cl|=1;var n=Sl.transition,r=bt;try{if(Sl.transition=null,bt=1,e)return e()}finally{bt=r,Sl.transition=n,0===(6&(Cl=t))&&Bi()}}function dc(){Pl=Ol.current,Ti(Ol)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,si(n)),null!==Al)for(n=Al.return;null!==n;){var r=n;switch(ns(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Li();break;case 3:Js(),Ti(Ai),Ti(ki),ro();break;case 5:Zs(r);break;case 4:Js();break;case 13:case 19:Ti(eo);break;case 10:Cs(r.type._context);break;case 22:case 23:dc()}n=n.return}if(kl=e,Al=e=Oc(e.current,null),Rl=Pl=t,Ll=0,Ml=null,Fl=jl=Dl=0,ql=Ul=null,null!==Ps){for(t=0;t<Ps.length;t++)if(null!==(r=(n=Ps[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}Ps=null}return e}function fc(e,t){for(;;){var n=Al;try{if(Ss(),io.current=Zo,uo){for(var r=ao.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}uo=!1}if(oo=0,co=lo=ao=null,ho=!1,fo=0,Tl.current=null,null===n||null===n.return){Ll=1,Ml=t,Al=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=Rl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=ya(a);if(null!==p){p.flags&=-257,va(p,a,l,0,t),1&p.mode&&ga(o,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ga(o,u,t),mc();break e}c=Error(s(426))}else if(ss&&1&l.mode){var y=ya(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),va(y,a,l,0,t),ms(ua(c,l));break e}}o=c=ua(c,l),4!==Ll&&(Ll=2),null===Ul?Ul=[o]:Ul.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,zs(o,pa(0,c,t));break e;case 1:l=c;var v=o.type,b=o.stateNode;if(0===(128&o.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Wl||!Wl.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t,zs(o,ma(o,l,t));break e}}o=o.return}while(null!==o)}wc(n)}catch(w){t=w,Al===n&&null!==n&&(Al=n=n.return);continue}break}}function pc(){var e=Nl.current;return Nl.current=Zo,null===e?Zo:e}function mc(){0!==Ll&&3!==Ll&&2!==Ll||(Ll=4),null===kl||0===(268435455&Dl)&&0===(268435455&jl)||ac(kl,Rl)}function gc(e,t){var n=Cl;Cl|=2;var r=pc();for(kl===e&&Rl===t||(Bl=null,hc(e,t));;)try{yc();break}catch(i){fc(e,i)}if(Ss(),Cl=n,Nl.current=r,null!==Al)throw Error(s(261));return kl=null,Rl=0,Ll}function yc(){for(;null!==Al;)bc(Al)}function vc(){for(;null!==Al&&!Qe();)bc(Al)}function bc(e){var t=El(e.alternate,e,Pl);e.memoizedProps=e.pendingProps,null===t?wc(e):Al=t,Tl.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ka(n,t,Pl)))return void(Al=n)}else{if(null!==(n=Ya(n,t)))return n.flags&=32767,void(Al=n);if(null===e)return Ll=6,void(Al=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Al=t);Al=t=e}while(null!==t);0===Ll&&(Ll=5)}function Ic(e,t,n){var r=bt,i=Sl.transition;try{Sl.transition=null,bt=1,function(e,t,n,r){do{xc()}while(null!==Yl);if(0!==(6&Cl))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===kl&&(Al=kl=null,Rl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Kl||(Kl=!0,kc(tt,function(){return xc(),null})),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Sl.transition,Sl.transition=null;var a=bt;bt=1;var l=Cl;Cl|=4,Tl.current=null,function(e,t){if(ti=Ht,pr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(I){n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=a+i),h!==o||0!==r&&3!==h.nodeType||(c=a+r),3===h.nodeType&&(a+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===i&&(l=a),f===o&&++d===r&&(c=a),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ni={focusedElem:e,selectionRange:n},Ht=!1,$a=t;null!==$a;)if(e=(t=$a).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,$a=e;else for(;null!==$a;){t=$a;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:ra(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(s(163))}}catch(I){_c(t,t.return,I)}if(null!==(e=t.sibling)){e.return=t.return,$a=e;break}$a=t.return}m=tl,tl=!1}(e,n),gl(n,e),mr(ni),Ht=!!ti,ni=ti=null,e.current=n,vl(n,e,i),Xe(),Cl=l,bt=a,Sl.transition=o}else e.current=n;if(Kl&&(Kl=!1,Yl=e,Ql=i),o=e.pendingLanes,0===o&&(Wl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hl)throw Hl=!1,e=Gl,Gl=null,e;0!==(1&Ql)&&0!==e.tag&&xc(),o=e.pendingLanes,0!==(1&o)?e===Jl?Xl++:(Xl=0,Jl=e):Xl=0,Bi()}(e,t,n,r)}finally{Sl.transition=i,bt=r}return null}function xc(){if(null!==Yl){var e=wt(Ql),t=Sl.transition,n=bt;try{if(Sl.transition=null,bt=16>e?16:e,null===Yl)var r=!1;else{if(e=Yl,Yl=null,Ql=0,0!==(6&Cl))throw Error(s(331));var i=Cl;for(Cl|=4,$a=e.current;null!==$a;){var o=$a,a=o.child;if(0!==(16&$a.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for($a=u;null!==$a;){var d=$a;switch(d.tag){case 0:case 11:case 15:nl(8,d,o)}var h=d.child;if(null!==h)h.return=d,$a=h;else for(;null!==$a;){var f=(d=$a).sibling,p=d.return;if(sl(d),d===u){$a=null;break}if(null!==f){f.return=p,$a=f;break}$a=p}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}$a=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,$a=a;else e:for(;null!==$a;){if(0!==(2048&(o=$a).flags))switch(o.tag){case 0:case 11:case 15:nl(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,$a=v;break e}$a=o.return}}var b=e.current;for($a=b;null!==$a;){var w=(a=$a).child;if(0!==(2064&a.subtreeFlags)&&null!==w)w.return=a,$a=w;else e:for(a=b;null!==$a;){if(0!==(2048&(l=$a).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(x){_c(l,l.return,x)}if(l===a){$a=null;break e}var I=l.sibling;if(null!==I){I.return=l.return,$a=I;break e}$a=l.return}}if(Cl=i,Bi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(x){}r=!0}return r}finally{bt=n,Sl.transition=t}}return!1}function Ec(e,t,n){e=qs(e,t=pa(0,t=ua(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),rc(e,t))}function _c(e,t,n){if(3===e.tag)Ec(e,e,n);else for(;null!==t;){if(3===t.tag){Ec(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Wl||!Wl.has(r))){t=qs(t,e=ma(t,e=ua(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function Nc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,kl===e&&(Rl&n)===n&&(4===Ll||3===Ll&&(130023424&Rl)===Rl&&500>Je()-Vl?hc(e,0):Fl|=n),rc(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Ms(e,t))&&(yt(e,t,n),rc(e,n))}function Sc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Tc(e,n)}function kc(e,t){return Ke(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,r){return new Ac(e,t,n,r)}function Pc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Pc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case E:return Mc(n.children,i,o,t);case _:a=8,i|=8;break;case N:return(e=Rc(12,n,t,2|i)).elementType=N,e.lanes=o,e;case k:return(e=Rc(13,n,t,i)).elementType=k,e.lanes=o,e;case A:return(e=Rc(19,n,t,i)).elementType=A,e.lanes=o,e;case O:return Dc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:a=10;break e;case S:a=9;break e;case C:a=11;break e;case R:a=14;break e;case P:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Rc(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Mc(e,t,n,r){return(e=Rc(7,e,r,t)).lanes=n,e}function Dc(e,t,n,r){return(e=Rc(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function jc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function qc(e,t,n,r,i,s,o,a,l){return e=new Uc(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Rc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},js(s),e}function Vc(e){if(!e)return Ci;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Oi(n))return Di(e,n,t)}return t}function zc(e,t,n,r,i,s,o,a,l){return(e=qc(n,r,!0,e,0,s,0,a,l)).context=Vc(null),n=e.current,(s=Us(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,qs(n,s,i),e.current.lanes=i,yt(e,i,r),rc(e,r),e}function Bc(e,t,n,r){var i=t.current,s=ec(),o=tc(i);return n=Vc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Us(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=qs(i,t,o))&&(nc(e,i,o,s),Vs(e,i,o)),o}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wc(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}El=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ai.current)wa=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wa=!1,function(e,t,n){switch(t.tag){case 3:Aa(t),ps();break;case 5:$s(t);break;case 1:Oi(t.type)&&ji(t);break;case 4:Xs(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Si(Es,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Si(eo,1&eo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?ja(e,t,n):(Si(eo,1&eo.current),null!==(e=Ha(e,t,n))?e.sibling:null);Si(eo,1&eo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return za(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Si(eo,eo.current),r)break;return null;case 22:case 23:return t.lanes=0,Na(e,t,n)}return Ha(e,t,n)}(e,t,n);wa=0!==(131072&e.flags)}else wa=!1,ss&&0!==(1048576&t.flags)&&es(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ba(e,t),e=t.pendingProps;var i=Pi(t,ki.current);As(t,n),i=yo(null,t,r,e,i,n);var o=vo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oi(r)?(o=!0,ji(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,js(t),i.updater=sa,t.stateNode=i,i._reactInternals=t,ca(t,r,e,n),t=ka(null,t,r,!0,o,n)):(t.tag=0,ss&&o&&ts(t),Ia(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ba(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Pc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===R)return 14}return 2}(r),e=ra(r,e),i){case 0:t=Sa(null,t,r,e,n);break e;case 1:t=Ca(null,t,r,e,n);break e;case 11:t=xa(null,t,r,e,n);break e;case 14:t=Ea(null,t,r,ra(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Sa(e,t,r,i=t.elementType===r?i:ra(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ca(e,t,r,i=t.elementType===r?i:ra(r,i),n);case 3:e:{if(Aa(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Fs(e,t),Bs(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ra(e,t,r,n,i=ua(Error(s(423)),t));break e}if(r!==i){t=Ra(e,t,r,n,i=ua(Error(s(424)),t));break e}for(is=ui(t.stateNode.containerInfo.firstChild),rs=t,ss=!0,os=null,n=xs(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ps(),r===i){t=Ha(e,t,n);break e}Ia(e,t,r,n)}t=t.child}return t;case 5:return $s(t),null===e&&us(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ri(r,i)?a=null:null!==o&&ri(r,o)&&(t.flags|=32),Ta(e,t),Ia(e,t,a,n),t.child;case 6:return null===e&&us(t),null;case 13:return ja(e,t,n);case 4:return Xs(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Is(t,null,r,n):Ia(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xa(e,t,r,i=t.elementType===r?i:ra(r,i),n);case 7:return Ia(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ia(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,Si(Es,r._currentValue),r._currentValue=a,null!==o)if(lr(o.value,a)){if(o.children===i.children&&!Ai.current){t=Ha(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Us(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),ks(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),ks(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}Ia(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,As(t,n),r=r(i=Rs(i)),t.flags|=1,Ia(e,t,r,n),t.child;case 14:return i=ra(r=t.type,t.pendingProps),Ea(e,t,r,i=ra(r.type,i),n);case 15:return _a(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ra(r,i),Ba(e,t),t.tag=1,Oi(r)?(e=!0,ji(t)):e=!1,As(t,n),aa(t,r,i),ca(t,r,i,n),ka(null,t,r,!0,e,n);case 19:return za(e,t,n);case 22:return Na(e,t,n)}throw Error(s(156,t.tag))};var Kc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Qc(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $c(){}function Zc(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=Hc(o);a.call(e)}}Bc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Hc(o);s.call(e)}}var o=zc(t,r,e,0,null,!1,0,"",$c);return e._reactRootContainer=o,e[mi]=o.current,Br(8===e.nodeType?e.parentNode:e),uc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Hc(l);a.call(e)}}var l=qc(e,0,!1,null,0,!1,0,"",$c);return e._reactRootContainer=l,e[mi]=l.current,Br(8===e.nodeType?e.parentNode:e),uc(function(){Bc(t,l,n,r)}),l}(n,t,e,i,r);return Hc(o)}Qc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Bc(e,t,null,null)},Qc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc(function(){Bc(null,e,null,null)}),t[mi]=null}},Qc.prototype.unstable_scheduleHydration=function(e){if(e){var t=_t();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&jt(e)}},It=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(vt(t,1|n),rc(t,Je()),0===(6&Cl)&&(zl=Je()+500,Bi()))}break;case 13:uc(function(){var t=Ms(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),Wc(e,1)}},xt=function(e){if(13===e.tag){var t=Ms(e,134217728);if(null!==t)nc(t,e,134217728,ec());Wc(e,134217728)}},Et=function(e){if(13===e.tag){var t=tc(e),n=Ms(e,t);if(null!==n)nc(n,e,t,ec());Wc(e,t)}},_t=function(){return bt},Nt=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},xe=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=xi(r);if(!i)throw Error(s(90));K(r),$(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=cc,ke=uc;var eu={usingClientEntryPoint:!1,Events:[wi,Ii,xi,Te,Se,cc]},tu={findFiberByHostInstance:bi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{it=ru.inject(nu),st=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(s(299));var n=!1,r="",i=Kc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=qc(e,1,!1,null,0,n,0,r,i),e[mi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(s(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Kc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=zc(t,null,e,1,null!=n?n:null,i,0,o,a),e[mi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Qc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(s(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(s(40));return!!e._reactRootContainer&&(uc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[mi]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},853(e,t,n){e.exports=n(234)},950(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}();var r=n(43),i=n(391);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function o(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}function a(e,t,n){return(t=o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){a(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function u(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}const d=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},h=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim()};var f={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const p=["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"],m=(0,r.forwardRef)((e,t)=>{let{color:n="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:a="",children:l,iconNode:d}=e,m=u(e,p);return(0,r.createElement)("svg",c(c(c({ref:t},f),{},{width:i,height:i,stroke:n,strokeWidth:o?24*Number(s)/Number(i):s,className:h("lucide",a)},!l&&!(e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(m)&&{"aria-hidden":"true"}),m),[...d.map(e=>{let[t,n]=e;return(0,r.createElement)(t,n)}),...Array.isArray(l)?l:[l]])}),g=["className"],y=(e,t)=>{const n=(0,r.forwardRef)((n,i)=>{let{className:s}=n,o=u(n,g);return(0,r.createElement)(m,c({ref:i,iconNode:t,className:h("lucide-".concat((a=d(e),a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase())),"lucide-".concat(e),s)},o));var a});return n.displayName=d(e),n},v=y("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),b=y("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),w=y("bone",[["path",{d:"M17 10c.7-.7 1.69 0 2.5 0a2.5 2.5 0 1 0 0-5 .5.5 0 0 1-.5-.5 2.5 2.5 0 1 0-5 0c0 .81.7 1.8 0 2.5l-7 7c-.7.7-1.69 0-2.5 0a2.5 2.5 0 0 0 0 5c.28 0 .5.22.5.5a2.5 2.5 0 1 0 5 0c0-.81-.7-1.8 0-2.5Z",key:"w610uw"}]]),I=y("bug",[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]]),x=y("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),E=y("brain",[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]]),_=y("scale",[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"m19 8 3 8a5 5 0 0 1-6 0zV7",key:"zcdpyk"}],["path",{d:"M3 7h1a17 17 0 0 0 8-2 17 17 0 0 0 8 2h1",key:"1yorad"}],["path",{d:"m5 8 3 8a5 5 0 0 1-6 0zV7",key:"eua70x"}],["path",{d:"M7 21h10",key:"1b0cd5"}]]),N=y("graduation-cap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]),T=y("trophy",[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]]),S=y("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),C=y("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),k=y("crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]),A=y("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),R=y("flame",[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]]),P=y("split",[["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M8 3H3v5",key:"15dfkv"}],["path",{d:"M12 22v-8.3a4 4 0 0 0-1.172-2.872L3 3",key:"1qrqzj"}],["path",{d:"m15 9 6-6",key:"ko1vev"}]]),O=y("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),L=y("timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]),M=y("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),D=y("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),j=y("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),F=y("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),U=y("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]),q=y("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),V=y("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),z=y("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var B={};!function e(t,n,r,i){var s=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL),o="function"===typeof Path2D&&"function"===typeof DOMMatrix;function a(){}function l(e){var r=n.exports.Promise,i=void 0!==r?r:t.Promise;return"function"===typeof i?new i(e):(e(a,a),null)}var c,u=function(e,t){return{transform:function(n){if(e)return n;if(t.has(n))return t.get(n);var r=new OffscreenCanvas(n.width,n.height);return r.getContext("2d").drawImage(n,0,0),t.set(n,r),r},clear:function(){t.clear()}}}(function(){if(!t.OffscreenCanvas)return!1;try{var e=new OffscreenCanvas(1,1),n=e.getContext("2d");n.fillRect(0,0,1,1);var r=e.transferToImageBitmap();n.createPattern(r,"no-repeat")}catch(i){return!1}return!0}(),new Map),d=function(){var e,t,n=Math.floor(1e3/60),r={},i=0;return"function"===typeof requestAnimationFrame&&"function"===typeof cancelAnimationFrame?(e=function(e){var t=Math.random();return r[t]=requestAnimationFrame(function s(o){i===o||i+n-1<o?(i=o,delete r[t],e()):r[t]=requestAnimationFrame(s)}),t},t=function(e){r[e]&&cancelAnimationFrame(r[e])}):(e=function(e){return setTimeout(e,n)},t=function(e){return clearTimeout(e)}),{frame:e,cancel:t}}(),h=function(){var t,n,i={};return function(){if(t)return t;if(!r&&s){var o=["var CONFETTI, SIZE = {}, module = {};","("+e.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join("\n");try{t=new Worker(URL.createObjectURL(new Blob([o])))}catch(a){return"undefined"!==typeof console&&"function"===typeof console.warn&&console.warn("\ud83c\udf8a Could not load worker",a),null}!function(e){function t(t,n){e.postMessage({options:t||{},callback:n})}e.init=function(t){var n=t.transferControlToOffscreen();e.postMessage({canvas:n},[n])},e.fire=function(r,s,o){if(n)return t(r,null),n;var a=Math.random().toString(36).slice(2);return n=l(function(s){function l(t){t.data.callback===a&&(delete i[a],e.removeEventListener("message",l),n=null,u.clear(),o(),s())}e.addEventListener("message",l),t(r,a),i[a]=l.bind(null,{data:{callback:a}})})},e.reset=function(){for(var t in e.postMessage({reset:!0}),i)i[t](),delete i[t]}}(t)}return t}}(),f={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function p(e,t,n){return function(e,t){return t?t(e):e}(e&&(null!==(r=e[t])&&void 0!==r)?e[t]:f[t],n);var r}function m(e){return e<0?0:Math.floor(e)}function g(e,t){return Math.floor(Math.random()*(t-e))+e}function y(e){return parseInt(e,16)}function v(e){return e.map(b)}function b(e){var t=String(e).replace(/[^0-9a-f]/gi,"");return t.length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),{r:y(t.substring(0,2)),g:y(t.substring(2,4)),b:y(t.substring(4,6))}}function w(e){e.width=document.documentElement.clientWidth,e.height=document.documentElement.clientHeight}function I(e){var t=e.getBoundingClientRect();e.width=t.width,e.height=t.height}function x(e){var t=e.angle*(Math.PI/180),n=e.spread*(Math.PI/180);return{x:e.x,y:e.y,wobble:10*Math.random(),wobbleSpeed:Math.min(.11,.1*Math.random()+.05),velocity:.5*e.startVelocity+Math.random()*e.startVelocity,angle2D:-t+(.5*n-Math.random()*n),tiltAngle:(.5*Math.random()+.25)*Math.PI,color:e.color,shape:e.shape,tick:0,totalTicks:e.ticks,decay:e.decay,drift:e.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:3*e.gravity,ovalScalar:.6,scalar:e.scalar,flat:e.flat}}function E(e,t){t.x+=Math.cos(t.angle2D)*t.velocity+t.drift,t.y+=Math.sin(t.angle2D)*t.velocity+t.gravity,t.velocity*=t.decay,t.flat?(t.wobble=0,t.wobbleX=t.x+10*t.scalar,t.wobbleY=t.y+10*t.scalar,t.tiltSin=0,t.tiltCos=0,t.random=1):(t.wobble+=t.wobbleSpeed,t.wobbleX=t.x+10*t.scalar*Math.cos(t.wobble),t.wobbleY=t.y+10*t.scalar*Math.sin(t.wobble),t.tiltAngle+=.1,t.tiltSin=Math.sin(t.tiltAngle),t.tiltCos=Math.cos(t.tiltAngle),t.random=Math.random()+2);var n=t.tick++/t.totalTicks,r=t.x+t.random*t.tiltCos,i=t.y+t.random*t.tiltSin,s=t.wobbleX+t.random*t.tiltCos,a=t.wobbleY+t.random*t.tiltSin;if(e.fillStyle="rgba("+t.color.r+", "+t.color.g+", "+t.color.b+", "+(1-n)+")",e.beginPath(),o&&"path"===t.shape.type&&"string"===typeof t.shape.path&&Array.isArray(t.shape.matrix))e.fill(function(e,t,n,r,i,s,o){var a=new Path2D(e),l=new Path2D;l.addPath(a,new DOMMatrix(t));var c=new Path2D;return c.addPath(l,new DOMMatrix([Math.cos(o)*i,Math.sin(o)*i,-Math.sin(o)*s,Math.cos(o)*s,n,r])),c}(t.shape.path,t.shape.matrix,t.x,t.y,.1*Math.abs(s-r),.1*Math.abs(a-i),Math.PI/10*t.wobble));else if("bitmap"===t.shape.type){var l=Math.PI/10*t.wobble,c=.1*Math.abs(s-r),d=.1*Math.abs(a-i),h=t.shape.bitmap.width*t.scalar,f=t.shape.bitmap.height*t.scalar,p=new DOMMatrix([Math.cos(l)*c,Math.sin(l)*c,-Math.sin(l)*d,Math.cos(l)*d,t.x,t.y]);p.multiplySelf(new DOMMatrix(t.shape.matrix));var m=e.createPattern(u.transform(t.shape.bitmap),"no-repeat");m.setTransform(p),e.globalAlpha=1-n,e.fillStyle=m,e.fillRect(t.x-h/2,t.y-f/2,h,f),e.globalAlpha=1}else if("circle"===t.shape)e.ellipse?e.ellipse(t.x,t.y,Math.abs(s-r)*t.ovalScalar,Math.abs(a-i)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI):function(e,t,n,r,i,s,o,a,l){e.save(),e.translate(t,n),e.rotate(s),e.scale(r,i),e.arc(0,0,1,o,a,l),e.restore()}(e,t.x,t.y,Math.abs(s-r)*t.ovalScalar,Math.abs(a-i)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI);else if("star"===t.shape)for(var g=Math.PI/2*3,y=4*t.scalar,v=8*t.scalar,b=t.x,w=t.y,I=5,x=Math.PI/I;I--;)b=t.x+Math.cos(g)*v,w=t.y+Math.sin(g)*v,e.lineTo(b,w),g+=x,b=t.x+Math.cos(g)*y,w=t.y+Math.sin(g)*y,e.lineTo(b,w),g+=x;else e.moveTo(Math.floor(t.x),Math.floor(t.y)),e.lineTo(Math.floor(t.wobbleX),Math.floor(i)),e.lineTo(Math.floor(s),Math.floor(a)),e.lineTo(Math.floor(r),Math.floor(t.wobbleY));return e.closePath(),e.fill(),t.tick<t.totalTicks}function _(e,n){var o,a=!e,c=!!p(n||{},"resize"),f=!1,y=p(n,"disableForReducedMotion",Boolean),b=s&&!!p(n||{},"useWorker")?h():null,_=a?w:I,N=!(!e||!b)&&!!e.__confetti_initialized,T="function"===typeof matchMedia&&matchMedia("(prefers-reduced-motion)").matches;function S(t,n,s){for(var a=p(t,"particleCount",m),c=p(t,"angle",Number),h=p(t,"spread",Number),f=p(t,"startVelocity",Number),y=p(t,"decay",Number),b=p(t,"gravity",Number),w=p(t,"drift",Number),I=p(t,"colors",v),N=p(t,"ticks",Number),T=p(t,"shapes"),S=p(t,"scalar"),C=!!p(t,"flat"),k=function(e){var t=p(e,"origin",Object);return t.x=p(t,"x",Number),t.y=p(t,"y",Number),t}(t),A=a,R=[],P=e.width*k.x,O=e.height*k.y;A--;)R.push(x({x:P,y:O,angle:c,spread:h,startVelocity:f,color:I[A%I.length],shape:T[g(0,T.length)],ticks:N,decay:y,gravity:b,drift:w,scalar:S,flat:C}));return o?o.addFettis(R):(o=function(e,t,n,s,o){var a,c,h=t.slice(),f=e.getContext("2d"),p=l(function(t){function l(){a=c=null,f.clearRect(0,0,s.width,s.height),u.clear(),o(),t()}a=d.frame(function t(){!r||s.width===i.width&&s.height===i.height||(s.width=e.width=i.width,s.height=e.height=i.height),s.width||s.height||(n(e),s.width=e.width,s.height=e.height),f.clearRect(0,0,s.width,s.height),(h=h.filter(function(e){return E(f,e)})).length?a=d.frame(t):l()}),c=l});return{addFettis:function(e){return h=h.concat(e),p},canvas:e,promise:p,reset:function(){a&&d.cancel(a),c&&c()}}}(e,R,_,n,s),o.promise)}function C(n){var r=y||p(n,"disableForReducedMotion",Boolean),i=p(n,"zIndex",Number);if(r&&T)return l(function(e){e()});a&&o?e=o.canvas:a&&!e&&(e=function(e){var t=document.createElement("canvas");return t.style.position="fixed",t.style.top="0px",t.style.left="0px",t.style.pointerEvents="none",t.style.zIndex=e,t}(i),document.body.appendChild(e)),c&&!N&&_(e);var s={width:e.width,height:e.height};function u(){if(b){var t={getBoundingClientRect:function(){if(!a)return e.getBoundingClientRect()}};return _(t),void b.postMessage({resize:{width:t.width,height:t.height}})}s.width=s.height=null}function d(){o=null,c&&(f=!1,t.removeEventListener("resize",u)),a&&e&&(document.body.contains(e)&&document.body.removeChild(e),e=null,N=!1)}return b&&!N&&b.init(e),N=!0,b&&(e.__confetti_initialized=!0),c&&!f&&(f=!0,t.addEventListener("resize",u,!1)),b?b.fire(n,s,d):S(n,s,d)}return C.reset=function(){b&&b.reset(),o&&o.reset()},C}function N(){return c||(c=_(null,{useWorker:!0,resize:!0})),c}n.exports=function(){return N().apply(this,arguments)},n.exports.reset=function(){N().reset()},n.exports.create=_,n.exports.shapeFromPath=function(e){if(!o)throw new Error("path confetti are not supported in this browser");var t,n;"string"===typeof e?t=e:(t=e.path,n=e.matrix);var r=new Path2D(t),i=document.createElement("canvas").getContext("2d");if(!n){for(var s,a,l=1e3,c=l,u=l,d=0,h=0,f=0;f<l;f+=2)for(var p=0;p<l;p+=2)i.isPointInPath(r,f,p,"nonzero")&&(c=Math.min(c,f),u=Math.min(u,p),d=Math.max(d,f),h=Math.max(h,p));s=d-c,a=h-u;var m=Math.min(10/s,10/a);n=[m,0,0,m,-Math.round(s/2+c)*m,-Math.round(a/2+u)*m]}return{type:"path",path:t,matrix:n}},n.exports.shapeFromText=function(e){var t,n=1,r="#000000",i='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';"string"===typeof e?t=e:(t=e.text,n="scalar"in e?e.scalar:n,i="fontFamily"in e?e.fontFamily:i,r="color"in e?e.color:r);var s=10*n,o=s+"px "+i,a=new OffscreenCanvas(s,s),l=a.getContext("2d");l.font=o;var c=l.measureText(t),u=Math.ceil(c.actualBoundingBoxRight+c.actualBoundingBoxLeft),d=Math.ceil(c.actualBoundingBoxAscent+c.actualBoundingBoxDescent),h=c.actualBoundingBoxLeft+2,f=c.actualBoundingBoxAscent+2;u+=4,d+=4,(l=(a=new OffscreenCanvas(u,d)).getContext("2d")).font=o,l.fillStyle=r,l.fillText(t,h,f);var p=1/n;return{type:"bitmap",bitmap:a.transferToImageBitmap(),matrix:[p,0,0,p,-u*p/2,-d*p/2]}}}(function(){return"undefined"!==typeof window?window:"undefined"!==typeof self?self:this||{}}(),B,!1);const H=B.exports;B.exports.create;const G=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},W={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let d=(15&o)<<2|l>>6,h=63&l;a||(h=64,s||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(G(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new K;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class K extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Y=function(e){return function(e){const t=G(e);return W.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Q=function(e){try{return W.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};const X=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,J=()=>{try{return X()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/Term-3-Gaming",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&Q(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},$=e=>{var t,n;return null===(n=null===(t=J())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},Z=()=>{var e;return null===(e=J())||void 0===e?void 0:e.config},ee=e=>{var t;return null===(t=J())||void 0===t?void 0:t["_".concat(e)]};class te{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function ne(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function re(){return!function(){var e;const t=null===(e=J())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ie(){try{return"object"===typeof indexedDB}catch(e){return!1}}class se extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,se.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,oe.prototype.create)}}class oe{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(ae,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new se(n,s,t)}}const ae=/\{\$([^}]+)}/g;function le(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(ce(n)&&ce(s)){if(!le(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function ce(e){return null!==e&&"object"===typeof e}function ue(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function de(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function he(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class fe{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=pe),void 0===r.error&&(r.error=pe),void 0===r.complete&&(r.complete=pe);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function pe(){}function me(e){return e&&e._delegate?e._delegate:e}class ge{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ye="[DEFAULT]";class ve{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new te;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:ye})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===ye?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye;return this.component?this.component.multipleInstances?e:ye:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class be{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ve(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const we=[];var Ie;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Ie||(Ie={}));const xe={debug:Ie.DEBUG,verbose:Ie.VERBOSE,info:Ie.INFO,warn:Ie.WARN,error:Ie.ERROR,silent:Ie.SILENT},Ee=Ie.INFO,_e={[Ie.DEBUG]:"log",[Ie.VERBOSE]:"log",[Ie.INFO]:"info",[Ie.WARN]:"warn",[Ie.ERROR]:"error"},Ne=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=_e[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class Te{constructor(e){this.name=e,this._logLevel=Ee,this._logHandler=Ne,this._userLogHandler=null,we.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ie))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?xe[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ie.DEBUG,...t),this._logHandler(this,Ie.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ie.VERBOSE,...t),this._logHandler(this,Ie.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ie.INFO,...t),this._logHandler(this,Ie.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ie.WARN,...t),this._logHandler(this,Ie.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ie.ERROR,...t),this._logHandler(this,Ie.ERROR,...t)}}let Se,Ce;const ke=new WeakMap,Ae=new WeakMap,Re=new WeakMap,Pe=new WeakMap,Oe=new WeakMap;let Le={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Ae.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Re.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return je(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Me(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Ce||(Ce=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Fe(this),n),je(ke.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return je(e.apply(Fe(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(Fe(this),t,...r);return Re.set(s,t.sort?t.sort():[t]),je(s)}}function De(e){return"function"===typeof e?Me(e):(e instanceof IDBTransaction&&function(e){if(Ae.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});Ae.set(e,t)}(e),t=e,(Se||(Se=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,Le):e);var t}function je(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(je(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&ke.set(t,e)}).catch(()=>{}),Oe.set(t,e),t}(e);if(Pe.has(e))return Pe.get(e);const t=De(e);return t!==e&&(Pe.set(e,t),Oe.set(t,e)),t}const Fe=e=>Oe.get(e);const Ue=["get","getKey","getAll","getAllKeys","count"],qe=["put","add","delete","clear"],Ve=new Map;function ze(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Ve.get(t))return Ve.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=qe.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Ue.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return Ve.set(t,s),s}Le=(e=>c(c({},e),{},{get:(t,n,r)=>ze(t,n)||e.get(t,n,r),has:(t,n)=>!!ze(t,n)||e.has(t,n)}))(Le);class Be{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const He="@firebase/app",Ge="0.10.13",We=new Te("@firebase/app"),Ke="@firebase/app-compat",Ye="@firebase/analytics-compat",Qe="@firebase/analytics",Xe="@firebase/app-check-compat",Je="@firebase/app-check",$e="@firebase/auth",Ze="@firebase/auth-compat",et="@firebase/database",tt="@firebase/data-connect",nt="@firebase/database-compat",rt="@firebase/functions",it="@firebase/functions-compat",st="@firebase/installations",ot="@firebase/installations-compat",at="@firebase/messaging",lt="@firebase/messaging-compat",ct="@firebase/performance",ut="@firebase/performance-compat",dt="@firebase/remote-config",ht="@firebase/remote-config-compat",ft="@firebase/storage",pt="@firebase/storage-compat",mt="@firebase/firestore",gt="@firebase/vertexai-preview",yt="@firebase/firestore-compat",vt="firebase",bt="[DEFAULT]",wt={[He]:"fire-core",[Ke]:"fire-core-compat",[Qe]:"fire-analytics",[Ye]:"fire-analytics-compat",[Je]:"fire-app-check",[Xe]:"fire-app-check-compat",[$e]:"fire-auth",[Ze]:"fire-auth-compat",[et]:"fire-rtdb",[tt]:"fire-data-connect",[nt]:"fire-rtdb-compat",[rt]:"fire-fn",[it]:"fire-fn-compat",[st]:"fire-iid",[ot]:"fire-iid-compat",[at]:"fire-fcm",[lt]:"fire-fcm-compat",[ct]:"fire-perf",[ut]:"fire-perf-compat",[dt]:"fire-rc",[ht]:"fire-rc-compat",[ft]:"fire-gcs",[pt]:"fire-gcs-compat",[mt]:"fire-fst",[yt]:"fire-fst-compat",[gt]:"fire-vertex","fire-js":"fire-js",[vt]:"fire-js-all"},It=new Map,xt=new Map,Et=new Map;function _t(e,t){try{e.container.addComponent(t)}catch(n){We.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Nt(e){const t=e.name;if(Et.has(t))return We.debug("There were multiple attempts to register component ".concat(t,".")),!1;Et.set(t,e);for(const n of It.values())_t(n,e);for(const n of xt.values())_t(n,e);return!0}function Tt(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function St(e){return void 0!==e.settings}const Ct=new oe("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class kt{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ge("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ct.create("app-deleted",{appName:this._name})}}const At="10.14.1";function Rt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:bt,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Ct.create("bad-app-name",{appName:String(i)});if(n||(n=Z()),!n)throw Ct.create("no-options");const s=It.get(i);if(s){if(le(n,s.options)&&le(r,s.config))return s;throw Ct.create("duplicate-app",{appName:i})}const o=new be(i);for(const l of Et.values())o.addComponent(l);const a=new kt(n,r,o);return It.set(i,a),a}function Pt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bt;const t=It.get(e);if(!t&&e===bt&&Z())return Rt();if(!t)throw Ct.create("no-app",{appName:e});return t}function Ot(e,t,n){var r;let i=null!==(r=wt[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void We.warn(e.join(" "))}Nt(new ge("".concat(i,"-version"),()=>({library:i,version:t}),"VERSION"))}const Lt="firebase-heartbeat-store";let Mt=null;function Dt(){return Mt||(Mt=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=je(o);return r&&o.addEventListener("upgradeneeded",e=>{r(je(o.result),e.oldVersion,e.newVersion,je(o.transaction),e)}),n&&o.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Lt)}catch(n){console.warn(n)}}}).catch(e=>{throw Ct.create("idb-open",{originalErrorMessage:e.message})})),Mt}async function jt(e,t){try{const n=(await Dt()).transaction(Lt,"readwrite"),r=n.objectStore(Lt);await r.put(t,Ft(e)),await n.done}catch(n){if(n instanceof se)We.warn(n.message);else{const e=Ct.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});We.warn(e.message)}}}function Ft(e){return"".concat(e.name,"!").concat(e.options.appId)}class Ut{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Vt(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=qt();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}catch(n){We.warn(n)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=qt(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),zt(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),zt(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=Y(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return We.warn(t),""}}}function qt(){return(new Date).toISOString().substring(0,10)}class Vt{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!ie()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Dt()).transaction(Lt),n=await t.objectStore(Lt).get(Ft(e));return await t.done,n}catch(t){if(t instanceof se)We.warn(t.message);else{const e=Ct.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});We.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return jt(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return jt(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function zt(e){return Y(JSON.stringify({version:2,heartbeats:e})).length}var Bt;Bt="",Nt(new ge("platform-logger",e=>new Be(e),"PRIVATE")),Nt(new ge("heartbeat",e=>new Ut(e),"PRIVATE")),Ot(He,Ge,Bt),Ot(He,Ge,"esm2017"),Ot("fire-js","");var Ht,Gt,Wt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Kt={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,o=0;o<t;){if(0==s)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(i[s++]=e.charCodeAt(o++),s==this.blockSize){n(this,i),s=0;break}}else for(;o<t;)if(i[s++]=e[o++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function s(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],0>e?-1:0)}):new r([0|e],0>e?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return a;if(0>e)return h(o(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var a=s(0),l=s(1),c=s(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(a,a);if(d(e))return t=g(h(e),t),new m(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new m(h(t.g),t.h);if(30<e.g.length){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=y(n),r=y(r);var i=v(n,1),s=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=s.add(r);0>=c.l(e)&&(i=i.add(n),s=c),r=v(r,1),n=v(n,1)}return t=f(e,i.j(t)),new m(i,t)}for(i=a;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(s=o(n)).j(t);d(c)||0<c.l(e);)c=(s=o(n-=r)).j(t);u(s)&&(s=l),i=i.add(s),e=f(e,c)}return new m(i,e)}function y(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,s=[],o=0;o<i;o++)s[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);for(var t=o(Math.pow(e,6)),n=this,r="";;){var i=g(n,t).g,s=((0<(n=f(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,s=0;s<=t;s++){var o=i+(65535&this.i(s))+(65535&e.i(s)),a=(o>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=a>>>16,o&=65535,a&=65535,n[s]=a<<16|o}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return a;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(0>this.l(c)&&0>e.l(c))return o(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var l=this.i(i)>>>16,f=65535&this.i(i),m=e.i(s)>>>16,g=65535&e.i(s);n[2*i+2*s]+=f*g,p(n,2*i+2*s),n[2*i+2*s+1]+=l*g,p(n,2*i+2*s+1),n[2*i+2*s+1]+=f*m,p(n,2*i+2*s+1),n[2*i+2*s+2]+=l*m,p(n,2*i+2*s+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,Gt=Kt.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=o,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=o(Math.pow(n,8)),i=a,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),c=parseInt(t.substring(s,s+l),n);8>l?(l=o(Math.pow(n,l)),i=i.j(l).add(o(c))):i=(i=i.j(r)).add(o(c))}return i},Ht=Kt.Integer=r}).apply("undefined"!==typeof Wt?Wt:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var Yt,Qt,Xt,Jt,$t,Zt,en,tn,nn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},rn={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof nn&&nn];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in i))break e;i=i[o]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,function(e,t){return t})}});var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function h(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var y=-1!=m().indexOf("Gecko")&&!(-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge"))&&!(-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE"))&&-1==m().indexOf("Edge");function v(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function b(e){const t={};for(const n in e)t[n]=e[n];return t}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<w.length;t++)n=w[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function x(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function E(e){i.setTimeout(()=>{throw e},0)}function _(){var e=k;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var N=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new T,e=>e.reset());class T{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let S,C=!1,k=new class{constructor(){this.h=this.g=null}add(e,t){const n=N.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},A=()=>{const e=i.Promise.resolve(void 0);S=()=>{e.then(R)}};var R=()=>{for(var e;e=_();){try{e.h.call(e.g)}catch(n){E(n)}var t=N;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}C=!1};function P(){this.s=this.s,this.C=this.C}function O(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}P.prototype.s=!1,P.prototype.ma=function(){this.s||(this.s=!0,this.N())},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},O.prototype.h=function(){this.defaultPrevented=!0};var L=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function M(e,t){if(O.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{g(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:D[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&M.aa.h.call(this)}}d(M,O);var D={2:"touch",3:"pen",4:"mouse"};M.prototype.h=function(){M.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var j="closure_listenable_"+(1e6*Math.random()|0),F=0;function U(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++F,this.da=this.fa=!1}function q(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function V(e){this.src=e,this.g={},this.h=0}function z(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(q(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function B(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}V.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=B(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new U(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var H="closure_lm_"+(1e6*Math.random()|0),G={};function W(e,t,n,r,i){if(r&&r.once)return Y(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)W(e,t[s],n,r,i);return null}return n=te(n),e&&e[j]?e.K(t,n,o(r)?!!r.capture:!!r,i):K(e,t,n,!1,r,i)}function K(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var a=o(i)?!!i.capture:!!i,l=Z(e);if(l||(e[H]=l=new V(e)),(n=l.add(t,n,r,a,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=$;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)L||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(J(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Y(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Y(e,t[s],n,r,i);return null}return n=te(n),e&&e[j]?e.L(t,n,o(r)?!!r.capture:!!r,i):K(e,t,n,!0,r,i)}function Q(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Q(e,t[s],n,r,i);else r=o(r)?!!r.capture:!!r,n=te(n),e&&e[j]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=B(s=e.g[t],n,r,i))&&(q(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=B(t,n,r,i)),(n=-1<e?t[e]:null)&&X(n))}function X(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[j])z(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(J(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(z(n,e),0==n.h&&(n.src=null,t[H]=null)):q(e)}}}function J(e){return e in G?G[e]:G[e]="on"+e}function $(e,t){if(e.da)e=!0;else{t=new M(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&X(e),e=n.call(r,t)}return e}function Z(e){return(e=e[H])instanceof V?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){P.call(this),this.i=new V(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new O(t,e);else if(t instanceof O)t.target=t.target||e;else{var i=t;I(t=new O(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=ie(o,r,!0,t)&&i}if(i=ie(o=t.g=e,r,!0,t)&&i,i=ie(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ie(o=t.g=n[s],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.da&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.fa&&z(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}function se(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function oe(e){e.g=se(()=>{e.g=null,e.i&&(e.i=!1,oe(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(ne,P),ne.prototype[j]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Q(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)q(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ae extends P{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:oe(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){P.call(this),this.h=e,this.g={}}d(le,P);var ce=[];function ue(e){v(e.g,function(e,t){this.g.hasOwnProperty(t)&&X(e)},e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var de=i.JSON.stringify,he=i.JSON.parse,fe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function pe(){}function me(e){return e.h||(e.h=e.i())}function ge(){}pe.prototype.h=null;var ye={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ve(){O.call(this,"d")}function be(){O.call(this,"c")}d(ve,O),d(be,O);var we={},Ie=null;function xe(){return Ie=Ie||new ne}function Ee(e){O.call(this,we.La,e)}function _e(e){const t=xe();re(t,new Ee(t))}function Ne(e,t){O.call(this,we.STAT_EVENT,e),this.stat=t}function Te(e){const t=xe();re(t,new Ne(t,e))}function Se(e,t){O.call(this,we.Ma,e),this.size=t}function Ce(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout(function(){e()},t)}function ke(){this.g=!0}function Ae(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return de(n)}catch(a){return t}}(e,n)+(r?" "+r:"")})}we.La="serverreachability",d(Ee,O),we.STAT_EVENT="statevent",d(Ne,O),we.Ma="timingevent",d(Se,O),ke.prototype.xa=function(){this.g=!1},ke.prototype.info=function(){};var Re,Pe={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Oe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Le(){}function Me(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new De}function De(){this.i=null,this.g="",this.h=!1}d(Le,pe),Le.prototype.g=function(){return new XMLHttpRequest},Le.prototype.i=function(){return{}},Re=new Le;var je={},Fe={};function Ue(e,t,n){e.L=1,e.v=dt(ot(t)),e.m=n,e.P=!0,qe(e,null)}function qe(e,t){e.F=Date.now(),Be(e),e.A=ot(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Nt(n.i,"t",r),e.C=0,n=e.j.J,e.h=new De,e.g=Nn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ae(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ce[0]=i.toString()),i=ce);for(var s=0;s<i.length;s++){var o=W(n,i[s],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?b(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),_e(),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");o=2<=d.length&&"type"==d[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o})}(e.i,e.u,e.A,e.l,e.R,e.m)}function Ve(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function ze(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Fe:(n=Number(t.substring(n,r)),isNaN(n)?je:(r+=1)+n>t.length?Fe:(t=t.slice(r,r+n),e.C=r+n,t))}function Be(e){e.S=Date.now()+e.I,He(e,e.I)}function He(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ce(c(e.ba,e),t)}function Ge(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function We(e){0==e.j.G||e.J||wn(e.j,e)}function Ke(e){Ge(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Ye(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;bn(n),cn(n)}gn(n),Te(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ce(c(n.Za,n),6e3));if(1>=$e(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else xn(n,11)}else if((e.K||n.g==e)&&bn(n),!p(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(et(s,s.h),s.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=e;if((r=n).qa=_n(r,r.J?r.ia:null,r.W),o.K){tt(r.h,o);var a=o,l=r.L;l&&(a.I=l),a.B&&(Ge(a),Be(a)),r.g=o}else mn(r);0<n.i.length&&dn(n)}else"stop"!=c[0]&&"close"!=c[0]||xn(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?xn(n,7):an(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}_e()}catch(u){}}Me.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Gt(e)?t.j():this.Y(e)},Me.prototype.Y=function(e){try{if(e==this.g)e:{const h=Gt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||Wt(this.g)))){this.J||4!=h||7==t||_e(),Ge(this);var n=this.g.Z();this.X=n;t:if(Ve(this)){var r=Wt(this.g);e="";var s=r.length,o=4==Gt(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ke(this),We(this);var a="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(o&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o})}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Te(12),Ke(this),We(this);break e}Ae(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ye(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=ze(this,a),e==Fe){4==h&&(this.s=4,Te(14),n=!1),Ae(this.i,this.l,null,"[Incomplete Response]");break}if(e==je){this.s=4,Te(15),Ae(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}Ae(this.i,this.l,e,null),Ye(this,e)}if(Ve(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=a.length||this.h.h||(this.s=1,Te(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),yn(d),d.M=!0,Te(11))}}else Ae(this.i,this.l,a,"[Invalid Chunked Response]"),Ke(this),We(this)}else Ae(this.i,this.l,a,null),Ye(this,a);4==h&&Ke(this),this.o&&!this.J&&(4==h?wn(this.j,this):(this.o=!1,Be(this)))}else(function(e){const t={};e=(e.g&&2<=Gt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=x(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,Te(12)):(this.s=0,Te(13)),Ke(this),We(this)}}}catch(sn){}},Me.prototype.cancel=function(){this.J=!0,Ke(this)},Me.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(_e(),Te(17)),Ke(this),this.s=2,We(this)):He(this,this.S-e)};var Qe=class{constructor(e,t){this.g=e,this.map=t}};function Xe(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Je(e){return!!e.h||!!e.g&&e.g.size>=e.j}function $e(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return h(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(s(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}Xe.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function st(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof st){this.h=e.h,at(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new It;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,at(this,t[1]||"",!0),this.o=ht(t[2]||""),this.g=ht(t[3]||"",!0),lt(this,t[4]),this.l=ht(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=ht(t[7]||"")):(this.h=!1,this.i=new It(null,this.h))}function ot(e){return new st(e)}function at(e,t,n){e.j=n?ht(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof It?(e.i=t,function(e,t){t&&!e.j&&(xt(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Et(this,t),Nt(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,bt)),e.i=new It(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function dt(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ht(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,pt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function pt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}st.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,gt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,gt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?vt:yt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,wt)),e.join("")};var mt,gt=/[#\/\?@]/g,yt=/[#\?:]/g,vt=/[#\?]/g,bt=/[#\?@]/g,wt=/#/g;function It(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function xt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Et(e,t){xt(e),t=Tt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function _t(e,t){return xt(e),t=Tt(e,t),e.g.has(t)}function Nt(e,t,n){Et(e,t),0<n.length&&(e.i=null,e.g.set(Tt(e,t),h(n)),e.h+=n.length)}function Tt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function St(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function Ct(){this.g=new fe}function kt(e,t,n){const r=n||"";try{rt(e,function(e,n){let i=e;o(e)&&(i=de(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function At(e){this.l=e.Ub||null,this.j=e.eb||!1}function Rt(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Pt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Ot(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Lt(e)}function Lt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Mt(e){let t="";return v(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Dt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Mt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function jt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=It.prototype).add=function(e,t){xt(this),this.i=null,e=Tt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){xt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){xt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){xt(this);let t=[];if("string"===typeof e)_t(this,e)&&(t=t.concat(this.g.get(Tt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return xt(this),this.i=null,_t(this,e=Tt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.V(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")},d(At,pe),At.prototype.g=function(){return new Rt(this.l,this.j)},At.prototype.i=(mt={},function(){return mt}),d(Rt,ne),(e=Rt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Lt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ot(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Lt(this)),this.g&&(this.readyState=3,Lt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Pt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ot(this):Lt(this),3==this.readyState&&Pt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Ot(this))},e.Qa=function(e){this.g&&(this.response=e,Ot(this))},e.ga=function(){this.g&&Ot(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Rt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(jt,ne);var Ft=/^https?$/i,Ut=["POST","PUT"];function qt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Vt(e),Bt(e)}function Vt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function zt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=Gt(e)||2!=e.Z()))if(e.u&&4==Gt(e))se(e.Ea,0,e);else if(re(e,"readystatechange"),4==Gt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var o=String(e.D).match(it)[1]||null;!o&&i.self&&i.self.location&&(o=i.self.location.protocol.slice(0,-1)),s=!Ft.test(o?o.toLowerCase():"")}n=s}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var a=2<Gt(e)?e.g.statusText:""}catch(l){a=""}e.l=a+" ["+e.Z()+"]",Vt(e)}}finally{Bt(e)}}}function Bt(e,t){if(e.g){Ht(e);const r=e.g,i=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function Ht(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function Gt(e){return e.g?e.g.readyState:0}function Wt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(ln){return null}}function Kt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function on(e){this.Aa=0,this.i=[],this.j=new ke,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Kt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Kt("baseRetryDelayMs",5e3,e),this.cb=Kt("retryDelaySeedMs",1e4,e),this.Wa=Kt("forwardChannelMaxRetries",2,e),this.wa=Kt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Xe(e&&e.concurrentRequestLimit),this.Da=new Ct,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function an(e){if(un(e),3==e.G){var t=e.U++,n=ot(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),fn(e,n),(t=new Me(e,e.j,t)).L=2,t.v=dt(ot(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=Nn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),Be(t)}En(e)}function cn(e){e.g&&(yn(e),e.g.cancel(),e.g=null)}function un(e){cn(e),e.u&&(i.clearTimeout(e.u),e.u=null),bn(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function dn(e){if(!Je(e.h)&&!e.s){e.s=!0;var t=e.Ga;S||A(),C||(S(),C=!0),k.add(t,e),e.B=0}}function hn(e,t){var n;n=t?t.l:e.U++;const r=ot(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),fn(e,r),e.m&&e.o&&Dt(r,e.m,e.o),n=new Me(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=pn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Ue(n,r,t)}function fn(e,t){e.H&&v(e.H,function(e,n){ut(t,n,e)}),e.l&&rt({},function(e,n){ut(t,n,e)})}function pn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{kt(a,e,"req"+n+"_")}catch(sn){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function mn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;S||A(),C||(S(),C=!0),k.add(t,e),e.v=0}}function gn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ce(c(e.Fa,e),In(e,e.v)),e.v++,!0)}function yn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function vn(e){e.g=new Me(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=ot(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),fn(e,t),e.m&&e.o&&Dt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=dt(ot(t)),n.m=null,n.P=!0,qe(n,e)}function bn(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function wn(e,t){var n=null;if(e.g==t){bn(e),yn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=xe(),new Se(r,n)),dn(e)}else mn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!($e(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Ce(c(e.Ga,e,t),In(e,e.B)),e.B++,!0))}(e,t)||2==r&&gn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:xn(e,5);break;case 4:xn(e,10);break;case 3:xn(e,6);break;default:xn(e,2)}}function In(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function xn(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new st(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||at(r,"https"),dt(r),t?function(e,t){const n=new ke;if(i.Image){const r=new Image;r.onload=u(St,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(St,n,"TestLoadImage: error",!1,t,r),r.onabort=u(St,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(St,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new ke;const n=new AbortController,r=setTimeout(()=>{n.abort(),St(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?St(0,0,!0,t):St(0,0,!1,t)}).catch(()=>{clearTimeout(r),St(0,0,!1,t)})}(r.toString(),n)}else Te(2);e.G=0,e.l&&e.l.sa(t),En(e),un(e)}function En(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function _n(e,t,n){var r=n instanceof st?ot(n):new st(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var o=new st(null);r&&at(o,r),t&&(o.g=t),s&&lt(o,s),n&&(o.l=n),r=o}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),fn(e,r),r}function Nn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new jt(new At({eb:n})):new jt(e.pa)).Ha(e.J),t}function Tn(){}function Sn(){}function Cn(e,t){ne.call(this),this.g=new on(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Rn(this)}function kn(e){ve.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function An(){be.call(this),this.status=1}function Rn(e){this.g=e}(e=jt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Re.g(),this.v=this.o?me(this.o):me(Re),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(o){return void qt(this,o)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Ut,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,a]of n)this.g.setRequestHeader(i,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ht(this),this.u=!0,this.g.send(e),this.u=!1}catch(o){qt(this,o)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),Bt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bt(this,!0)),jt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?zt(this):this.bb())},e.bb=function(){zt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Gt(this)?this.g.status:-1}catch(mt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(mt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),he(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=on.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Te(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=_n(this,null,this.W),dn(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Me(this,this.j,e);let s=this.o;if(this.S&&(s?(s=b(s),I(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=pn(this,i,t),ut(n=ot(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),fn(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Mt(s)))+"&"+t:this.m&&Dt(n,this.m,s)),et(this.h,i),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),i.T=!0,Ue(i,n,null)):Ue(i,n,t),this.G=2}}else 3==this.G&&(e?hn(this,e):0==this.i.length||Je(this.h)||hn(this))},e.Fa=function(){if(this.u=null,vn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ce(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Te(10),cn(this),vn(this))},e.Za=function(){null!=this.C&&(this.C=null,cn(this),gn(this),Te(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Te(2)):(this.j.info("Failed to ping google.com"),Te(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=Tn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},Sn.prototype.g=function(e,t){return new Cn(e,t)},d(Cn,ne),Cn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Cn.prototype.close=function(){an(this.g)},Cn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=de(e),e=n);t.i.push(new Qe(t.Ya++,e)),3==t.G&&dn(t)},Cn.prototype.N=function(){this.g.l=null,delete this.j,an(this.g),delete this.g,Cn.aa.N.call(this)},d(kn,ve),d(An,be),d(Rn,Tn),Rn.prototype.ua=function(){re(this.g,"a")},Rn.prototype.ta=function(e){re(this.g,new kn(e))},Rn.prototype.sa=function(e){re(this.g,new An)},Rn.prototype.ra=function(){re(this.g,"b")},Sn.prototype.createWebChannel=Sn.prototype.g,Cn.prototype.send=Cn.prototype.o,Cn.prototype.open=Cn.prototype.m,Cn.prototype.close=Cn.prototype.close,tn=rn.createWebChannelTransport=function(){return new Sn},en=rn.getStatEventTarget=function(){return xe()},Zt=rn.Event=we,$t=rn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Pe.NO_ERROR=0,Pe.TIMEOUT=8,Pe.HTTP_ERROR=6,Jt=rn.ErrorCode=Pe,Oe.COMPLETE="complete",Xt=rn.EventType=Oe,ge.EventType=ye,ye.OPEN="a",ye.CLOSE="b",ye.ERROR="c",ye.MESSAGE="d",ne.prototype.listen=ne.prototype.K,Qt=rn.WebChannel=ge,rn.FetchXmlHttpFactory=At,jt.prototype.listenOnce=jt.prototype.L,jt.prototype.getLastError=jt.prototype.Ka,jt.prototype.getLastErrorCode=jt.prototype.Ba,jt.prototype.getStatus=jt.prototype.Z,jt.prototype.getResponseJson=jt.prototype.Oa,jt.prototype.getResponseText=jt.prototype.oa,jt.prototype.send=jt.prototype.ea,jt.prototype.setWithCredentials=jt.prototype.Ha,Yt=rn.XhrIo=jt}).apply("undefined"!==typeof nn?nn:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const sn="@firebase/firestore";class on{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}on.UNAUTHENTICATED=new on(null),on.GOOGLE_CREDENTIALS=new on("google-credentials-uid"),on.FIRST_PARTY=new on("first-party-uid"),on.MOCK_USER=new on("mock-user");let an="10.14.0";const ln=new Te("@firebase/firestore");function cn(){return ln.logLevel}function un(e){if(ln.logLevel<=Ie.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(fn);ln.debug("Firestore (".concat(an,"): ").concat(e),...i)}}function dn(e){if(ln.logLevel<=Ie.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(fn);ln.error("Firestore (".concat(an,"): ").concat(e),...i)}}function hn(e){if(ln.logLevel<=Ie.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(fn);ln.warn("Firestore (".concat(an,"): ").concat(e),...i)}}function fn(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function pn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(an,") INTERNAL ASSERTION FAILED: ")+e;throw dn(t),new Error(t)}function mn(e,t){e||pn()}function gn(e,t){return e}const yn={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class vn extends se{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class bn{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class wn{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class In{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(on.UNAUTHENTICATED))}shutdown(){}}class xn{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class En{constructor(e){this.t=e,this.currentUser=on.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){mn(void 0===this.o);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new bn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new bn,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},o=e=>{un("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(e=>o(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(un("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new bn)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(un("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(mn("string"==typeof t.accessToken),new wn(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return mn(null===e||"string"==typeof e),new on(e)}}class _n{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=on.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Nn{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new _n(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(on.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Tn{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Sn{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){mn(void 0===this.o);const n=e=>{null!=e.error&&un("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,un("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{un("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):un("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(mn("string"==typeof e.token),this.R=e.token,new Tn(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Cn(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class kn{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=Cn(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function An(e,t){return e<t?-1:e>t?1:0}function Rn(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}class Pn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new vn(yn.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new vn(yn.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new vn(yn.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new vn(yn.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Pn.fromMillis(Date.now())}static fromDate(e){return Pn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Pn(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?An(this.nanoseconds,e.nanoseconds):An(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class On{constructor(e){this.timestamp=e}static fromTimestamp(e){return new On(e)}static min(){return new On(new Pn(0,0))}static max(){return new On(new Pn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ln{constructor(e,t,n){void 0===t?t=0:t>e.length&&pn(),void 0===n?n=e.length-t:n>e.length-t&&pn(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Ln.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ln?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Mn extends Ln{construct(e,t,n){return new Mn(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new vn(yn.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter(e=>e.length>0))}return new Mn(e)}static emptyPath(){return new Mn([])}}const Dn=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class jn extends Ln{construct(e,t,n){return new jn(e,t,n)}static isValidIdentifier(e){return Dn.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),jn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new jn(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new vn(yn.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new vn(yn.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new vn(yn.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new vn(yn.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new jn(t)}static emptyPath(){return new jn([])}}class Fn{constructor(e){this.path=e}static fromPath(e){return new Fn(Mn.fromString(e))}static fromName(e){return new Fn(Mn.fromString(e).popFirst(5))}static empty(){return new Fn(Mn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Mn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Mn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Fn(new Mn(e.slice()))}}class Un{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}Un.UNKNOWN_ID=-1;function qn(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=On.fromTimestamp(1e9===r?new Pn(n+1,0):new Pn(n,r));return new zn(i,Fn.empty(),t)}function Vn(e){return new zn(e.readTime,e.key,-1)}class zn{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new zn(On.min(),Fn.empty(),-1)}static max(){return new zn(On.max(),Fn.empty(),-1)}}function Bn(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Fn.comparator(e.documentKey,t.documentKey),0!==n?n:An(e.largestBatchId,t.largestBatchId))}const Hn="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Gn{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function Wn(e){if(e.code!==yn.FAILED_PRECONDITION||e.message!==Hn)throw e;un("LocalStore","Unexpectedly lost primary lease")}class Kn{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&pn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Kn((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Kn?t:Kn.resolve(t)}catch(e){return Kn.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Kn.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Kn.reject(t)}static resolve(e){return new Kn((t,n)=>{t(e)})}static reject(e){return new Kn((t,n)=>{n(e)})}static waitFor(e){return new Kn((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=Kn.resolve(!1);for(const n of e)t=t.next(e=>e?Kn.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new Kn((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next(e=>{s[l]=e,++o,o===i&&n(s)},e=>r(e))}})}static doWhile(e,t){return new Kn((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function Yn(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Qn(e){return"IndexedDbTransactionError"===e.name}class Xn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function Jn(e){return null==e}function $n(e){return 0===e&&1/e==-1/0}function Zn(e){return"number"==typeof e&&Number.isInteger(e)&&!$n(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}Xn.oe=-1;const er=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],tr=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],nr=tr,rr=[...nr,"indexConfiguration","indexState","indexEntries"];function ir(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function sr(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function or(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class ar{constructor(e,t){this.comparator=e,this.root=t||cr.EMPTY}insert(e,t){return new ar(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,cr.BLACK,null,null))}remove(e){return new ar(this.comparator,this.root.remove(e,this.comparator).copy(null,null,cr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new lr(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new lr(this.root,e,this.comparator,!1)}getReverseIterator(){return new lr(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new lr(this.root,e,this.comparator,!0)}}class lr{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class cr{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:cr.RED,this.left=null!=r?r:cr.EMPTY,this.right=null!=i?i:cr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new cr(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return cr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return cr.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,cr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,cr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw pn();if(this.right.isRed())throw pn();const e=this.left.check();if(e!==this.right.check())throw pn();return e+(this.isRed()?0:1)}}cr.EMPTY=null,cr.RED=!0,cr.BLACK=!1,cr.EMPTY=new class{constructor(){this.size=0}get key(){throw pn()}get value(){throw pn()}get color(){throw pn()}get left(){throw pn()}get right(){throw pn()}copy(e,t,n,r,i){return this}insert(e,t,n){return new cr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ur{constructor(e){this.comparator=e,this.data=new ar(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new dr(this.data.getIterator())}getIteratorFrom(e){return new dr(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof ur))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ur(this.comparator);return t.data=e,t}}class dr{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class hr{constructor(e){this.fields=e,e.sort(jn.comparator)}static empty(){return new hr([])}unionWith(e){let t=new ur(jn.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new hr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Rn(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class fr extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class pr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new fr("Invalid base64 string: "+e):e}}(e);return new pr(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new pr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return An(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pr.EMPTY_BYTE_STRING=new pr("");const mr=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gr(e){if(mn(!!e),"string"==typeof e){let t=0;const n=mr.exec(e);if(mn(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:yr(e.seconds),nanos:yr(e.nanos)}}function yr(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function vr(e){return"string"==typeof e?pr.fromBase64String(e):pr.fromUint8Array(e)}function br(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function wr(e){const t=e.mapValue.fields.__previous_value__;return br(t)?wr(t):t}function Ir(e){const t=gr(e.mapValue.fields.__local_write_time__.timestampValue);return new Pn(t.seconds,t.nanos)}class xr{constructor(e,t,n,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class Er{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Er("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Er&&e.projectId===this.projectId&&e.database===this.database}}const _r={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Nr(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?br(e)?4:Vr(e)?9007199254740991:Ur(e)?10:11:pn()}function Tr(e,t){if(e===t)return!0;const n=Nr(e);if(n!==Nr(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Ir(e).isEqual(Ir(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=gr(e.timestampValue),r=gr(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return vr(e.bytesValue).isEqual(vr(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return yr(e.geoPointValue.latitude)===yr(t.geoPointValue.latitude)&&yr(e.geoPointValue.longitude)===yr(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return yr(e.integerValue)===yr(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=yr(e.doubleValue),r=yr(t.doubleValue);return n===r?$n(n)===$n(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Rn(e.arrayValue.values||[],t.arrayValue.values||[],Tr);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(ir(n)!==ir(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Tr(n[i],r[i])))return!1;return!0}(e,t);default:return pn()}}function Sr(e,t){return void 0!==(e.values||[]).find(e=>Tr(e,t))}function Cr(e,t){if(e===t)return 0;const n=Nr(e),r=Nr(t);if(n!==r)return An(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return An(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=yr(e.integerValue||e.doubleValue),r=yr(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return kr(e.timestampValue,t.timestampValue);case 4:return kr(Ir(e),Ir(t));case 5:return An(e.stringValue,t.stringValue);case 6:return function(e,t){const n=vr(e),r=vr(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=An(n[i],r[i]);if(0!==e)return e}return An(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=An(yr(e.latitude),yr(t.latitude));return 0!==n?n:An(yr(e.longitude),yr(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Ar(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,s;const o=e.fields||{},a=t.fields||{},l=null===(n=o.value)||void 0===n?void 0:n.arrayValue,c=null===(r=a.value)||void 0===r?void 0:r.arrayValue,u=An((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(s=null==c?void 0:c.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:Ar(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===_r.mapValue&&t===_r.mapValue)return 0;if(e===_r.mapValue)return 1;if(t===_r.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=An(r[o],s[o]);if(0!==e)return e;const t=Cr(n[r[o]],i[s[o]]);if(0!==t)return t}return An(r.length,s.length)}(e.mapValue,t.mapValue);default:throw pn()}}function kr(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return An(e,t);const n=gr(e),r=gr(t),i=An(n.seconds,r.seconds);return 0!==i?i:An(n.nanos,r.nanos)}function Ar(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Cr(n[i],r[i]);if(e)return e}return An(n.length,r.length)}function Rr(e){return Pr(e)}function Pr(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=gr(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return vr(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Fn.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Pr(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(Pr(e.fields[i]));return n+"}"}(e.mapValue):pn()}function Or(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Lr(e){return!!e&&"integerValue"in e}function Mr(e){return!!e&&"arrayValue"in e}function Dr(e){return!!e&&"nullValue"in e}function jr(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Fr(e){return!!e&&"mapValue"in e}function Ur(e){var t,n;return"__vector__"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function qr(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return sr(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=qr(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=qr(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Vr(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class zr{constructor(e){this.value=e}static empty(){return new zr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Fr(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=qr(t)}setAll(e){let t=jn.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=qr(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Fr(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Tr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Fr(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){sr(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new zr(qr(this.value))}}function Br(e){const t=[];return sr(e.fields,(e,n)=>{const r=new jn([e]);if(Fr(n)){const e=Br(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new hr(t)}class Hr{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Hr(e,0,On.min(),On.min(),On.min(),zr.empty(),0)}static newFoundDocument(e,t,n,r){return new Hr(e,1,t,On.min(),n,r,0)}static newNoDocument(e,t){return new Hr(e,2,t,On.min(),On.min(),zr.empty(),0)}static newUnknownDocument(e,t){return new Hr(e,3,t,On.min(),On.min(),zr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(On.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=On.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Hr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Hr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Gr{constructor(e,t){this.position=e,this.inclusive=t}}function Wr(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?Fn.comparator(Fn.fromName(o.referenceValue),n.key):Cr(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Kr(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Tr(e.position[n],t.position[n]))return!1;return!0}class Yr{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Qr(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Xr{}class Jr extends Xr{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new si(e,t,n):"array-contains"===t?new ci(e,n):"in"===t?new ui(e,n):"not-in"===t?new di(e,n):"array-contains-any"===t?new hi(e,n):new Jr(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new oi(e,n):new ai(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Cr(t,this.value)):null!==t&&Nr(this.value)===Nr(t)&&this.matchesComparison(Cr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return pn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class $r extends Xr{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new $r(e,t)}matches(e){return Zr(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Zr(e){return"and"===e.op}function ei(e){return ti(e)&&Zr(e)}function ti(e){for(const t of e.filters)if(t instanceof $r)return!1;return!0}function ni(e){if(e instanceof Jr)return e.field.canonicalString()+e.op.toString()+Rr(e.value);if(ei(e))return e.filters.map(e=>ni(e)).join(",");{const t=e.filters.map(e=>ni(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function ri(e,t){return e instanceof Jr?function(e,t){return t instanceof Jr&&e.op===t.op&&e.field.isEqual(t.field)&&Tr(e.value,t.value)}(e,t):e instanceof $r?function(e,t){return t instanceof $r&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&ri(n,t.filters[r]),!0)}(e,t):void pn()}function ii(e){return e instanceof Jr?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Rr(e.value))}(e):e instanceof $r?function(e){return e.op.toString()+" {"+e.getFilters().map(ii).join(" ,")+"}"}(e):"Filter"}class si extends Jr{constructor(e,t,n){super(e,t,n),this.key=Fn.fromName(n.referenceValue)}matches(e){const t=Fn.comparator(e.key,this.key);return this.matchesComparison(t)}}class oi extends Jr{constructor(e,t){super(e,"in",t),this.keys=li("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class ai extends Jr{constructor(e,t){super(e,"not-in",t),this.keys=li("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function li(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>Fn.fromName(e.referenceValue))}class ci extends Jr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Mr(t)&&Sr(t.arrayValue,this.value)}}class ui extends Jr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Sr(this.value.arrayValue,t)}}class di extends Jr{constructor(e,t){super(e,"not-in",t)}matches(e){if(Sr(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Sr(this.value.arrayValue,t)}}class hi extends Jr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Mr(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Sr(this.value.arrayValue,e))}}class fi{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ue=null}}function pi(e){return new fi(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function mi(e){const t=gn(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>ni(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),Jn(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Rr(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Rr(e)).join(",")),t.ue=e}return t.ue}function gi(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Qr(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!ri(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Kr(e.startAt,t.startAt)&&Kr(e.endAt,t.endAt)}function yi(e){return Fn.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class vi{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function bi(e,t,n,r,i,s,o,a){return new vi(e,t,n,r,i,s,o,a)}function wi(e){return new vi(e)}function Ii(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function xi(e){return null!==e.collectionGroup}function Ei(e){const t=gn(e);if(null===t.ce){t.ce=[];const e=new Set;for(const i of t.explicitOrderBy)t.ce.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new ur(jn.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new Yr(r,n))}),e.has(jn.keyField().canonicalString())||t.ce.push(new Yr(jn.keyField(),n))}return t.ce}function _i(e){const t=gn(e);return t.le||(t.le=Ni(t,Ei(e))),t.le}function Ni(e,t){if("F"===e.limitType)return pi(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new Yr(e.field,t)});const n=e.endAt?new Gr(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Gr(e.startAt.position,e.startAt.inclusive):null;return pi(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Ti(e,t){const n=e.filters.concat([t]);return new vi(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Si(e,t,n){return new vi(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Ci(e,t){return gi(_i(e),_i(t))&&e.limitType===t.limitType}function ki(e){return"".concat(mi(_i(e)),"|lt:").concat(e.limitType)}function Ai(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>ii(e)).join(", "),"]")),Jn(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Rr(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Rr(e)).join(",")),"Target(".concat(t,")")}(_i(e)),"; limitType=").concat(e.limitType,")")}function Ri(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Fn.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Ei(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Wr(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Ei(e),t))&&!(e.endAt&&!function(e,t,n){const r=Wr(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Ei(e),t))}(e,t)}function Pi(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Oi(e){return(t,n)=>{let r=!1;for(const i of Ei(e)){const e=Li(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Li(e,t,n){const r=e.field.isKeyField()?Fn.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Cr(r,i):pn()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return pn()}}class Mi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){sr(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return or(this.inner)}size(){return this.innerSize}}const Di=new ar(Fn.comparator);function ji(){return Di}const Fi=new ar(Fn.comparator);function Ui(){let e=Fi;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function qi(e){let t=Fi;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function Vi(){return Bi()}function zi(){return Bi()}function Bi(){return new Mi(e=>e.toString(),(e,t)=>e.isEqual(t))}const Hi=new ar(Fn.comparator),Gi=new ur(Fn.comparator);function Wi(){let e=Gi;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Ki=new ur(An);function Yi(){return Ki}function Qi(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$n(t)?"-0":t}}function Xi(e){return{integerValue:""+e}}function Ji(e,t){return Zn(t)?Xi(t):Qi(e,t)}class $i{constructor(){this._=void 0}}function Zi(e,t,n){return e instanceof ns?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&br(t)&&(t=wr(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof rs?is(e,t):e instanceof ss?os(e,t):function(e,t){const n=ts(e,t),r=ls(n)+ls(e.Pe);return Lr(n)&&Lr(e.Pe)?Xi(r):Qi(e.serializer,r)}(e,t)}function es(e,t,n){return e instanceof rs?is(e,t):e instanceof ss?os(e,t):n}function ts(e,t){return e instanceof as?function(e){return Lr(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class ns extends $i{}class rs extends $i{constructor(e){super(),this.elements=e}}function is(e,t){const n=cs(t);for(const r of e.elements)n.some(e=>Tr(e,r))||n.push(r);return{arrayValue:{values:n}}}class ss extends $i{constructor(e){super(),this.elements=e}}function os(e,t){let n=cs(t);for(const r of e.elements)n=n.filter(e=>!Tr(e,r));return{arrayValue:{values:n}}}class as extends $i{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function ls(e){return yr(e.integerValue||e.doubleValue)}function cs(e){return Mr(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class us{constructor(e,t){this.field=e,this.transform=t}}class ds{constructor(e,t){this.version=e,this.transformResults=t}}class hs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new hs}static exists(e){return new hs(void 0,e)}static updateTime(e){return new hs(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fs(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class ps{}function ms(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Ns(e.key,hs.none()):new ws(e.key,e.data,hs.none());{const n=e.data,r=zr.empty();let i=new ur(jn.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Is(e.key,r,new hr(i.toArray()),hs.none())}}function gs(e,t,n){e instanceof ws?function(e,t,n){const r=e.value.clone(),i=Es(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Is?function(e,t,n){if(!fs(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Es(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(xs(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function ys(e,t,n,r){return e instanceof ws?function(e,t,n,r){if(!fs(e.precondition,t))return n;const i=e.value.clone(),s=_s(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Is?function(e,t,n,r){if(!fs(e.precondition,t))return n;const i=_s(e.fieldTransforms,r,t),s=t.data;return s.setAll(xs(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return fs(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function vs(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=ts(r.transform,e||null);null!=i&&(null===n&&(n=zr.empty()),n.set(r.field,i))}return n||null}function bs(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Rn(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof rs&&t instanceof rs||e instanceof ss&&t instanceof ss?Rn(e.elements,t.elements,Tr):e instanceof as&&t instanceof as?Tr(e.Pe,t.Pe):e instanceof ns&&t instanceof ns}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class ws extends ps{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Is extends ps{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function xs(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Es(e,t,n){const r=new Map;mn(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,es(o,a,n[i]))}return r}function _s(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Zi(e,s,t))}return r}class Ns extends ps{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ts extends ps{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Ss{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&gs(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=ys(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=ys(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=zi();return this.mutations.forEach(r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=ms(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(On.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Wi())}isEqual(e){return this.batchId===e.batchId&&Rn(this.mutations,e.mutations,(e,t)=>bs(e,t))&&Rn(this.baseMutations,e.baseMutations,(e,t)=>bs(e,t))}}class Cs{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){mn(e.mutations.length===n.length);let r=Hi;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Cs(e,t,n,r)}}class ks{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class As{constructor(e,t){this.count=e,this.unchangedNames=t}}var Rs,Ps;function Os(e){switch(e){default:return pn();case yn.CANCELLED:case yn.UNKNOWN:case yn.DEADLINE_EXCEEDED:case yn.RESOURCE_EXHAUSTED:case yn.INTERNAL:case yn.UNAVAILABLE:case yn.UNAUTHENTICATED:return!1;case yn.INVALID_ARGUMENT:case yn.NOT_FOUND:case yn.ALREADY_EXISTS:case yn.PERMISSION_DENIED:case yn.FAILED_PRECONDITION:case yn.ABORTED:case yn.OUT_OF_RANGE:case yn.UNIMPLEMENTED:case yn.DATA_LOSS:return!0}}function Ls(e){if(void 0===e)return dn("GRPC error has no .code"),yn.UNKNOWN;switch(e){case Rs.OK:return yn.OK;case Rs.CANCELLED:return yn.CANCELLED;case Rs.UNKNOWN:return yn.UNKNOWN;case Rs.DEADLINE_EXCEEDED:return yn.DEADLINE_EXCEEDED;case Rs.RESOURCE_EXHAUSTED:return yn.RESOURCE_EXHAUSTED;case Rs.INTERNAL:return yn.INTERNAL;case Rs.UNAVAILABLE:return yn.UNAVAILABLE;case Rs.UNAUTHENTICATED:return yn.UNAUTHENTICATED;case Rs.INVALID_ARGUMENT:return yn.INVALID_ARGUMENT;case Rs.NOT_FOUND:return yn.NOT_FOUND;case Rs.ALREADY_EXISTS:return yn.ALREADY_EXISTS;case Rs.PERMISSION_DENIED:return yn.PERMISSION_DENIED;case Rs.FAILED_PRECONDITION:return yn.FAILED_PRECONDITION;case Rs.ABORTED:return yn.ABORTED;case Rs.OUT_OF_RANGE:return yn.OUT_OF_RANGE;case Rs.UNIMPLEMENTED:return yn.UNIMPLEMENTED;case Rs.DATA_LOSS:return yn.DATA_LOSS;default:return pn()}}(Ps=Rs||(Rs={}))[Ps.OK=0]="OK",Ps[Ps.CANCELLED=1]="CANCELLED",Ps[Ps.UNKNOWN=2]="UNKNOWN",Ps[Ps.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ps[Ps.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ps[Ps.NOT_FOUND=5]="NOT_FOUND",Ps[Ps.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ps[Ps.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ps[Ps.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ps[Ps.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ps[Ps.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ps[Ps.ABORTED=10]="ABORTED",Ps[Ps.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ps[Ps.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ps[Ps.INTERNAL=13]="INTERNAL",Ps[Ps.UNAVAILABLE=14]="UNAVAILABLE",Ps[Ps.DATA_LOSS=15]="DATA_LOSS";let Ms=null;function Ds(){return new TextEncoder}const js=new Ht([4294967295,4294967295],0);function Fs(e){const t=Ds().encode(e),n=new Gt;return n.update(t),new Uint8Array(n.digest())}function Us(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Ht([n,r],0),new Ht([i,s],0)]}class qs{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Vs("Invalid padding: ".concat(t));if(n<0)throw new Vs("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new Vs("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new Vs("Invalid padding when bitmap length is 0: ".concat(t));this.Ie=8*e.length-t,this.Te=Ht.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(Ht.fromNumber(n)));return 1===r.compare(js)&&(r=new Ht([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=Fs(e),[n,r]=Us(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);if(!this.de(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new qs(i,r,t);return n.forEach(e=>s.insert(e)),s}insert(e){if(0===this.Ie)return;const t=Fs(e),[n,r]=Us(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Vs extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class zs{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Bs.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new zs(On.min(),r,new ar(An),ji(),Wi())}}class Bs{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Bs(n,t,Wi(),Wi(),Wi())}}class Hs{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class Gs{constructor(e,t){this.targetId=e,this.me=t}}class Ws{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:pr.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Ks{constructor(){this.fe=0,this.ge=Xs(),this.pe=pr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Wi(),t=Wi(),n=Wi();return this.ge.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:pn()}}),new Bs(this.pe,this.ye,e,t,n)}Ce(){this.we=!1,this.ge=Xs()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,mn(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Ys{constructor(e){this.Le=e,this.Be=new Map,this.ke=ji(),this.qe=Qs(),this.Qe=new ar(An)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:pn()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((e,n)=>{this.ze(n)&&t(n)})}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const i=r.target;if(yi(i))if(0===n){const e=new Fn(i.path);this.Ue(t,e,Hr.newNoDocument(e,On.min()))}else mn(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),i=n?this.Xe(n,e,r):1;if(0!==i){this.je(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}null==Ms||Ms.et(function(e,t,n,r,i){var s,o,a,l,c,u;const d={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(d.bloomFilter={applied:0===i,hashCount:null!==(s=null==h?void 0:h.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(a=null===(o=null==h?void 0:h.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),d}(r,e.me,this.Le.tt(),n,i))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=vr(n).toUint8Array()}catch(e){if(e instanceof fr)return hn("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new qs(s,r,i)}catch(e){return hn(e instanceof Vs?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Ie?null:o}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.Le.tt(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.Ue(t,n,null),r++)}),r}rt(e){const t=new Map;this.Be.forEach((n,r)=>{const i=this.Je(r);if(i){if(n.current&&yi(i.target)){const t=new Fn(i.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,Hr.newNoDocument(t,e))}n.be&&(t.set(r,n.ve()),n.Ce())}});let n=Wi();this.qe.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.ke.forEach((t,n)=>n.setReadTime(e));const r=new zs(e,t,this.Qe,this.ke,n);return this.ke=ji(),this.qe=Qs(),this.Qe=new ar(An),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Ks,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new ur(An),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||un("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Ks),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Qs(){return new ar(Fn.comparator)}function Xs(){return new ar(Fn.comparator)}const Js={asc:"ASCENDING",desc:"DESCENDING"},$s={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Zs={and:"AND",or:"OR"};class eo{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function to(e,t){return e.useProto3Json||Jn(t)?t:{value:t}}function no(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function ro(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function io(e,t){return no(e,t.toTimestamp())}function so(e){return mn(!!e),On.fromTimestamp(function(e){const t=gr(e);return new Pn(t.seconds,t.nanos)}(e))}function oo(e,t){return ao(e,t).canonicalString()}function ao(e,t){const n=function(e){return new Mn(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function lo(e){const t=Mn.fromString(e);return mn(ko(t)),t}function co(e,t){return oo(e.databaseId,t.path)}function uo(e,t){const n=lo(t);if(n.get(1)!==e.databaseId.projectId)throw new vn(yn.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new vn(yn.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Fn(mo(n))}function ho(e,t){return oo(e.databaseId,t)}function fo(e){const t=lo(e);return 4===t.length?Mn.emptyPath():mo(t)}function po(e){return new Mn(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function mo(e){return mn(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function go(e,t,n){return{name:co(e,t),fields:n.value.mapValue.fields}}function yo(e,t){let n;if(t instanceof ws)n={update:go(e,t.key,t.value)};else if(t instanceof Ns)n={delete:co(e,t.key)};else if(t instanceof Is)n={update:go(e,t.key,t.data),updateMask:Co(t.fieldMask)};else{if(!(t instanceof Ts))return pn();n={verify:co(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof ns)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof rs)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ss)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof as)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw pn()}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:io(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:pn()}(e,t.precondition)),n}function vo(e,t){return{documents:[ho(e,t.path)]}}function bo(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=ho(e,i);const s=function(e){if(0!==e.length)return So($r.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:No(e.field),direction:xo(e.dir)}}(e))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=to(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:i}}function wo(e){let t=fo(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){mn(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Io(e);return t instanceof $r&&ei(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map(e=>function(e){return new Yr(To(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Jn(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Gr(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Gr(n,t)}(n.endAt)),bi(t,i,o,s,a,"F",l,c)}function Io(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=To(e.unaryFilter.field);return Jr.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=To(e.unaryFilter.field);return Jr.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=To(e.unaryFilter.field);return Jr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=To(e.unaryFilter.field);return Jr.create(i,"!=",{nullValue:"NULL_VALUE"});default:return pn()}}(e):void 0!==e.fieldFilter?function(e){return Jr.create(To(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return pn()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return $r.create(e.compositeFilter.filters.map(e=>Io(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return pn()}}(e.compositeFilter.op))}(e):pn()}function xo(e){return Js[e]}function Eo(e){return $s[e]}function _o(e){return Zs[e]}function No(e){return{fieldPath:e.canonicalString()}}function To(e){return jn.fromServerFormat(e.fieldPath)}function So(e){return e instanceof Jr?function(e){if("=="===e.op){if(jr(e.value))return{unaryFilter:{field:No(e.field),op:"IS_NAN"}};if(Dr(e.value))return{unaryFilter:{field:No(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(jr(e.value))return{unaryFilter:{field:No(e.field),op:"IS_NOT_NAN"}};if(Dr(e.value))return{unaryFilter:{field:No(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:No(e.field),op:Eo(e.op),value:e.value}}}(e):e instanceof $r?function(e){const t=e.getFilters().map(e=>So(e));return 1===t.length?t[0]:{compositeFilter:{op:_o(e.op),filters:t}}}(e):pn()}function Co(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function ko(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Ao{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:On.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:On.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:pr.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new Ao(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ao(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ao(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ao(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Ro{constructor(e){this.ct=e}}function Po(e){const t=wo({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Si(t,t.limit,"L"):t}class Oo{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(yr(e.integerValue));else if("doubleValue"in e){const n=yr(e.doubleValue);isNaN(n)?this.dt(t,13):(this.dt(t,15),$n(n)?t.At(0):t.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(t,20),"string"==typeof n&&(n=gr(n)),t.Rt("".concat(n.seconds||"")),t.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(vr(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(t,45),t.At(n.latitude||0),t.At(n.longitude||0)}else"mapValue"in e?Vr(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Ur(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):pn()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const n=e.fields||{};this.dt(t,55);for(const r of Object.keys(n))this.Vt(r,t),this.Tt(n[r],t)}wt(e,t){var n,r;const i=e.fields||{};this.dt(t,53);const s="value",o=(null===(r=null===(n=i[s].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.dt(t,15),t.At(yr(o)),this.Vt(s,t),this.Tt(i[s],t)}bt(e,t){const n=e.values||[];this.dt(t,50);for(const r of n)this.Tt(r,t)}yt(e,t){this.dt(t,37),Fn.fromName(e).path.forEach(e=>{this.dt(t,60),this.Dt(e,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}Oo.vt=new Oo;class Lo{constructor(){this.un=new Mo}addToCollectionParentIndex(e,t){return this.un.add(t),Kn.resolve()}getCollectionParents(e,t){return Kn.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return Kn.resolve()}deleteFieldIndex(e,t){return Kn.resolve()}deleteAllFieldIndexes(e){return Kn.resolve()}createTargetIndexes(e,t){return Kn.resolve()}getDocumentsMatchingTarget(e,t){return Kn.resolve(null)}getIndexType(e,t){return Kn.resolve(0)}getFieldIndexes(e,t){return Kn.resolve([])}getNextCollectionGroupToUpdate(e){return Kn.resolve(null)}getMinOffset(e,t){return Kn.resolve(zn.min())}getMinOffsetFromCollectionGroup(e,t){return Kn.resolve(zn.min())}updateCollectionGroup(e,t,n){return Kn.resolve()}updateIndexEntries(e,t){return Kn.resolve()}}class Mo{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new ur(Mn.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new ur(Mn.comparator)).toArray()}}new Uint8Array(0);class Do{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Do(e,Do.DEFAULT_COLLECTION_PERCENTILE,Do.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Do.DEFAULT_COLLECTION_PERCENTILE=10,Do.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Do.DEFAULT=new Do(41943040,Do.DEFAULT_COLLECTION_PERCENTILE,Do.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Do.DISABLED=new Do(-1,0,0);class jo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new jo(0)}static kn(){return new jo(-1)}}class Fo{constructor(){this.changes=new Mi(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Hr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Kn.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Uo{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class qo{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&ys(n.mutation,e,hr.empty(),Pn.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,Wi()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Wi();const r=Vi();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=Ui();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=Vi();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Wi()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=ji();const s=Bi(),o=Bi();return t.forEach((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Is)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),ys(o.mutation,t,o.mutation.getFieldMask(),Pn.now())):s.set(t.key,hr.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var n;return o.set(e,new Uo(t,null!==(n=s.get(e))&&void 0!==n?n:null))}),o))}recalculateAndSaveOverlays(e,t){const n=Bi();let r=new ar((e,t)=>e-t),i=Wi();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||hr.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||Wi()).add(e);r=r.insert(i.batchId,a)})}).next(()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=zi();l.forEach(e=>{if(!i.has(e)){const r=ms(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return Kn.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Fn.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):xi(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Kn.resolve(Vi());let o=-1,a=i;return s.next(t=>Kn.forEach(t,(t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?Kn.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,a,t,Wi())).next(e=>({batchId:o,changes:qi(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Fn(t)).next(e=>{let t=Ui();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=Ui();return this.indexManager.getCollectionParents(e,i).next(o=>Kn.forEach(o,o=>{const a=function(e,t){return new vi(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Hr.newInvalidDocument(r)))});let n=Ui();return e.forEach((e,r)=>{const s=i.get(e);void 0!==s&&ys(s.mutation,r,hr.empty(),Pn.now()),Ri(t,r)&&(n=n.insert(e,r))}),n})}}class Vo{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return Kn.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:so(e.createTime)}}(t)),Kn.resolve()}getNamedQuery(e,t){return Kn.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(e){return{name:e.name,query:Po(e.bundledQuery),readTime:so(e.readTime)}}(t)),Kn.resolve()}}class zo{constructor(){this.overlays=new ar(Fn.comparator),this.Ir=new Map}getOverlay(e,t){return Kn.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Vi();return Kn.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.ht(e,t,r)}),Kn.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Ir.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.Ir.delete(n)),Kn.resolve()}getOverlaysForCollection(e,t,n){const r=Vi(),i=t.length+1,s=new Fn(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Kn.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new ar((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Vi(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=Vi(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=r)););return Kn.resolve(o)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Ir.get(r.largestBatchId).delete(n.key);this.Ir.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new ks(t,n));let i=this.Ir.get(t);void 0===i&&(i=Wi(),this.Ir.set(t,i)),this.Ir.set(t,i.add(n.key))}}class Bo{constructor(){this.sessionToken=pr.EMPTY_BYTE_STRING}getSessionToken(e){return Kn.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Kn.resolve()}}class Ho{constructor(){this.Tr=new ur(Go.Er),this.dr=new ur(Go.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const n=new Go(e,t);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Vr(new Go(e,t))}mr(e,t){e.forEach(e=>this.removeReference(e,t))}gr(e){const t=new Fn(new Mn([])),n=new Go(t,e),r=new Go(t,e+1),i=[];return this.dr.forEachInRange([n,r],e=>{this.Vr(e),i.push(e.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Fn(new Mn([])),n=new Go(t,e),r=new Go(t,e+1);let i=Wi();return this.dr.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new Go(e,0),n=this.Tr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Go{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Fn.comparator(e.key,t.key)||An(e.wr,t.wr)}static Ar(e,t){return An(e.wr,t.wr)||Fn.comparator(e.key,t.key)}}class Wo{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new ur(Go.Er)}checkEmpty(e){return Kn.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Ss(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.br=this.br.add(new Go(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Kn.resolve(s)}lookupMutationBatch(e,t){return Kn.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.vr(n),i=r<0?0:r;return Kn.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Kn.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return Kn.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Go(t,0),r=new Go(t,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,r],e=>{const t=this.Dr(e.wr);i.push(t)}),Kn.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new ur(An);return t.forEach(e=>{const t=new Go(e,0),r=new Go(e,Number.POSITIVE_INFINITY);this.br.forEachInRange([t,r],e=>{n=n.add(e.wr)})}),Kn.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Fn.isDocumentKey(i)||(i=i.child(""));const s=new Go(new Fn(i),0);let o=new ur(An);return this.br.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.wr)),!0)},s),Kn.resolve(this.Cr(o))}Cr(e){const t=[];return e.forEach(e=>{const n=this.Dr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){mn(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.br;return Kn.forEach(t.mutations,r=>{const i=new Go(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,t){const n=new Go(t,0),r=this.br.firstAfterOrEqual(n);return Kn.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Kn.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Ko{constructor(e){this.Mr=e,this.docs=new ar(Fn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Mr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Kn.resolve(n?n.document.mutableCopy():Hr.newInvalidDocument(t))}getEntries(e,t){let n=ji();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Hr.newInvalidDocument(e))}),Kn.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=ji();const s=t.path,o=new Fn(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Bn(Vn(o),n)<=0||(r.has(o.key)||Ri(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return Kn.resolve(i)}getAllFromCollectionGroup(e,t,n,r){pn()}Or(e,t){return Kn.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Yo(this)}getSize(e){return Kn.resolve(this.size)}}class Yo extends Fo{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(n)}),Kn.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class Qo{constructor(e){this.persistence=e,this.Nr=new Mi(e=>mi(e),gi),this.lastRemoteSnapshotVersion=On.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Ho,this.targetCount=0,this.kr=jo.Bn()}forEachTarget(e,t){return this.Nr.forEach((e,n)=>t(n)),Kn.resolve()}getLastRemoteSnapshotVersion(e){return Kn.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Kn.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Kn.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Lr&&(this.Lr=t),Kn.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new jo(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,Kn.resolve()}updateTargetData(e,t){return this.Kn(t),Kn.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,Kn.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Nr.forEach((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Nr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),Kn.waitFor(i).next(()=>r)}getTargetCount(e){return Kn.resolve(this.targetCount)}getTargetData(e,t){const n=this.Nr.get(t)||null;return Kn.resolve(n)}addMatchingKeys(e,t,n){return this.Br.Rr(t,n),Kn.resolve()}removeMatchingKeys(e,t,n){this.Br.mr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),Kn.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),Kn.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Br.yr(t);return Kn.resolve(n)}containsKey(e,t){return Kn.resolve(this.Br.containsKey(t))}}class Xo{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Xn(0),this.Kr=!1,this.Kr=!0,this.$r=new Bo,this.referenceDelegate=e(this),this.Ur=new Qo(this),this.indexManager=new Lo,this.remoteDocumentCache=function(e){return new Ko(e)}(e=>this.referenceDelegate.Wr(e)),this.serializer=new Ro(t),this.Gr=new Vo(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new zo,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.qr[e.toKey()];return n||(n=new Wo(t,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,n){un("MemoryPersistence","Starting transaction:",e);const r=new Jo(this.Qr.next());return this.referenceDelegate.zr(),n(r).next(e=>this.referenceDelegate.jr(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Hr(e,t){return Kn.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,t)))}}class Jo extends Gn{constructor(e){super(),this.currentSequenceNumber=e}}class $o{constructor(e){this.persistence=e,this.Jr=new Ho,this.Yr=null}static Zr(e){return new $o(e)}get Xr(){if(this.Yr)return this.Yr;throw pn()}addReference(e,t,n){return this.Jr.addReference(n,t),this.Xr.delete(n.toString()),Kn.resolve()}removeReference(e,t,n){return this.Jr.removeReference(n,t),this.Xr.add(n.toString()),Kn.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),Kn.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(e=>this.Xr.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.Xr.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Kn.forEach(this.Xr,n=>{const r=Fn.fromPath(n);return this.ei(e,r).next(e=>{e||t.removeEntry(r,On.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(e=>{e?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return Kn.or([()=>Kn.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class Zo{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.$i=n,this.Ui=r}static Wi(e,t){let n=Wi(),r=Wi();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Zo(e,t.fromCache,n,r)}}class ea{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class ta{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=re()?8:Yn(ne())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.Yi(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.Zi(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new ea;return this.Xi(e,t,n).next(r=>{if(i.result=r,this.zi)return this.es(e,t,n,r.size)})}).next(()=>i.result)}es(e,t,n,r){return n.documentReadCount<this.ji?(cn()<=Ie.DEBUG&&un("QueryEngine","SDK will not create cache indexes for query:",Ai(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Kn.resolve()):(cn()<=Ie.DEBUG&&un("QueryEngine","Query:",Ai(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Hi*r?(cn()<=Ie.DEBUG&&un("QueryEngine","The SDK decides to create cache indexes for query:",Ai(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_i(t))):Kn.resolve())}Yi(e,t){if(Ii(t))return Kn.resolve(null);let n=_i(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Si(t,null,"F"),n=_i(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=Wi(...r);return this.Ji.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.ts(t,r);return this.ns(t,s,i,n.readTime)?this.Yi(e,Si(t,null,"F")):this.rs(e,s,t,n)}))})))}Zi(e,t,n,r){return Ii(t)||r.isEqual(On.min())?Kn.resolve(null):this.Ji.getDocuments(e,n).next(i=>{const s=this.ts(t,i);return this.ns(t,s,n,r)?Kn.resolve(null):(cn()<=Ie.DEBUG&&un("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ai(t)),this.rs(e,s,t,qn(r,-1)).next(e=>e))})}ts(e,t){let n=new ur(Oi(e));return t.forEach((t,r)=>{Ri(e,r)&&(n=n.add(r))}),n}ns(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Xi(e,t,n){return cn()<=Ie.DEBUG&&un("QueryEngine","Using full collection scan to execute query:",Ai(t)),this.Ji.getDocumentsMatchingQuery(e,t,zn.min(),n)}rs(e,t,n,r){return this.Ji.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}class na{constructor(e,t,n,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new ar(An),this._s=new Mi(e=>mi(e),gi),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new qo(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function ra(e,t,n,r){return new na(e,t,n,r)}async function ia(e,t){const n=gn(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.ls(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let o=Wi();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next(e=>({hs:e,removedBatchIds:i,addedBatchIds:s}))})})}function sa(e){const t=gn(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Ur.getLastRemoteSnapshotVersion(e))}function oa(e,t,n){let r=Wi(),i=Wi();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=ji();return n.forEach((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(On.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):un("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)}),{Ps:r,Is:i}})}function aa(e,t){const n=gn(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function la(e,t){const n=gn(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Ur.getTargetData(e,t).next(i=>i?(r=i,Kn.resolve(r)):n.Ur.allocateTargetId(e).next(i=>(r=new Ao(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Ur.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.os.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(e.targetId,e),n._s.set(t,e.targetId)),e})}async function ca(e,t,n){const r=gn(e),i=r.os.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!Qn(e))throw e;un("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.os=r.os.remove(t),r._s.delete(i.target)}function ua(e,t,n){const r=gn(e);let i=On.min(),s=Wi();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=gn(e),i=r._s.get(n);return void 0!==i?Kn.resolve(r.os.get(i)):r.Ur.getTargetData(t,n)}(r,e,_i(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.ss.getDocumentsMatchingQuery(e,t,n?i:On.min(),n?s:Wi())).next(e=>(da(r,Pi(t),e),{documents:e,Ts:s})))}function da(e,t,n){let r=e.us.get(t)||On.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.us.set(t,r)}class ha{constructor(){this.activeTargetIds=Yi()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class fa{constructor(){this.so=new ha,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,n){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new ha,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class pa{_o(e){}shutdown(){}}class ma{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){un("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){un("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let ga=null;function ya(){return null===ga?ga=268435456+Math.round(2147483648*Math.random()):ga++,"0x"+ga.toString(16)}const va={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ba{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const wa="WebChannelConnection";class Ia extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Do=t+"://"+e.host,this.vo="projects/".concat(n,"/databases/").concat(r),this.Co="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get Fo(){return!1}Mo(e,t,n,r,i){const s=ya(),o=this.xo(e,t.toUriEncodedString());un("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(a,r,i),this.No(e,o,a,n).then(t=>(un("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t),t=>{throw hn("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t})}Lo(e,t,n,r,i,s){return this.Mo(e,t,n,r,i)}Oo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+an,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}xo(e,t){const n=va[e];return"".concat(this.Do,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,n,r){const i=ya();return new Promise((s,o)=>{const a=new Yt;a.setWithCredentials(!0),a.listenOnce(Xt.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case Jt.NO_ERROR:const t=a.getResponseJson();un(wa,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case Jt.TIMEOUT:un(wa,"RPC '".concat(e,"' ").concat(i," timed out")),o(new vn(yn.DEADLINE_EXCEEDED,"Request time out"));break;case Jt.HTTP_ERROR:const n=a.getStatus();if(un(wa,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(yn).indexOf(t)>=0?t:yn.UNKNOWN}(t.status);o(new vn(e,t.message))}else o(new vn(yn.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new vn(yn.UNAVAILABLE,"Connection failed."));break;default:pn()}}finally{un(wa,"RPC '".concat(e,"' ").concat(i," completed."))}});const l=JSON.stringify(r);un(wa,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",l,n,15)})}Bo(e,t,n){const r=ya(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=tn(),o=en(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Oo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");un(wa,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),a);const u=s.createWebChannel(c,a);let d=!1,h=!1;const f=new ba({Io:t=>{h?un(wa,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(un(wa,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),un(wa,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},To:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,Qt.EventType.OPEN,()=>{h||(un(wa,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.yo())}),p(u,Qt.EventType.CLOSE,()=>{h||(h=!0,un(wa,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.So())}),p(u,Qt.EventType.ERROR,t=>{h||(h=!0,hn(wa,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.So(new vn(yn.UNAVAILABLE,"The operation could not be completed")))}),p(u,Qt.EventType.MESSAGE,t=>{var n;if(!h){const i=t.data[0];mn(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){un(wa,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=Rs[e];if(void 0!==t)return Ls(t)}(t),i=o.message;void 0===n&&(n=yn.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),h=!0,f.So(new vn(n,i)),u.close()}else un(wa,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.bo(i)}}),p(o,Zt.STAT_EVENT,t=>{t.stat===$t.PROXY?un(wa,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===$t.NOPROXY&&un(wa,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{f.wo()},0),f}}function xa(){return"undefined"!=typeof document?document:null}function Ea(e){return new eo(e,!0)}class _a{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ui=e,this.timerId=t,this.ko=n,this.qo=r,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-n);r>0&&un("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.Ko," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class Na{constructor(e,t,n,r,i,s,o,a){this.ui=e,this.Ho=n,this.Jo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new _a(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,4!==e?this.t_.reset():t&&t.code===yn.RESOURCE_EXHAUSTED?(dn(t.toString()),dn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===yn.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.Yo===t&&this.P_(n,r)},t=>{e(()=>{const e=new vn(yn.UNKNOWN,"Fetching auth token failed: "+t.message);return this.I_(e)})})}P_(e,t){const n=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(e=>{n(()=>this.I_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.e_?this.E_(e):this.onNext(e))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return un("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(un("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ta extends Na{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:pn()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(mn(void 0===t||"string"==typeof t),pr.fromBase64String(t||"")):(mn(void 0===t||t instanceof Buffer||t instanceof Uint8Array),pr.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?yn.UNKNOWN:Ls(e.code);return new vn(t,e.message||"")}(o);n=new Ws(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=uo(e,r.document.name),s=so(r.document.updateTime),o=r.document.createTime?so(r.document.createTime):On.min(),a=new zr({mapValue:{fields:r.document.fields}}),l=Hr.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Hs(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=uo(e,r.document),s=r.readTime?so(r.readTime):On.min(),o=Hr.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Hs([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=uo(e,r.document),s=r.removedTargetIds||[];n=new Hs([],s,i,null)}else{if(!("filter"in t))return pn();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new As(r,i),o=e.targetId;n=new Gs(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return On.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?On.min():t.readTime?so(t.readTime):On.min()}(e);return this.listener.d_(t,n)}A_(e){const t={};t.database=po(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=yi(r)?{documents:vo(e,r)}:{query:bo(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=ro(e,t.resumeToken);const r=to(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(On.min())>0){n.readTime=no(e,t.snapshotVersion.toTimestamp());const r=to(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pn()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.a_(t)}R_(e){const t={};t.database=po(this.serializer),t.removeTarget=e,this.a_(t)}}class Sa extends Na{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return mn(!!e.streamToken),this.lastStreamToken=e.streamToken,mn(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){mn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function(e,t){return e&&e.length>0?(mn(void 0!==t),e.map(e=>function(e,t){let n=e.updateTime?so(e.updateTime):so(t);return n.isEqual(On.min())&&(n=so(t)),new ds(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=so(e.commitTime);return this.listener.g_(n,t)}p_(){const e={};e.database=po(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>yo(this.serializer,e))};this.a_(t)}}class Ca extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new vn(yn.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,n,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[s,o]=i;return this.connection.Mo(e,ao(t,n),r,s,o)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===yn.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new vn(yn.UNKNOWN,e.toString())})}Lo(e,t,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[o,a]=s;return this.connection.Lo(e,ao(t,n),r,o,a,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===yn.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new vn(yn.UNKNOWN,e.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class ka{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.D_?(dn(t),this.D_=!1):un("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class Aa{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(e=>{n.enqueueAndForget(async()=>{Ua(this)&&(un("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=gn(e);t.L_.add(4),await Pa(t),t.q_.set("Unknown"),t.L_.delete(4),await Ra(t)}(this))})}),this.q_=new ka(n,r)}}async function Ra(e){if(Ua(e))for(const t of e.B_)await t(!0)}async function Pa(e){for(const t of e.B_)await t(!1)}function Oa(e,t){const n=gn(e);n.N_.has(t.targetId)||(n.N_.set(t.targetId,t),Fa(n)?ja(n):il(n).r_()&&Ma(n,t))}function La(e,t){const n=gn(e),r=il(n);n.N_.delete(t),r.r_()&&Da(n,t),0===n.N_.size&&(r.r_()?r.o_():Ua(n)&&n.q_.set("Unknown"))}function Ma(e,t){if(e.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(On.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}il(e).A_(t)}function Da(e,t){e.Q_.xe(t),il(e).R_(t)}function ja(e){e.Q_=new Ys({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.N_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),il(e).start(),e.q_.v_()}function Fa(e){return Ua(e)&&!il(e).n_()&&e.N_.size>0}function Ua(e){return 0===gn(e).L_.size}function qa(e){e.Q_=void 0}async function Va(e){e.q_.set("Online")}async function za(e){e.N_.forEach((t,n)=>{Ma(e,t)})}async function Ba(e,t){qa(e),Fa(e)?(e.q_.M_(t),ja(e)):e.q_.set("Unknown")}async function Ha(e,t,n){if(e.q_.set("Online"),t instanceof Ws&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.N_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.N_.delete(r),e.Q_.removeTarget(r))}(e,t)}catch(n){un("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Ga(e,n)}else if(t instanceof Hs?e.Q_.Ke(t):t instanceof Gs?e.Q_.He(t):e.Q_.We(t),!n.isEqual(On.min()))try{const t=await sa(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Q_.rt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.N_.get(r);i&&e.N_.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.N_.get(t);if(!r)return;e.N_.set(t,r.withResumeToken(pr.EMPTY_BYTE_STRING,r.snapshotVersion)),Da(e,t);const i=new Ao(r.target,t,n,r.sequenceNumber);Ma(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){un("RemoteStore","Failed to raise snapshot:",t),await Ga(e,t)}}async function Ga(e,t,n){if(!Qn(t))throw t;e.L_.add(1),await Pa(e),e.q_.set("Offline"),n||(n=()=>sa(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{un("RemoteStore","Retrying IndexedDB access"),await n(),e.L_.delete(1),await Ra(e)})}function Wa(e,t){return t().catch(n=>Ga(e,n,t))}async function Ka(e){const t=gn(e),n=sl(t);let r=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;Ya(t);)try{const e=await aa(t.localStore,r);if(null===e){0===t.O_.length&&n.o_();break}r=e.batchId,Qa(t,e)}catch(e){await Ga(t,e)}Xa(t)&&Ja(t)}function Ya(e){return Ua(e)&&e.O_.length<10}function Qa(e,t){e.O_.push(t);const n=sl(e);n.r_()&&n.V_&&n.m_(t.mutations)}function Xa(e){return Ua(e)&&!sl(e).n_()&&e.O_.length>0}function Ja(e){sl(e).start()}async function $a(e){sl(e).p_()}async function Za(e){const t=sl(e);for(const n of e.O_)t.m_(n.mutations)}async function el(e,t,n){const r=e.O_.shift(),i=Cs.from(r,t,n);await Wa(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await Ka(e)}async function tl(e,t){t&&sl(e).V_&&await async function(e,t){if(function(e){return Os(e)&&e!==yn.ABORTED}(t.code)){const n=e.O_.shift();sl(e).s_(),await Wa(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await Ka(e)}}(e,t),Xa(e)&&Ja(e)}async function nl(e,t){const n=gn(e);n.asyncQueue.verifyOperationInProgress(),un("RemoteStore","RemoteStore received new credentials");const r=Ua(n);n.L_.add(3),await Pa(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.L_.delete(3),await Ra(n)}async function rl(e,t){const n=gn(e);t?(n.L_.delete(2),await Ra(n)):t||(n.L_.add(2),await Pa(n),n.q_.set("Unknown"))}function il(e){return e.K_||(e.K_=function(e,t,n){const r=gn(e);return r.w_(),new Ta(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:Va.bind(null,e),Ro:za.bind(null,e),mo:Ba.bind(null,e),d_:Ha.bind(null,e)}),e.B_.push(async t=>{t?(e.K_.s_(),Fa(e)?ja(e):e.q_.set("Unknown")):(await e.K_.stop(),qa(e))})),e.K_}function sl(e){return e.U_||(e.U_=function(e,t,n){const r=gn(e);return r.w_(),new Sa(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:()=>Promise.resolve(),Ro:$a.bind(null,e),mo:tl.bind(null,e),f_:Za.bind(null,e),g_:el.bind(null,e)}),e.B_.push(async t=>{t?(e.U_.s_(),await Ka(e)):(await e.U_.stop(),e.O_.length>0&&(un("RemoteStore","Stopping write stream with ".concat(e.O_.length," pending writes")),e.O_=[]))})),e.U_}class ol{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new bn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new ol(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new vn(yn.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function al(e,t){if(dn("AsyncQueue","".concat(t,": ").concat(e)),Qn(e))return new vn(yn.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class ll{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Fn.comparator(t.key,n.key):(e,t)=>Fn.comparator(e.key,t.key),this.keyedMap=Ui(),this.sortedSet=new ar(this.comparator)}static emptySet(e){return new ll(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ll))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new ll;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class cl{constructor(){this.W_=new ar(Fn.comparator)}track(e){const t=e.doc.key,n=this.W_.get(t);n?0!==e.type&&3===n.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==n.type?this.W_=this.W_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.W_=this.W_.remove(t):1===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):pn():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,n)=>{e.push(n)}),e}}class ul{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new ul(e,t,ll.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ci(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class dl{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class hl{constructor(){this.queries=fl(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(e,t){const n=gn(e),r=n.queries;n.queries=fl(),r.forEach((e,n)=>{for(const r of n.j_)r.onError(t)})}(this,new vn(yn.ABORTED,"Firestore shutting down"))}}function fl(){return new Mi(e=>ki(e),Ci)}async function pl(e,t){const n=gn(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.H_()&&t.J_()&&(r=2):(s=new dl,r=t.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=al(e,"Initialization of query '".concat(Ai(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,s),s.j_.push(t),t.Z_(n.onlineState),s.z_&&t.X_(s.z_)&&vl(n)}async function ml(e,t){const n=gn(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.j_.indexOf(t);e>=0&&(s.j_.splice(e,1),0===s.j_.length?i=t.J_()?0:1:!s.H_()&&t.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function gl(e,t){const n=gn(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.j_)e.X_(i)&&(r=!0);t.z_=i}}r&&vl(n)}function yl(e,t,n){const r=gn(e),i=r.queries.get(t);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(t)}function vl(e){e.Y_.forEach(e=>{e.next()})}var bl,wl;(wl=bl||(bl={})).ea="default",wl.Cache="cache";class Il{constructor(e,t,n){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new ul(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache)return!0;if(!this.J_())return!0;const n="Offline"!==t;return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}oa(e){e=ul.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==bl.Cache}}class xl{constructor(e){this.key=e}}class El{constructor(e){this.key=e}}class _l{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Wi(),this.mutatedKeys=Wi(),this.Aa=Oi(e),this.Ra=new ll(this.Aa)}get Va(){return this.Ta}ma(e,t){const n=t?t.fa:new cl,r=t?t.Ra:this.Ra;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=Ri(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.ga(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.Aa(u,a)>0||l&&this.Aa(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(s=s.add(u),i=h?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Ra:s,fa:n,ns:o,mutatedKeys:i}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const s=e.fa.G_();s.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pn()}};return n(e)-n(t)}(e.type,t.type)||this.Aa(e.doc,t.doc)),this.pa(n),r=null!=r&&r;const o=t&&!r?this.ya():[],a=0===this.da.size&&this.current&&!r?1:0,l=a!==this.Ea;return this.Ea=a,0!==s.length||l?{snapshot:new ul(this.query,e.Ra,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new cl,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(e=>this.Ta=this.Ta.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ta=this.Ta.delete(e)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Wi(),this.Ra.forEach(e=>{this.Sa(e.key)&&(this.da=this.da.add(e.key))});const t=[];return e.forEach(e=>{this.da.has(e)||t.push(new El(e))}),this.da.forEach(n=>{e.has(n)||t.push(new xl(n))}),t}ba(e){this.Ta=e.Ts,this.da=Wi();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return ul.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class Nl{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Tl{constructor(e){this.key=e,this.va=!1}}class Sl{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new Mi(e=>ki(e),Ci),this.Ma=new Map,this.xa=new Set,this.Oa=new ar(Fn.comparator),this.Na=new Map,this.La=new Ho,this.Ba={},this.ka=new Map,this.qa=jo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}async function Cl(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Ql(e);let i;const s=r.Fa.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await Al(r,t,n,!0),i}async function kl(e,t){const n=Ql(e);await Al(n,t,!0,!1)}async function Al(e,t,n,r){const i=await la(e.localStore,_i(t)),s=i.targetId,o=e.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await Rl(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&Oa(e.remoteStore,i),a}async function Rl(e,t,n,r,i){e.Ka=(t,n,r)=>async function(e,t,n,r){let i=t.view.ma(n);i.ns&&(i=await ua(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ma(n,i)}));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return Bl(e,t.targetId,a.wa),a.snapshot}(e,t,n,r);const s=await ua(e.localStore,t,!0),o=new _l(t,s.Ts),a=o.ma(s.documents),l=Bs.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=o.applyChanges(a,e.isPrimaryClient,l);Bl(e,n,c.wa);const u=new Nl(t,n,o);return e.Fa.set(t,u),e.Ma.has(n)?e.Ma.get(n).push(t):e.Ma.set(n,[t]),c.snapshot}async function Pl(e,t,n){const r=gn(e),i=r.Fa.get(t),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(e=>!Ci(e,t))),void r.Fa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await ca(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&La(r.remoteStore,i.targetId),Vl(r,i.targetId)}).catch(Wn)):(Vl(r,i.targetId),await ca(r.localStore,i.targetId,!0))}async function Ol(e,t){const n=gn(e),r=n.Fa.get(t),i=n.Ma.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),La(n.remoteStore,r.targetId))}async function Ll(e,t){const n=gn(e);try{const e=await function(e,t){const n=gn(e),r=t.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const o=[];t.targetChanges.forEach((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.Ur.removeMatchingKeys(e,s.removedDocuments,a).next(()=>n.Ur.addMatchingKeys(e,s.addedDocuments,a)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(pr.EMPTY_BYTE_STRING,On.min()).withLastLimboFreeSnapshotVersion(On.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,s)&&o.push(n.Ur.updateTargetData(e,c))});let a=ji(),l=Wi();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(oa(e,s,t.documentUpdates).next(e=>{a=e.Ps,l=e.Is})),!r.isEqual(On.min())){const t=n.Ur.getLastRemoteSnapshotVersion(e).next(t=>n.Ur.setTargetsMetadata(e,e.currentSequenceNumber,r));o.push(t)}return Kn.waitFor(o).next(()=>s.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,a,l)).next(()=>a)}).then(e=>(n.os=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Na.get(t);r&&(mn(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.va=!0:e.modifiedDocuments.size>0?mn(r.va):e.removedDocuments.size>0&&(mn(r.va),r.va=!1))}),await Wl(n,e,t)}catch(e){await Wn(e)}}function Ml(e,t,n){const r=gn(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Fa.forEach((n,r)=>{const i=r.view.Z_(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=gn(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.j_)i.Z_(t)&&(r=!0)}),r&&vl(n)}(r.eventManager,t),e.length&&r.Ca.d_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Dl(e,t,n){const r=gn(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Na.get(t),s=i&&i.key;if(s){let e=new ar(Fn.comparator);e=e.insert(s,Hr.newNoDocument(s,On.min()));const n=Wi().add(s),i=new zs(On.min(),new Map,new ar(An),e,n);await Ll(r,i),r.Oa=r.Oa.remove(s),r.Na.delete(t),Gl(r)}else await ca(r.localStore,t,!1).then(()=>Vl(r,t,n)).catch(Wn)}async function jl(e,t){const n=gn(e),r=t.batch.batchId;try{const e=await function(e,t){const n=gn(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=Kn.resolve();return s.forEach(e=>{o=o.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);mn(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),o.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Wi();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);ql(n,r,null),Ul(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Wl(n,e)}catch(e){await Wn(e)}}async function Fl(e,t,n){const r=gn(e);try{const e=await function(e,t){const n=gn(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(mn(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);ql(r,t,n),Ul(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Wl(r,e)}catch(n){await Wn(n)}}function Ul(e,t){(e.ka.get(t)||[]).forEach(e=>{e.resolve()}),e.ka.delete(t)}function ql(e,t,n){const r=gn(e);let i=r.Ba[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Ba[r.currentUser.toKey()]=i}}function Vl(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Ma.get(t))e.Fa.delete(r),n&&e.Ca.$a(r,n);e.Ma.delete(t),e.isPrimaryClient&&e.La.gr(t).forEach(t=>{e.La.containsKey(t)||zl(e,t)})}function zl(e,t){e.xa.delete(t.path.canonicalString());const n=e.Oa.get(t);null!==n&&(La(e.remoteStore,n),e.Oa=e.Oa.remove(t),e.Na.delete(n),Gl(e))}function Bl(e,t,n){for(const r of n)r instanceof xl?(e.La.addReference(r.key,t),Hl(e,r)):r instanceof El?(un("SyncEngine","Document no longer in limbo: "+r.key),e.La.removeReference(r.key,t),e.La.containsKey(r.key)||zl(e,r.key)):pn()}function Hl(e,t){const n=t.key,r=n.path.canonicalString();e.Oa.get(n)||e.xa.has(r)||(un("SyncEngine","New document in limbo: "+n),e.xa.add(r),Gl(e))}function Gl(e){for(;e.xa.size>0&&e.Oa.size<e.maxConcurrentLimboResolutions;){const t=e.xa.values().next().value;e.xa.delete(t);const n=new Fn(Mn.fromString(t)),r=e.qa.next();e.Na.set(r,new Tl(n)),e.Oa=e.Oa.insert(n,r),Oa(e.remoteStore,new Ao(_i(wi(n.path)),r,"TargetPurposeLimboResolution",Xn.oe))}}async function Wl(e,t,n){const r=gn(e),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((e,a)=>{o.push(r.Ka(a,t,n).then(e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(a.targetId,i?"current":"not-current")}if(e){i.push(e);const t=Zo.Wi(a.targetId,e);s.push(t)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(e,t){const n=gn(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Kn.forEach(t,t=>Kn.forEach(t.$i,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>Kn.forEach(t.Ui,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!Qn(e))throw e;un("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.os.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.os=n.os.insert(e,i)}}}(r.localStore,s))}async function Kl(e,t){const n=gn(e);if(!n.currentUser.isEqual(t)){un("SyncEngine","User change. New user:",t.toKey());const e=await ia(n.localStore,t);n.currentUser=t,function(e,t){e.ka.forEach(e=>{e.forEach(e=>{e.reject(new vn(yn.CANCELLED,t))})}),e.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Wl(n,e.hs)}}function Yl(e,t){const n=gn(e),r=n.Na.get(t);if(r&&r.va)return Wi().add(r.key);{let e=Wi();const r=n.Ma.get(t);if(!r)return e;for(const t of r){const r=n.Fa.get(t);e=e.unionWith(r.view.Va)}return e}}function Ql(e){const t=gn(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Ll.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Yl.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Dl.bind(null,t),t.Ca.d_=gl.bind(null,t.eventManager),t.Ca.$a=yl.bind(null,t.eventManager),t}function Xl(e){const t=gn(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=jl.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Fl.bind(null,t),t}class Jl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ea(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return ra(this.persistence,new ta,e.initialUser,this.serializer)}Ga(e){return new Xo($o.Zr,this.serializer)}Wa(e){return new fa}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Jl.provider={build:()=>new Jl};class $l{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Ml(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Kl.bind(null,this.syncEngine),await rl(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new hl}createDatastore(e){const t=Ea(e.databaseInfo.databaseId),n=function(e){return new Ia(e)}(e.databaseInfo);return function(e,t,n,r){return new Ca(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Aa(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>Ml(this.syncEngine,e,0),ma.D()?new ma:new pa)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new Sl(e,t,n,r,i,s);return o&&(a.Qa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=gn(e);un("RemoteStore","RemoteStore shutting down."),t.L_.add(5),await Pa(t),t.k_.shutdown(),t.q_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}$l.provider={build:()=>new $l};class Zl{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):dn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class ec{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=on.UNAUTHENTICATED,this.clientId=kn.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{un("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(un("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new bn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=al(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function tc(e,t){e.asyncQueue.verifyOperationInProgress(),un("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await ia(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function nc(e,t){e.asyncQueue.verifyOperationInProgress();const n=await rc(e);un("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>nl(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>nl(t.remoteStore,n)),e._onlineComponents=t}async function rc(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){un("FirestoreClient","Using user provided OfflineComponentProvider");try{await tc(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===yn.FAILED_PRECONDITION||e.code===yn.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;hn("Error using user provided cache. Falling back to memory cache: "+n),await tc(e,new Jl)}}else un("FirestoreClient","Using default OfflineComponentProvider"),await tc(e,new Jl);return e._offlineComponents}async function ic(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(un("FirestoreClient","Using user provided OnlineComponentProvider"),await nc(e,e._uninitializedComponentsProvider._online)):(un("FirestoreClient","Using default OnlineComponentProvider"),await nc(e,new $l))),e._onlineComponents}function sc(e){return ic(e).then(e=>e.syncEngine)}async function oc(e){const t=await ic(e),n=t.eventManager;return n.onListen=Cl.bind(null,t.syncEngine),n.onUnlisten=Pl.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=kl.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Ol.bind(null,t.syncEngine),n}function ac(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new bn;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new Zl({next:n=>{s.Za(),t.enqueueAndForget(()=>ml(e,o)),n.fromCache&&"server"===r.source?i.reject(new vn(yn.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new Il(n,s,{includeMetadataChanges:!0,_a:!0});return pl(e,o)}(await oc(e),e.asyncQueue,t,n,r)),r.promise}function lc(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const cc=new Map;function uc(e,t,n){if(!n)throw new vn(yn.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function dc(e){if(!Fn.isDocumentKey(e))throw new vn(yn.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function hc(e){if(Fn.isDocumentKey(e))throw new vn(yn.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function fc(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":pn()}function pc(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new vn(yn.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=fc(e);throw new vn(yn.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function mc(e,t){if(t<=0)throw new vn(yn.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class gc{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new vn(yn.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new vn(yn.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new vn(yn.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=lc(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new vn(yn.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new vn(yn.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new vn(yn.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class yc{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gc({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new vn(yn.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new vn(yn.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gc(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new In;switch(e.type){case"firstParty":return new Nn(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new vn(yn.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=cc.get(e);t&&(un("ComponentProvider","Removing Datastore"),cc.delete(e),t.terminate())}(this),Promise.resolve()}}function vc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=pc(e,yc))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==o&&hn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=on.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Y(JSON.stringify({alg:"none",type:"JWT"})),Y(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new vn(yn.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new on(s)}e._authCredentials=new xn(new wn(t,n))}}class bc{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new bc(this.firestore,e,this._query)}}class wc{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ic(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wc(this.firestore,e,this._key)}}class Ic extends bc{constructor(e,t,n){super(e,t,wi(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wc(this.firestore,null,new Fn(e))}withConverter(e){return new Ic(this.firestore,e,this._path)}}function xc(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=me(e),uc("collection","path",t),e instanceof yc){const n=Mn.fromString(t,...r);return hc(n),new Ic(e,null,n)}{if(!(e instanceof wc||e instanceof Ic))throw new vn(yn.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Mn.fromString(t,...r));return hc(n),new Ic(e.firestore,null,n)}}function Ec(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=me(e),1===arguments.length&&(t=kn.newId()),uc("doc","path",t),e instanceof yc){const n=Mn.fromString(t,...r);return dc(n),new wc(e,null,new Fn(n))}{if(!(e instanceof wc||e instanceof Ic))throw new vn(yn.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Mn.fromString(t,...r));return dc(n),new wc(e.firestore,e instanceof Ic?e.converter:null,new Fn(n))}}class _c{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new _a(this,"async_queue_retry"),this.Vu=()=>{const e=xa();e&&un("AsyncQueue","Visibility state changed to "+e.visibilityState),this.t_.jo()},this.mu=e;const t=xa();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=xa();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new bn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(0!==this.Pu.length){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Qn(e))throw e;un("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(e=>{this.Eu=e,this.du=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw dn("INTERNAL UNHANDLED ERROR: ",t),e}).then(e=>(this.du=!1,e))));return this.mu=t,t}enqueueAfterDelay(e,t,n){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const r=ol.createAndSchedule(this,e,t,n,e=>this.yu(e));return this.Tu.push(r),r}fu(){this.Eu&&pn()}verifyOperationInProgress(){}async wu(){let e;do{e=this.mu,await e}while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function Nc(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Tc extends yc{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new _c,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new _c(e),this._firestoreClient=void 0,await e}}}function Sc(e){if(e._terminated)throw new vn(yn.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Cc(e),e._firestoreClient}function Cc(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new xr(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,lc(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new ec(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class kc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new kc(pr.fromBase64String(e))}catch(e){throw new vn(yn.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new kc(pr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ac{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new vn(yn.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new jn(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Rc{constructor(e){this._methodName=e}}class Pc{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new vn(yn.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new vn(yn.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return An(this._lat,e._lat)||An(this._long,e._long)}}class Oc{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const Lc=/^__.*__$/;class Mc{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Is(e,this.data,this.fieldMask,t,this.fieldTransforms):new ws(e,this.data,t,this.fieldTransforms)}}class Dc{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Is(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function jc(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pn()}}class Fc{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Fc(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.Ou(e),r}Nu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return eu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(jc(this.Cu)&&Lc.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Uc{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Ea(e)}Qu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Fc({Cu:e,methodName:t,qu:n,path:jn.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function qc(e){const t=e._freezeSettings(),n=Ea(e._databaseId);return new Uc(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Vc(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Qu(s.merge||s.mergeFields?2:0,t,n,i);Xc("Data must be an object, but it was:",o,r);const a=Yc(r,o);let l,c;if(s.merge)l=new hr(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Jc(t,r,n);if(!o.contains(i))throw new vn(yn.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));tu(e,i)||e.push(i)}l=new hr(e),c=o.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=o.fieldTransforms;return new Mc(new zr(a),l,c)}class zc extends Rc{_toFieldTransform(e){if(2!==e.Cu)throw 1===e.Cu?e.Bu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Bu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zc}}class Bc extends Rc{_toFieldTransform(e){return new us(e.path,new ns)}isEqual(e){return e instanceof Bc}}function Hc(e,t,n,r){const i=e.Qu(1,t,n);Xc("Data must be an object, but it was:",i,r);const s=[],o=zr.empty();sr(r,(e,r)=>{const a=Zc(t,e,n);r=me(r);const l=i.Nu(a);if(r instanceof zc)s.push(a);else{const e=Kc(r,l);null!=e&&(s.push(a),o.set(a,e))}});const a=new hr(s);return new Dc(o,a,i.fieldTransforms)}function Gc(e,t,n,r,i,s){const o=e.Qu(1,t,n),a=[Jc(t,r,n)],l=[i];if(s.length%2!=0)throw new vn(yn.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let h=0;h<s.length;h+=2)a.push(Jc(t,s[h])),l.push(s[h+1]);const c=[],u=zr.empty();for(let h=a.length-1;h>=0;--h)if(!tu(c,a[h])){const e=a[h];let t=l[h];t=me(t);const n=o.Nu(e);if(t instanceof zc)c.push(e);else{const r=Kc(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new hr(c);return new Dc(u,d,o.fieldTransforms)}function Wc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Kc(n,e.Qu(r?4:3,t))}function Kc(e,t){if(Qc(e=me(e)))return Xc("Unsupported field value:",t,e),Yc(e,t);if(e instanceof Rc)return function(e,t){if(!jc(t.Cu))throw t.Bu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Bu("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xu&&4!==t.Cu)throw t.Bu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Kc(i,t.Lu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=me(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Ji(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Pn.fromDate(e);return{timestampValue:no(t.serializer,n)}}if(e instanceof Pn){const n=new Pn(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:no(t.serializer,n)}}if(e instanceof Pc)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof kc)return{bytesValue:ro(t.serializer,e._byteString)};if(e instanceof wc){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Bu("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:oo(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Oc)return function(e,t){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Bu("VectorValues must only contain numeric values.");return Qi(t.serializer,e)})}}}}}}(e,t);throw t.Bu("Unsupported field value: ".concat(fc(e)))}(e,t)}function Yc(e,t){const n={};return or(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):sr(e,(e,r)=>{const i=Kc(r,t.Mu(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function Qc(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Pn||e instanceof Pc||e instanceof kc||e instanceof wc||e instanceof Rc||e instanceof Oc)}function Xc(e,t,n){if(!Qc(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=fc(n);throw"an object"===r?t.Bu(e+" a custom object"):t.Bu(e+" "+r)}}function Jc(e,t,n){if((t=me(t))instanceof Ac)return t._internalPath;if("string"==typeof t)return Zc(e,t);throw eu("Field path arguments must be of type string or ",e,!1,void 0,n)}const $c=new RegExp("[~\\*/\\[\\]]");function Zc(e,t,n){if(t.search($c)>=0)throw eu("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Ac(...t.split("."))._internalPath}catch(r){throw eu("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function eu(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(r)),o&&(l+=" in document ".concat(i)),l+=")"),new vn(yn.INVALID_ARGUMENT,a+e+l)}function tu(e,t){return e.some(e=>e.isEqual(t))}class nu{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new wc(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new ru(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(iu("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class ru extends nu{data(){return super.data()}}function iu(e,t){return"string"==typeof t?Zc(e,t):t instanceof Ac?t._internalPath:t._delegate._internalPath}function su(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new vn(yn.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ou{}class au extends ou{}function lu(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof ou&&n.push(t),n=n.concat(i),function(e){const t=e.filter(e=>e instanceof uu).length,n=e.filter(e=>e instanceof cu).length;if(t>1||t>0&&n>0)throw new vn(yn.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class cu extends au{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new cu(e,t,n)}_apply(e){const t=this._parse(e);return gu(e._query,t),new bc(e.firestore,e.converter,Ti(e._query,t))}_parse(e){const t=qc(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new vn(yn.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){mu(o,s);const t=[];for(const n of o)t.push(pu(r,e,n));a={arrayValue:{values:t}}}else a=pu(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||mu(o,s),a=Wc(n,t,o,"in"===s||"not-in"===s);return Jr.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class uu extends ou{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new uu(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:$r.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)gu(n,i),n=Ti(n,i)}(e._query,t),new bc(e.firestore,e.converter,Ti(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class du extends au{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new du(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new vn(yn.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new vn(yn.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Yr(t,n)}(e._query,this._field,this._direction);return new bc(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new vi(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function hu(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=iu("orderBy",e);return du._create(n,t)}class fu extends au{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new fu(e,t,n)}_apply(e){return new bc(e.firestore,e.converter,Si(e._query,this._limit,this._limitType))}}function pu(e,t,n){if("string"==typeof(n=me(n))){if(""===n)throw new vn(yn.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xi(t)&&-1!==n.indexOf("/"))throw new vn(yn.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(Mn.fromString(n));if(!Fn.isDocumentKey(r))throw new vn(yn.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Or(e,new Fn(r))}if(n instanceof wc)return Or(e,n._key);throw new vn(yn.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(fc(n),"."))}function mu(e,t){if(!Array.isArray(e)||0===e.length)throw new vn(yn.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function gu(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new vn(yn.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new vn(yn.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class yu{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Nr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(vr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw pn()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return sr(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t,n,r;const i=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map(e=>yr(e.doubleValue));return new Oc(i)}convertGeoPoint(e){return new Pc(yr(e.latitude),yr(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=wr(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Ir(e));default:return null}}convertTimestamp(e){const t=gr(e);return new Pn(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Mn.fromString(e);mn(ko(n));const r=new Er(n.get(1),n.get(3)),i=new Fn(n.popFirst(5));return r.isEqual(t)||dn("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function vu(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class bu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class wu extends nu{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Iu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(iu("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Iu extends wu{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class xu{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new bu(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Iu(this._firestore,this._userDataWriter,n.key,n,new bu(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new vn(yn.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new Iu(e._firestore,e._userDataWriter,n.doc.key,n.doc,new bu(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new Iu(e._firestore,e._userDataWriter,t.doc.key,t.doc,new bu(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Eu(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Eu(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pn()}}class _u extends yu{constructor(e){super(),this.firestore=e}convertBytes(e){return new kc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new wc(this.firestore,null,t)}}function Nu(e){e=pc(e,bc);const t=pc(e.firestore,Tc),n=Sc(t),r=new _u(t);return su(e._query),ac(n,e._query).then(n=>new xu(t,r,e,n))}function Tu(e,t){const n=pc(e.firestore,Tc),r=Ec(e),i=vu(e.converter,t);return Su(n,[Vc(qc(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,hs.exists(!1))]).then(()=>r)}function Su(e,t){return function(e,t){const n=new bn;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=Xl(e);try{const e=await function(e,t){const n=gn(e),r=Pn.now(),i=t.reduce((e,t)=>e.add(t.key),Wi());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let a=ji(),l=Wi();return n.cs.getEntries(e,i).next(e=>{a=e,a.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,a)).next(i=>{s=i;const o=[];for(const e of t){const t=vs(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Is(e.key,t,Br(t.value.mapValue),hs.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)}).next(t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:o.batchId,changes:qi(s)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Ba[e.currentUser.toKey()];r||(r=new ar(An)),r=r.insert(t,n),e.Ba[e.currentUser.toKey()]=r}(r,e.batchId,n),await Wl(r,e.changes),await Ka(r.remoteStore)}catch(e){const t=al(e,"Failed to persist write");n.reject(t)}}(await sc(e),t,n)),n.promise}(Sc(e),t)}function Cu(e,t,n){const r=n.docs.get(t._key),i=new _u(e);return new wu(e,i,t._key,r,new bu(n.hasPendingWrites,n.fromCache),t.converter)}function ku(){return new Bc("serverTimestamp")}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){an=e}(At),Nt(new ge("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new Tc(new En(e.getProvider("auth-internal")),new Sn(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new vn(yn.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Er(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),Ot(sn,"4.7.3",e),Ot(sn,"4.7.3","esm2017")}();function Au(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function Ru(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Pu=Ru,Ou=new oe("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Lu=new Te("@firebase/auth");function Mu(e){if(Lu.logLevel<=Ie.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Lu.error("Auth (".concat(At,"): ").concat(e),...n)}}function Du(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw qu(e,...n)}function ju(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return qu(e,...n)}function Fu(e,t,n){const r=Object.assign(Object.assign({},Pu()),{[t]:n});return new oe("auth","Firebase",r).create(t,{appName:e.name})}function Uu(e){return Fu(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function qu(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Ou.create(e,...n)}function Vu(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw qu(t,...r)}}function zu(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Mu(t),new Error(t)}function Bu(e,t){e||zu(t)}function Hu(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Gu(){return"http:"===Wu()||"https:"===Wu()}function Wu(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Ku(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Gu()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class Yu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Bu(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ne())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return Ku()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Qu(e,t){Bu(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class Xu{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void zu("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void zu("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void zu("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ju={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},$u=new Yu(3e4,6e4);function Zu(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function ed(e,t,n,r){return td(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=ue(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:a},i);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),Xu.fetch()(rd(e,e.config.apiHost,n,o),l)})}async function td(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Ju),t);try{const t=new sd(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw od(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw od(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw od(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw od(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw Fu(e,a,o);Du(e,a)}}catch(i){if(i instanceof se)throw i;Du(e,"network-request-failed",{message:String(i)})}}async function nd(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await ed(e,t,n,r,i);return"mfaPendingCredential"in s&&Du(e,"multi-factor-auth-required",{_serverResponse:s}),s}function rd(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Qu(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function id(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class sd{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(ju(this.auth,"network-request-failed")),$u.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function od(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=ju(e,t,r);return i.customData._tokenResponse=n,i}function ad(e){return void 0!==e&&void 0!==e.enterprise}class ld{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return id(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function cd(e,t){return ed(e,"GET","/v2/recaptchaConfig",Zu(e,t))}async function ud(e,t){return ed(e,"POST","/v1/accounts:lookup",t)}function dd(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function hd(e){return 1e3*Number(e)}function fd(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Mu("JWT malformed, contained fewer than 3 sections"),null;try{const e=Q(n);return e?JSON.parse(e):(Mu("Failed to decode base64 JWT payload"),null)}catch(i){return Mu("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}function pd(e){const t=fd(e);return Vu(t,"internal-error"),Vu("undefined"!==typeof t.exp,"internal-error"),Vu("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function md(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof se&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class gd{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class yd{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=dd(this.lastLoginAt),this.creationTime=dd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function vd(e){var t;const n=e.auth,r=await e.getIdToken(),i=await md(e,ud(n,{idToken:r}));Vu(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?bd(s.providerUserInfo):[],a=(l=e.providerData,c=o,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),h=!!u&&d,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new yd(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(e,f)}function bd(e){return e.map(e=>{var{providerId:t}=e,n=Au(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class wd{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Vu(e.idToken,"internal-error"),Vu("undefined"!==typeof e.idToken,"internal-error"),Vu("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):pd(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Vu(0!==e.length,"internal-error");const t=pd(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Vu(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await td(e,{},async()=>{const n=ue({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=rd(e,r,"/v1/token","key=".concat(i)),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Xu.fetch()(s,{method:"POST",headers:o,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new wd;return n&&(Vu("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(Vu("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(Vu("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new wd,this.toJSON())}_performRefresh(){return zu("not implemented")}}function Id(e,t){Vu("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class xd{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=Au(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new gd(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new yd(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await md(this,this.stsTokenManager.getToken(this.auth,e));return Vu(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=me(e),r=await n.getIdToken(t),i=fd(r);Vu(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:dd(hd(i.auth_time)),issuedAtTime:dd(hd(i.iat)),expirationTime:dd(hd(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=me(e);await vd(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Vu(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new xd(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Vu(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await vd(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(St(this.auth.app))return Promise.reject(Uu(this.auth));const e=await this.getIdToken();return await md(this,async function(e,t){return ed(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:b,isAnonymous:w,providerData:I,stsTokenManager:x}=t;Vu(v&&x,e,"internal-error");const E=wd.fromJSON(this.name,x);Vu("string"===typeof v,e,"internal-error"),Id(u,e.name),Id(d,e.name),Vu("boolean"===typeof b,e,"internal-error"),Vu("boolean"===typeof w,e,"internal-error"),Id(h,e.name),Id(f,e.name),Id(p,e.name),Id(m,e.name),Id(g,e.name),Id(y,e.name);const _=new xd({uid:v,auth:e,email:d,emailVerified:b,displayName:u,isAnonymous:w,photoURL:f,phoneNumber:h,tenantId:p,stsTokenManager:E,createdAt:g,lastLoginAt:y});return I&&Array.isArray(I)&&(_.providerData=I.map(e=>Object.assign({},e))),m&&(_._redirectEventId=m),_}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new wd;r.updateFromServerResponse(t);const i=new xd({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await vd(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Vu(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?bd(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),o=new wd;o.updateFromIdToken(n);const a=new xd({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new yd(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(a,l),a}}const Ed=new Map;function _d(e){Bu(e instanceof Function,"Expected a class definition");let t=Ed.get(e);return t?(Bu(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Ed.set(e,t),t)}class Nd{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Nd.type="NONE";const Td=Nd;function Sd(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Cd{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Sd(this.userKey,r.apiKey,i),this.fullPersistenceKey=Sd("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?xd._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Cd(_d(Td),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||_d(Td);const s=Sd(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){const n=xd._fromJSON(e,t);c!==i&&(o=n),i=c;break}}catch(l){}const a=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch(l){}})),new Cd(i,e,n)):new Cd(i,e,n)}}function kd(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Od(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Ad(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Md(t))return"Blackberry";if(Dd(t))return"Webos";if(Rd(t))return"Safari";if((t.includes("chrome/")||Pd(t))&&!t.includes("edge/"))return"Chrome";if(Ld(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Ad(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne();return/firefox\//i.test(e)}function Rd(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Pd(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne();return/crios\//i.test(e)}function Od(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne();return/iemobile/i.test(e)}function Ld(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne();return/android/i.test(e)}function Md(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne();return/blackberry/i.test(e)}function Dd(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne();return/webos/i.test(e)}function jd(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Fd(){return function(){const e=ne();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Ud(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne();return jd(e)||Ld(e)||Dd(e)||Md(e)||/windows phone/i.test(e)||Od(e)}function qd(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=kd(ne());break;case"Worker":t="".concat(kd(ne()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(At,"/").concat(r)}class Vd{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(i){r(i)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class zd{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Bd{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Gd(this),this.idTokenSubscription=new Gd(this),this.beforeStateQueue=new Vd(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ou,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=_d(t)),this._initializationPromise=this.queue(async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await Cd.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await ud(this,{idToken:e}),n=await xd._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(St(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Vu(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await vd(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(St(this.app))return Promise.reject(Uu(this));const t=e?me(e):null;return t&&Vu(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Vu(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return St(this.app)?Promise.reject(Uu(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return St(this.app)?Promise.reject(Uu(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_d(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return ed(e,"GET","/v2/passwordPolicy",Zu(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new zd(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new oe("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return ed(e,"POST","/v2/accounts:revokeToken",Zu(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&_d(e)||this._popupRedirectResolver;Vu(t,this,"argument-error"),this.redirectPersistenceManager=await Cd.create(this,[_d(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Vu(o,this,"internal-error"),o.then(()=>{s||i(this.currentUser)}),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Vu(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=qd(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Lu.logLevel<=Ie.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Lu.warn("Auth (".concat(At,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Hd(e){return me(e)}class Gd{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new fe(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return Vu(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Wd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Kd(e){return Wd.loadJS(e)}function Yd(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Qd{constructor(e){this.type="recaptcha-enterprise",this.auth=Hd(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;ad(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n("NO_RECAPTCHA")})}):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{cd(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new ld(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&ad(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Wd.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Kd(t).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function Xd(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new Qd(e);let s;try{s=await i.verify(n)}catch(a){s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Jd(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Xd(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch(async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await Xd(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)})}function $d(e,t,n){const r=Hd(e);Vu(r._canInitEmulator,r,"emulator-config-failed"),Vu(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=Zd(t),{host:o,port:a}=function(e){const t=Zd(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:eh(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:eh(t)}}}(t),l=null===a?"":":".concat(a);r.config.emulator={url:"".concat(s,"//").concat(o).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Zd(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function eh(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class th{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return zu("not implemented")}_getIdTokenResponse(e){return zu("not implemented")}_linkToIdToken(e,t){return zu("not implemented")}_getReauthenticationResolver(e){return zu("not implemented")}}async function nh(e,t){return ed(e,"POST","/v1/accounts:signUp",t)}async function rh(e,t){return nd(e,"POST","/v1/accounts:signInWithPassword",Zu(e,t))}class ih extends th{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new ih(e,t,"password")}static _fromEmailAndCode(e,t){return new ih(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Jd(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",rh);case"emailLink":return async function(e,t){return nd(e,"POST","/v1/accounts:signInWithEmailLink",Zu(e,t))}(e,{email:this._email,oobCode:this._password});default:Du(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Jd(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",nh);case"emailLink":return async function(e,t){return nd(e,"POST","/v1/accounts:signInWithEmailLink",Zu(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Du(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function sh(e,t){return nd(e,"POST","/v1/accounts:signInWithIdp",Zu(e,t))}class oh extends th{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new oh(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Du("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=Au(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new oh(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return sh(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,sh(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,sh(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ue(t)}return e}}const ah={USER_NOT_FOUND:"user-not-found"};class lh extends th{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new lh({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new lh({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return nd(e,"POST","/v1/accounts:signInWithPhoneNumber",Zu(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await nd(e,"POST","/v1/accounts:signInWithPhoneNumber",Zu(e,t));if(n.temporaryProof)throw od(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return nd(e,"POST","/v1/accounts:signInWithPhoneNumber",Zu(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),ah)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new lh({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class ch{constructor(e){var t,n,r,i,s,o;const a=de(he(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);Vu(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=de(he(e)).link,n=t?de(he(t)).deep_link_id:null,r=de(he(e)).deep_link_id;return(r?de(he(r)).link:null)||r||n||t||e}(e);try{return new ch(t)}catch(n){return null}}}class uh{constructor(){this.providerId=uh.PROVIDER_ID}static credential(e,t){return ih._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=ch.parseLink(t);return Vu(n,"argument-error"),ih._fromEmailAndCode(e,n.code,n.tenantId)}}uh.PROVIDER_ID="password",uh.EMAIL_PASSWORD_SIGN_IN_METHOD="password",uh.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class dh{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class hh extends dh{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class fh extends hh{constructor(){super("facebook.com")}static credential(e){return oh._fromParams({providerId:fh.PROVIDER_ID,signInMethod:fh.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fh.credentialFromTaggedObject(e)}static credentialFromError(e){return fh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return fh.credential(t.oauthAccessToken)}catch(n){return null}}}fh.FACEBOOK_SIGN_IN_METHOD="facebook.com",fh.PROVIDER_ID="facebook.com";class ph extends hh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return oh._fromParams({providerId:ph.PROVIDER_ID,signInMethod:ph.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ph.credentialFromTaggedObject(e)}static credentialFromError(e){return ph.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return ph.credential(n,r)}catch(i){return null}}}ph.GOOGLE_SIGN_IN_METHOD="google.com",ph.PROVIDER_ID="google.com";class mh extends hh{constructor(){super("github.com")}static credential(e){return oh._fromParams({providerId:mh.PROVIDER_ID,signInMethod:mh.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mh.credentialFromTaggedObject(e)}static credentialFromError(e){return mh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return mh.credential(t.oauthAccessToken)}catch(n){return null}}}mh.GITHUB_SIGN_IN_METHOD="github.com",mh.PROVIDER_ID="github.com";class gh extends hh{constructor(){super("twitter.com")}static credential(e,t){return oh._fromParams({providerId:gh.PROVIDER_ID,signInMethod:gh.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return gh.credentialFromTaggedObject(e)}static credentialFromError(e){return gh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return gh.credential(n,r)}catch(i){return null}}}async function yh(e,t){return nd(e,"POST","/v1/accounts:signUp",Zu(e,t))}gh.TWITTER_SIGN_IN_METHOD="twitter.com",gh.PROVIDER_ID="twitter.com";class vh{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await xd._fromIdTokenResponse(e,n,r),s=bh(n);return new vh({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=bh(n);return new vh({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function bh(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class wh extends se{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,wh.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new wh(e,t,n,r)}}function Ih(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw wh._fromErrorAndOperation(e,n,t,r);throw n})}async function xh(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await md(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return vh._forOperation(e,"link",r)}async function Eh(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(St(r.app))return Promise.reject(Uu(r));const i="reauthenticate";try{const s=await md(e,Ih(r,i,t,e),n);Vu(s.idToken,r,"internal-error");const o=fd(s.idToken);Vu(o,r,"internal-error");const{sub:a}=o;return Vu(e.uid===a,r,"user-mismatch"),vh._forOperation(e,i,s)}catch(s){throw(null===s||void 0===s?void 0:s.code)==="auth/".concat("user-not-found")&&Du(r,"user-mismatch"),s}}async function _h(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(St(e.app))return Promise.reject(Uu(e));const r="signIn",i=await Ih(e,r,t),s=await vh._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function Nh(e,t){if(St(e.app))return Promise.reject(Uu(e));const n=Hd(e),r=await async function(e,t){return nd(e,"POST","/v1/accounts:signInWithCustomToken",Zu(e,t))}(n,{token:t,returnSecureToken:!0}),i=await vh._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}new WeakMap;const Th="__sak";class Sh{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Th,"1"),this.storage.removeItem(Th),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Ch extends Sh{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ud(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Fd()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ch.type="LOCAL";const kh=Ch;class Ah extends Sh{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Ah.type="SESSION";const Rh=Ah;class Ph{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new Ph(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map(async e=>e(t.origin,i)),a=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Oh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Ph.receivers=[];class Lh{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise((o,a)=>{const l=Oh("",20);r.port1.start();const c=setTimeout(()=>{a(new Error("unsupported_event"))},n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function Mh(){return window}function Dh(){return"undefined"!==typeof Mh().WorkerGlobalScope&&"function"===typeof Mh().importScripts}const jh="firebaseLocalStorageDb",Fh="firebaseLocalStorage",Uh="fbase_key";class qh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Vh(e,t){return e.transaction([Fh],t?"readwrite":"readonly").objectStore(Fh)}function zh(){const e=indexedDB.open(jh,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Fh,{keyPath:Uh})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Fh)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(jh);return new qh(e).toPromise()}(),t(await zh()))})})}async function Bh(e,t,n){const r=Vh(e,!0).put({[Uh]:t,value:n});return new qh(r).toPromise()}function Hh(e,t){const n=Vh(e,!0).delete(t);return new qh(n).toPromise()}class Gh{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await zh()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Dh()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ph._getInstance(Dh()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Lh(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await zh();return await Bh(e,Th,"1"),await Hh(e,Th),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Bh(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=Vh(e,!1).get(t),r=await new qh(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Hh(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=Vh(e,!1).getAll();return new qh(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Gh.type="LOCAL";const Wh=Gh;Yd("rcb"),new Yu(3e4,6e4);const Kh="recaptcha";async function Yh(e,t,n){var r;const i=await n.verify();try{let s;if(Vu("string"===typeof i,e,"argument-error"),Vu(n.type===Kh,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){Vu("enroll"===t.type,e,"internal-error");const n=await function(e,t){return ed(e,"POST","/v2/accounts/mfaEnrollment:start",Zu(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{Vu("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;Vu(n,e,"missing-multi-factor-info");const o=await function(e,t){return ed(e,"POST","/v2/accounts/mfaSignIn:start",Zu(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return ed(e,"POST","/v1/accounts:sendVerificationCode",Zu(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class Qh{constructor(e){this.providerId=Qh.PROVIDER_ID,this.auth=Hd(e)}verifyPhoneNumber(e,t){return Yh(this.auth,e,me(t))}static credential(e,t){return lh._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Qh.credentialFromTaggedObject(t)}static credentialFromError(e){return Qh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?lh._fromTokenResponse(n,r):null}}function Xh(e,t){return t?_d(t):(Vu(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Qh.PROVIDER_ID="phone",Qh.PHONE_SIGN_IN_METHOD="phone";class Jh extends th{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return sh(e,this._buildIdpRequest())}_linkToIdToken(e,t){return sh(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return sh(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function $h(e){return _h(e.auth,new Jh(e),e.bypassAuthState)}function Zh(e){const{auth:t,user:n}=e;return Vu(n,t,"internal-error"),Eh(n,new Jh(e),e.bypassAuthState)}async function ef(e){const{auth:t,user:n}=e;return Vu(n,t,"internal-error"),xh(n,new Jh(e),e.bypassAuthState)}class tf{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $h;case"linkViaPopup":case"linkViaRedirect":return ef;case"reauthViaPopup":case"reauthViaRedirect":return Zh;default:Du(this.auth,"internal-error")}}resolve(e){Bu(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Bu(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const nf=new Yu(2e3,1e4);class rf extends tf{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,rf.currentPopupAction&&rf.currentPopupAction.cancel(),rf.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Vu(e,this.auth,"internal-error"),e}async onExecution(){Bu(1===this.filter.length,"Popup operations only handle one event");const e=Oh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(ju(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(ju(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,rf.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ju(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,nf.get())};e()}}rf.currentPopupAction=null;const sf=new Map;class of extends tf{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=sf.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=cf(t),r=lf(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}sf.set(this.auth._key(),e)}return this.bypassAuthState||sf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function af(e,t){sf.set(e._key(),t)}function lf(e){return _d(e._redirectPersistence)}function cf(e){return Sd("pendingRedirect",e.config.apiKey,e.name)}async function uf(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(St(e.app))return Promise.reject(Uu(e));const r=Hd(e),i=Xh(r,t),s=new of(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}class df{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ff(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!ff(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(ju(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(hf(e))}saveEventToCache(e){this.cachedEventUids.add(hf(e)),this.lastProcessedEventTime=Date.now()}}function hf(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function ff(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const pf=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mf=/^https?/;async function gf(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return ed(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(yf(r))return}catch(n){}Du(e,"unauthorized-domain")}function yf(e){const t=Hu(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!mf.test(n))return!1;if(pf.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const vf=new Yu(3e4,6e4);function bf(){const e=Mh().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function wf(e){return new Promise((t,n)=>{var r,i,s;function o(){bf(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{bf(),n(ju(e,"network-request-failed"))},timeout:vf.get()})}if(null===(i=null===(r=Mh().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Mh().gapi)||void 0===s?void 0:s.load)){const t=Yd("iframefcb");return Mh()[t]=()=>{gapi.load?o():n(ju(e,"network-request-failed"))},Kd("".concat(Wd.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}o()}}).catch(e=>{throw If=null,e})}let If=null;const xf=new Yu(5e3,15e3),Ef={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_f=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Nf(e){const t=e.config;Vu(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Qu(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:At},i=_f.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(ue(r).slice(1))}async function Tf(e){const t=await function(e){return If=If||wf(e),If}(e),n=Mh().gapi;return Vu(n,e,"internal-error"),t.open({where:document.body,url:Nf(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ef,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=ju(e,"network-request-failed"),s=Mh().setTimeout(()=>{r(i)},xf.get());function o(){Mh().clearTimeout(s),n(t)}t.ping(o).then(o,()=>{r(i)})}))}const Sf={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Cf{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function kf(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},Sf),{width:r.toString(),height:i.toString(),top:s,left:o}),c=ne().toLowerCase();n&&(a=Pd(c)?"_blank":n),Ad(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return jd(arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new Cf(null);const d=window.open(t||"",a,u);Vu(d,e,"popup-blocked");try{d.focus()}catch(h){}return new Cf(d)}const Af="__/auth/handler",Rf="emulator/auth/handler",Pf=encodeURIComponent("fac");async function Of(e,t,n,r,i,s){Vu(e.config.authDomain,e,"auth-domain-config-required"),Vu(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:At,eventId:i};if(t instanceof dh){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof hh){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?"#".concat(Pf,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Af);return Qu(t,Rf)}(e),"?").concat(ue(a).slice(1)).concat(c)}const Lf="webStorageSupport";const Mf=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Rh,this._completeRedirectFn=uf,this._overrideRedirectResult=af}async _openPopup(e,t,n,r){var i;Bu(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return kf(e,await Of(e,t,n,Hu(),r),Oh())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Mh().location.href=e}(await Of(e,t,n,Hu(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Bu(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await Tf(e),n=new df(e);return t.register("authEvent",t=>{Vu(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Lf,{type:Lf},n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Lf];void 0!==i&&t(!!i),Du(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=gf(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Ud()||Rd()||jd()}};var Df="@firebase/auth",jf="1.7.9";class Ff{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Vu(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Uf=ee("authIdTokenMaxAge")||300;let qf=null;var Vf;Wd={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=ju("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Vf="Browser",Nt(new ge("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Vu(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:Vf,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qd(Vf)},c=new Bd(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(_d);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Nt(new ge("auth-internal",e=>(e=>new Ff(e))(Hd(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),Ot(Df,jf,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Vf)),Ot(Df,jf,"esm2017");Ot("firebase","10.14.1","app");let zf={apiKey:"AIzaSyCUDuHefWAoVrG6Gf4mDVaxnKuZzkdtBAw",authDomain:"term3-rn.firebaseapp.com",projectId:"term3-rn",storageBucket:"term3-rn.firebasestorage.app",messagingSenderId:"494666669692",appId:"1:494666669692:web:67b5a9b3ad9dd65b7a33f9",measurementId:"G-B13V3P1WEH"};if("undefined"!==typeof window&&window.__firebase_config)try{zf=JSON.parse(window.__firebase_config),console.log("Using injected Firebase config")}catch(xp){console.warn("Failed to parse window.__firebase_config, using default")}const Bf=Rt(zf),Hf=function(e,t){const n="string"==typeof e?e:t||"(default)",r=Tt("object"==typeof e?e:Pt(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=(e=>{const t=$(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&vc(r,...e)}return r}(Bf),Gf=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pt();const t=Tt(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Tt(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(le(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;Du(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Mf,persistence:[Wh,kh,Rh]}),r=ee("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Uf)return;const r=null===t||void 0===t?void 0:t.token;qf!==r&&(qf=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){me(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){me(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var i;const s=$("auth");return s&&$d(n,"http://".concat(s)),n}(Bf),Wf=c(c(c(c(c(c({},{ch18_q01:{concept:"FIRST_LINE_DEFENSE",skill:["DIFFERENTIATION","TEACHING_ERROR"],bloom:"APPLICATION"},ch18_q02:{concept:"IMMUNE_ORGANS",skill:["RECALL"],bloom:"KNOWLEDGE"},ch18_q03:{concept:"LEUKOCYTES",skill:["DIFFERENTIATION","RECALL"],bloom:"KNOWLEDGE"},ch18_q04:{concept:"LEUKOCYTOSIS",skill:["PRIORITY","CLINICAL_REASONING"],bloom:"APPLICATION"},ch18_q05:{concept:"IMMUNITY_TYPES",skill:["DIFFERENTIATION"],bloom:"COMPREHENSION"},ch18_q06:{concept:"AGING_IMMUNE_SYSTEM",skill:["CLINICAL_REASONING"],bloom:"COMPREHENSION"},ch18_q07:{concept:"DIAGNOSTIC_TESTS",skill:["LAB_INTERPRETATION"],bloom:"COMPREHENSION"},ch18_q08:{concept:"IMMUNE_ASSESSMENT",skill:["PRIORITY","CLINICAL_REASONING"],bloom:"APPLICATION"},ch18_q09:{concept:"IMMUNE_ORGANS",skill:["RECALL"],bloom:"KNOWLEDGE"},ch18_q10:{concept:"IMMUNOGLOBULINS",skill:["RECALL"],bloom:"KNOWLEDGE"},ch18_q11:{concept:"IMMUNE_ASSESSMENT",skill:["CLINICAL_REASONING","DIFFERENTIATION"],bloom:"APPLICATION"},ch18_q12:{concept:"DIAGNOSTIC_TESTS",skill:["LAB_INTERPRETATION","DIFFERENTIATION"],bloom:"COMPREHENSION"},ch18_q13:{concept:"IMMUNE_FUNCTION",skill:["RECALL","TEACHING"],bloom:"COMPREHENSION"},ch18_q14:{concept:"LEUKOCYTES",skill:["RECALL"],bloom:"KNOWLEDGE"},ch18_q15:{concept:"INFLAMMATION",skill:["RECALL"],bloom:"KNOWLEDGE"},ch18_q16:{concept:"IMMUNITY_TYPES",skill:["DIFFERENTIATION"],bloom:"COMPREHENSION"},ch18_q17:{concept:"LEUKOCYTES",skill:["PRIORITY","RECALL"],bloom:"COMPREHENSION"},ch18_q18:{concept:"IMMUNE_FUNCTION",skill:["RECALL"],bloom:"KNOWLEDGE"},ch18_q19:{concept:"IMMUNITY_TYPES",skill:["RECALL"],bloom:"COMPREHENSION"},ch18_q20:{concept:"IMMUNE_ASSESSMENT",skill:["CLINICAL_REASONING","PRIORITY"],bloom:"APPLICATION"},ch18_q21:{concept:"DIAGNOSTIC_TESTS",skill:["LAB_INTERPRETATION","PRIORITY"],bloom:"APPLICATION"},ch18_q22:{concept:"LEUKOCYTES",skill:["RECALL"],bloom:"KNOWLEDGE"},ch18_q23:{concept:"DIAGNOSTIC_TESTS",skill:["LAB_INTERPRETATION","DIFFERENTIATION"],bloom:"COMPREHENSION"},ch18_q24:{concept:"IMMUNE_FUNCTION",skill:["RECALL","DIFFERENTIATION"],bloom:"KNOWLEDGE"},ch18_q25:{concept:"LEUKOCYTES",skill:["RECALL"],bloom:"KNOWLEDGE"}}),{ch19_q01:{concept:"HYPERSENSITIVITY",skill:["RECALL"],bloom:"KNOWLEDGE"},ch19_q02:{concept:"LATEX_ALLERGY",skill:["TEACHING","MED_SAFETY"],bloom:"COMPREHENSION"},ch19_q03:{concept:"ANAPHYLAXIS",skill:["PRIORITY","CLINICAL_REASONING"],bloom:"APPLICATION"},ch19_q04:{concept:"TYPE_II",skill:["DIFFERENTIATION"],bloom:"COMPREHENSION"},ch19_q05:{concept:"TYPE_III",skill:["DIFFERENTIATION"],bloom:"COMPREHENSION"},ch19_q06:{concept:"ANAPHYLAXIS",skill:["PRIORITY","MED_SAFETY"],bloom:"APPLICATION"},ch19_q07:{concept:"TYPE_IV",skill:["DIFFERENTIATION"],bloom:"COMPREHENSION"},ch19_q08:{concept:"ANAPHYLAXIS",skill:["PRIORITY","MED_SAFETY"],bloom:"APPLICATION"},ch19_q09:{concept:"AUTOIMMUNITY",skill:["DIFFERENTIATION"],bloom:"COMPREHENSION"},ch19_q10:{concept:"IMMUNODEFICIENCY",skill:["MED_SAFETY","TEACHING_ERROR"],bloom:"APPLICATION"},ch19_q11:{concept:"TYPE_III",skill:["DIFFERENTIATION"],bloom:"COMPREHENSION"},ch19_q12:{concept:"HYPERSENSITIVITY",skill:["CLINICAL_REASONING"],bloom:"APPLICATION"},ch19_q13:{concept:"HYPERSENSITIVITY",skill:["TEACHING","MED_SAFETY"],bloom:"APPLICATION"},ch19_q14:{concept:"TRANSPLANT",skill:["RECALL"],bloom:"KNOWLEDGE"},ch19_q15:{concept:"TYPE_IV",skill:["DIFFERENTIATION"],bloom:"COMPREHENSION"},ch19_q16:{concept:"HYPERSENSITIVITY",skill:["MED_SAFETY"],bloom:"COMPREHENSION"},ch19_q17:{concept:"TYPE_II",skill:["DIFFERENTIATION"],bloom:"COMPREHENSION"},ch19_q18:{concept:"TYPE_IV",skill:["DIFFERENTIATION"],bloom:"COMPREHENSION"},ch19_q19:{concept:"AUTOIMMUNITY",skill:["CLINICAL_REASONING"],bloom:"COMPREHENSION"},ch19_q20:{concept:"ANAPHYLAXIS",skill:["PRIORITY","MED_SAFETY"],bloom:"APPLICATION"},ch19_q21:{concept:"IMMUNOSUPPRESSION",skill:["MED_SAFETY","TEACHING"],bloom:"APPLICATION"},ch19_q22:{concept:"AUTOIMMUNITY",skill:["LAB_INTERPRETATION"],bloom:"COMPREHENSION"},ch19_q23:{concept:"TRANSPLANT",skill:["RECALL"],bloom:"KNOWLEDGE"},ch19_q24:{concept:"HYPERSENSITIVITY",skill:["RECALL"],bloom:"KNOWLEDGE"},ch19_q25:{concept:"LATEX_ALLERGY",skill:["TEACHING","MED_SAFETY"],bloom:"APPLICATION"}}),{ch20_q01:{concept:"OSTEOARTHRITIS",skill:["CLINICAL_REASONING"],bloom:"APPLICATION"},ch20_q02:{concept:"LUPUS",skill:["TEACHING","MED_SAFETY"],bloom:"APPLICATION"},ch20_q03:{concept:"RHEUMATOID_ARTHRITIS",skill:["DIFFERENTIATION"],bloom:"COMPREHENSION"},ch20_q04:{concept:"GOUT",skill:["MED_SAFETY","DIFFERENTIATION"],bloom:"APPLICATION"},ch20_q05:{concept:"SCLERODERMA",skill:["RECALL"],bloom:"KNOWLEDGE"},ch20_q06:{concept:"GOUT",skill:["TEACHING"],bloom:"APPLICATION"},ch20_q07:{concept:"ARTHRITIS_MANAGEMENT",skill:["MED_SAFETY"],bloom:"APPLICATION"},ch20_q08:{concept:"OSTEOARTHRITIS",skill:["DIFFERENTIATION"],bloom:"COMPREHENSION"},ch20_q09:{concept:"FIBROMYALGIA",skill:["DIFFERENTIATION"],bloom:"COMPREHENSION"},ch20_q10:{concept:"SJOGREN",skill:["RECALL"],bloom:"KNOWLEDGE"},ch20_q11:{concept:"LUPUS",skill:["LAB_INTERPRETATION"],bloom:"COMPREHENSION"},ch20_q12:{concept:"SCLERODERMA",skill:["CLINICAL_REASONING"],bloom:"APPLICATION"},ch20_q13:{concept:"OSTEOARTHRITIS",skill:["TEACHING"],bloom:"APPLICATION"},ch20_q14:{concept:"RAYNAUDS",skill:["TEACHING","MED_SAFETY"],bloom:"APPLICATION"},ch20_q15:{concept:"ARTHRITIS_MANAGEMENT",skill:["CLINICAL_REASONING"],bloom:"APPLICATION"},ch20_q16:{concept:"RHEUMATOID_ARTHRITIS",skill:["MED_SAFETY"],bloom:"APPLICATION"},ch20_q17:{concept:"RHEUMATOID_ARTHRITIS",skill:["LAB_INTERPRETATION"],bloom:"COMPREHENSION"},ch20_q18:{concept:"ARTHRITIS_MANAGEMENT",skill:["TEACHING","MED_SAFETY"],bloom:"APPLICATION"},ch20_q19:{concept:"GOUT",skill:["RECALL"],bloom:"KNOWLEDGE"},ch20_q20:{concept:"OSTEOARTHRITIS",skill:["CLINICAL_REASONING"],bloom:"APPLICATION"},ch20_q21:{concept:"GOUT",skill:["MED_SAFETY","TEACHING_ERROR"],bloom:"APPLICATION"},ch20_q22:{concept:"GOUT",skill:["LAB_INTERPRETATION"],bloom:"COMPREHENSION"},ch20_q23:{concept:"OSTEOARTHRITIS",skill:["LAB_INTERPRETATION"],bloom:"COMPREHENSION"},ch20_q24:{concept:"LUPUS",skill:["TEACHING","PRIORITY"],bloom:"APPLICATION"},ch20_q25:{concept:"RHEUMATOID_ARTHRITIS",skill:["MED_SAFETY"],bloom:"APPLICATION"}}),{ch21_q01:{concept:"TRANSMISSION",skill:["DIFFERENTIATION"],bloom:"COMPREHENSION"},ch21_q02:{concept:"TRANSMISSION",skill:["DIFFERENTIATION"],bloom:"COMPREHENSION"},ch21_q03:{concept:"TRANSMISSION",skill:["DIFFERENTIATION"],bloom:"COMPREHENSION"},ch21_q04:{concept:"MRSA",skill:["INFECTION_CONTROL","RECALL"],bloom:"COMPREHENSION"},ch21_q05:{concept:"C_DIFF",skill:["PRIORITY","INFECTION_CONTROL"],bloom:"APPLICATION"},ch21_q06:{concept:"VRE",skill:["DIFFERENTIATION"],bloom:"COMPREHENSION"},ch21_q07:{concept:"MDRO_RISK",skill:["CLINICAL_REASONING"],bloom:"APPLICATION"},ch21_q08:{concept:"ACINETOBACTER",skill:["RECALL"],bloom:"KNOWLEDGE"},ch21_q09:{concept:"ANTIBIOTIC_STEWARDSHIP",skill:["RECALL"],bloom:"COMPREHENSION"},ch21_q10:{concept:"PPE",skill:["SEQUENCING"],bloom:"APPLICATION"},ch21_q11:{concept:"PPE",skill:["SEQUENCING","INFECTION_CONTROL"],bloom:"APPLICATION"},ch21_q12:{concept:"CRE",skill:["RECALL","MED_SAFETY"],bloom:"COMPREHENSION"},ch21_q13:{concept:"ISOLATION",skill:["DIFFERENTIATION"],bloom:"COMPREHENSION"},ch21_q14:{concept:"HAND_HYGIENE",skill:["PRIORITY"],bloom:"APPLICATION"},ch21_q15:{concept:"STANDARD_PRECAUTIONS",skill:["RECALL"],bloom:"COMPREHENSION"},ch21_q16:{concept:"TB",skill:["DIFFERENTIATION","INFECTION_CONTROL"],bloom:"APPLICATION"},ch21_q17:{concept:"PPE",skill:["SEQUENCING"],bloom:"APPLICATION"},ch21_q18:{concept:"DROPLET_PRECAUTIONS",skill:["DIFFERENTIATION"],bloom:"COMPREHENSION"},ch21_q19:{concept:"ESBL",skill:["RECALL","MED_SAFETY"],bloom:"COMPREHENSION"},ch21_q20:{concept:"CONTACT_PRECAUTIONS",skill:["INFECTION_CONTROL"],bloom:"COMPREHENSION"},ch21_q21:{concept:"CRE",skill:["RECALL"],bloom:"KNOWLEDGE"},ch21_q22:{concept:"TB",skill:["INFECTION_CONTROL"],bloom:"APPLICATION"},ch21_q23:{concept:"EXPOSURE_PROTOCOL",skill:["PRIORITY","MED_SAFETY"],bloom:"APPLICATION"},ch21_q24:{concept:"ANTIBIOTIC_RESISTANCE",skill:["RECALL"],bloom:"COMPREHENSION"},ch21_q25:{concept:"PROTECTIVE_ENVIRONMENT",skill:["DIFFERENTIATION","CLINICAL_REASONING"],bloom:"APPLICATION"}}),{ch22_q01:{concept:"HIV_PROGRESSION",skill:["SEQUENCING"],bloom:"COMPREHENSION"},ch22_q02:{concept:"HIV_PROGRESSION",skill:["CLINICAL_REASONING"],bloom:"APPLICATION"},ch22_q03:{concept:"PREP",skill:["DIFFERENTIATION","TEACHING"],bloom:"COMPREHENSION"},ch22_q04:{concept:"AIDS_DIAGNOSIS",skill:["LAB_INTERPRETATION"],bloom:"COMPREHENSION"},ch22_q05:{concept:"OPPORTUNISTIC_INFECTIONS",skill:["RECALL"],bloom:"KNOWLEDGE"},ch22_q06:{concept:"ANTIRETROVIRAL_THERAPY",skill:["TEACHING"],bloom:"COMPREHENSION"},ch22_q07:{concept:"OPPORTUNISTIC_INFECTIONS",skill:["CLINICAL_REASONING"],bloom:"COMPREHENSION"},ch22_q08:{concept:"PEP",skill:["PRIORITY","MED_SAFETY"],bloom:"APPLICATION"},ch22_q09:{concept:"VIRAL_LOAD",skill:["TEACHING"],bloom:"COMPREHENSION"},ch22_q10:{concept:"OPPORTUNISTIC_INFECTIONS",skill:["CLINICAL_REASONING"],bloom:"COMPREHENSION"},ch22_q11:{concept:"HIV_TESTING",skill:["LAB_INTERPRETATION"],bloom:"COMPREHENSION"},ch22_q12:{concept:"ANTIRETROVIRAL_THERAPY",skill:["MED_SAFETY"],bloom:"COMPREHENSION"},ch22_q13:{concept:"HIV_TRANSMISSION",skill:["DIFFERENTIATION"],bloom:"COMPREHENSION"},ch22_q14:{concept:"ADHERENCE",skill:["TEACHING","MED_SAFETY"],bloom:"APPLICATION"},ch22_q15:{concept:"OPPORTUNISTIC_INFECTIONS",skill:["PRIORITY","CLINICAL_REASONING"],bloom:"APPLICATION"},ch22_q16:{concept:"HIV_TESTING",skill:["TEACHING"],bloom:"COMPREHENSION"},ch22_q17:{concept:"ANTIRETROVIRAL_THERAPY",skill:["MED_SAFETY"],bloom:"COMPREHENSION"},ch22_q18:{concept:"PREP",skill:["TEACHING","DIFFERENTIATION"],bloom:"COMPREHENSION"},ch22_q19:{concept:"CD4_COUNT",skill:["LAB_INTERPRETATION"],bloom:"COMPREHENSION"},ch22_q20:{concept:"OPPORTUNISTIC_INFECTIONS",skill:["CLINICAL_REASONING"],bloom:"APPLICATION"},ch22_q21:{concept:"ADHERENCE",skill:["TEACHING","MED_SAFETY"],bloom:"APPLICATION"},ch22_q22:{concept:"HIV_PROGRESSION",skill:["CLINICAL_REASONING"],bloom:"APPLICATION"},ch22_q23:{concept:"ANTIRETROVIRAL_THERAPY",skill:["DIFFERENTIATION"],bloom:"COMPREHENSION"},ch22_q24:{concept:"ADHERENCE",skill:["TEACHING","MED_SAFETY"],bloom:"APPLICATION"},ch22_q25:{concept:"HIV_DISCLOSURE",skill:["TEACHING","RECALL"],bloom:"COMPREHENSION"}}),{quiz1_q01:{concept:"IMMUNOGLOBULINS",skill:["RECALL"],bloom:"KNOWLEDGE"},quiz1_q02:{concept:"TYPE_IV",skill:["DIFFERENTIATION"],bloom:"COMPREHENSION"},quiz1_q03:{concept:"OSTEOARTHRITIS",skill:["DIFFERENTIATION"],bloom:"COMPREHENSION"},quiz1_q04:{concept:"C_DIFF",skill:["PRIORITY","INFECTION_CONTROL"],bloom:"APPLICATION"},quiz1_q05:{concept:"AIDS_DIAGNOSIS",skill:["LAB_INTERPRETATION"],bloom:"COMPREHENSION"},quiz1_q06:{concept:"LEUKOCYTES",skill:["RECALL"],bloom:"KNOWLEDGE"},quiz1_q07:{concept:"LUPUS",skill:["CLINICAL_REASONING"],bloom:"COMPREHENSION"},quiz1_q08:{concept:"ANAPHYLAXIS",skill:["PRIORITY","MED_SAFETY"],bloom:"APPLICATION"},quiz1_q09:{concept:"MRSA",skill:["INFECTION_CONTROL"],bloom:"COMPREHENSION"},quiz1_q10:{concept:"ANTIRETROVIRAL_THERAPY",skill:["TEACHING"],bloom:"COMPREHENSION"},quiz1_q11:{concept:"INFLAMMATION",skill:["DIFFERENTIATION"],bloom:"COMPREHENSION"},quiz1_q12:{concept:"TYPE_III",skill:["DIFFERENTIATION"],bloom:"COMPREHENSION"},quiz1_q13:{concept:"GOUT",skill:["MED_SAFETY","DIFFERENTIATION"],bloom:"APPLICATION"},quiz1_q14:{concept:"HAND_HYGIENE",skill:["PRIORITY"],bloom:"APPLICATION"},quiz1_q15:{concept:"OPPORTUNISTIC_INFECTIONS",skill:["CLINICAL_REASONING"],bloom:"COMPREHENSION"},quiz1_q16:{concept:"IMMUNOGLOBULINS",skill:["RECALL"],bloom:"KNOWLEDGE"},quiz1_q17:{concept:"HYPERSENSITIVITY",skill:["RECALL"],bloom:"KNOWLEDGE"},quiz1_q18:{concept:"LUPUS",skill:["LAB_INTERPRETATION"],bloom:"COMPREHENSION"},quiz1_q19:{concept:"STANDARD_PRECAUTIONS",skill:["RECALL"],bloom:"COMPREHENSION"},quiz1_q20:{concept:"VIRAL_LOAD",skill:["TEACHING"],bloom:"COMPREHENSION"},quiz1_q21:{concept:"IMMUNITY_TYPES",skill:["DIFFERENTIATION"],bloom:"COMPREHENSION"},quiz1_q22:{concept:"RHEUMATOID_ARTHRITIS",skill:["MED_SAFETY"],bloom:"APPLICATION"},quiz1_q23:{concept:"PPE",skill:["SEQUENCING"],bloom:"APPLICATION"},quiz1_q24:{concept:"PEP",skill:["PRIORITY","MED_SAFETY"],bloom:"APPLICATION"},quiz1_q25:{concept:"LEUKOCYTES",skill:["DIFFERENTIATION"],bloom:"COMPREHENSION"}});function Kf(e){return e.map(e=>{var t;const n=Wf[e.id]||{},r=(null===(t=e.id)||void 0===t?void 0:t.split("_")[0])||"unknown";return c(c({},e),{},{chapter:r,concept:n.concept||null,skill:n.skill||[],bloom:n.bloom||null})})}const Yf=y("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Qf=y("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]),Xf=y("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),Jf=y("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),$f=y("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),Zf=y("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),ep=y("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),tp=y("lock-open",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);var np=n(579);const rp=["id"],ip=e=>{let{unlockedChapters:t,onToggleLock:n,loading:r}=e;return(0,np.jsxs)("div",{children:[(0,np.jsx)("p",{className:"text-gray-600 mb-6",children:"Control which chapters students can access. Locked chapters will show a \ud83d\udd12 badge and cannot be clicked."}),(0,np.jsx)("div",{className:"grid gap-3",children:[{id:"ch18",title:"Chapter 18: Immune Assessment",icon:"\ud83d\udee1\ufe0f"},{id:"ch19",title:"Chapter 19: Immune Disorders",icon:"\ud83d\udc1b"},{id:"ch20",title:"Chapter 20: Connective Tissue",icon:"\ud83e\uddb4"},{id:"ch21",title:"Chapter 21: MDROs",icon:"\ud83e\udda0"},{id:"ch22",title:"Chapter 22: HIV/AIDS",icon:"\ud83d\udd2c"},{id:"quiz1",title:"Quiz 1 Review",icon:"\ud83c\udfaf"},{id:"day-to-be-wrong",title:"\u2696\ufe0f A Day to be Wrong",icon:"\u2696\ufe0f"}].map(e=>{const i=t.includes(e.id);return(0,np.jsxs)("div",{className:"flex items-center justify-between p-4 border-2 rounded-lg hover:border-purple-300 transition-colors",children:[(0,np.jsxs)("div",{className:"flex items-center gap-4",children:[(0,np.jsx)("span",{className:"text-3xl",children:e.icon}),(0,np.jsxs)("div",{children:[(0,np.jsx)("h3",{className:"font-bold text-lg",children:e.title}),(0,np.jsxs)("p",{className:"text-sm text-gray-500",children:["ID: ",e.id]})]})]}),(0,np.jsx)("button",{onClick:()=>n(e.id),disabled:r,className:"flex items-center gap-2 px-6 py-3 rounded-lg font-semibold transition-all disabled:opacity-50 ".concat(i?"bg-green-500 text-white hover:bg-green-600":"bg-red-500 text-white hover:bg-red-600"),children:i?(0,np.jsxs)(np.Fragment,{children:[(0,np.jsx)(tp,{className:"w-5 h-5"}),"Unlocked"]}):(0,np.jsxs)(np.Fragment,{children:[(0,np.jsx)(C,{className:"w-5 h-5"}),"Locked"]})})]},e.id)})})]})},sp=e=>{let{chapter:t,onSave:n,onCancel:i,loading:s}=e;const[o,a]=(0,r.useState)({chapterId:t.chapterId||"",title:t.title||"",description:t.description||"",icon:t.icon||"\ud83d\udcda",questions:t.questions||[]}),[l,u]=(0,r.useState)({id:"",question:"",options:["","","",""],correct:0,rationale:""});return(0,np.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 p-4 overflow-y-auto",children:(0,np.jsxs)("div",{className:"max-w-4xl mx-auto bg-white rounded-xl shadow-2xl p-8",children:[(0,np.jsx)("h2",{className:"text-3xl font-bold mb-6",children:t.id?"Edit Chapter":"New Chapter"}),(0,np.jsxs)("form",{onSubmit:e=>{e.preventDefault(),o.chapterId&&o.title&&0!==o.questions.length?n(c(c({},t),o)):alert("Please fill in chapter ID, title, and add at least one question")},className:"space-y-6",children:[(0,np.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,np.jsxs)("div",{children:[(0,np.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Chapter ID"}),(0,np.jsx)("input",{type:"text",value:o.chapterId,onChange:e=>a(c(c({},o),{},{chapterId:e.target.value})),className:"w-full px-4 py-2 border rounded-lg",placeholder:"ch23",required:!0})]}),(0,np.jsxs)("div",{children:[(0,np.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Icon"}),(0,np.jsx)("input",{type:"text",value:o.icon,onChange:e=>a(c(c({},o),{},{icon:e.target.value})),className:"w-full px-4 py-2 border rounded-lg",placeholder:"\ud83d\udcda"})]})]}),(0,np.jsxs)("div",{children:[(0,np.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Title"}),(0,np.jsx)("input",{type:"text",value:o.title,onChange:e=>a(c(c({},o),{},{title:e.target.value})),className:"w-full px-4 py-2 border rounded-lg",placeholder:"Chapter 23: Advanced Topics",required:!0})]}),(0,np.jsxs)("div",{children:[(0,np.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Description"}),(0,np.jsx)("textarea",{value:o.description,onChange:e=>a(c(c({},o),{},{description:e.target.value})),className:"w-full px-4 py-2 border rounded-lg",rows:"2",placeholder:"What this chapter covers..."})]}),(0,np.jsxs)("div",{className:"border-t pt-6",children:[(0,np.jsxs)("h3",{className:"text-xl font-bold mb-4",children:["Questions (",o.questions.length,")"]}),(0,np.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg mb-4 space-y-4",children:[(0,np.jsxs)("div",{children:[(0,np.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Question"}),(0,np.jsx)("textarea",{value:l.question,onChange:e=>u(c(c({},l),{},{question:e.target.value})),className:"w-full px-4 py-2 border rounded-lg",rows:"3",placeholder:"Enter question text..."})]}),l.options.map((e,t)=>(0,np.jsxs)("div",{children:[(0,np.jsxs)("label",{className:"block text-sm font-medium mb-2",children:["Option ",t+1," ",t===l.correct&&"(Correct)"]}),(0,np.jsx)("input",{type:"text",value:e,onChange:e=>{const n=[...l.options];n[t]=e.target.value,u(c(c({},l),{},{options:n}))},className:"w-full px-4 py-2 border rounded-lg",placeholder:"Option ".concat(t+1)})]},t)),(0,np.jsxs)("div",{children:[(0,np.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Correct Answer"}),(0,np.jsxs)("select",{value:l.correct,onChange:e=>u(c(c({},l),{},{correct:parseInt(e.target.value)})),className:"w-full px-4 py-2 border rounded-lg",children:[(0,np.jsx)("option",{value:0,children:"Option 1"}),(0,np.jsx)("option",{value:1,children:"Option 2"}),(0,np.jsx)("option",{value:2,children:"Option 3"}),(0,np.jsx)("option",{value:3,children:"Option 4"})]})]}),(0,np.jsxs)("div",{children:[(0,np.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Rationale"}),(0,np.jsx)("textarea",{value:l.rationale,onChange:e=>u(c(c({},l),{},{rationale:e.target.value})),className:"w-full px-4 py-2 border rounded-lg",rows:"2",placeholder:"Explain why this is the correct answer..."})]}),(0,np.jsx)("button",{type:"button",onClick:()=>{if(!l.question||l.options.some(e=>!e))return void alert("Please fill in question and all options");const e=c(c({},l),{},{id:l.id||"".concat(o.chapterId,"_q").concat(o.questions.length+1).padStart(2,"0")});a(c(c({},o),{},{questions:[...o.questions,e]})),u({id:"",question:"",options:["","","",""],correct:0,rationale:""})},className:"w-full bg-green-600 text-white py-2 rounded-lg hover:bg-green-700",children:"Add Question"})]}),o.questions.length>0&&(0,np.jsx)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:o.questions.map((e,t)=>(0,np.jsxs)("div",{className:"border p-3 rounded-lg flex justify-between items-start",children:[(0,np.jsxs)("div",{className:"flex-1",children:[(0,np.jsxs)("p",{className:"font-medium",children:["Q",t+1,": ",e.question.substring(0,80),"..."]}),(0,np.jsxs)("p",{className:"text-sm text-green-600",children:["\u2713 ",e.options[e.correct]]})]}),(0,np.jsx)("button",{type:"button",onClick:()=>{return e=t,void a(c(c({},o),{},{questions:o.questions.filter((t,n)=>n!==e)}));var e},className:"text-red-600 hover:bg-red-50 p-2 rounded",children:(0,np.jsx)(ep,{className:"w-4 h-4"})})]},t))})]}),(0,np.jsxs)("div",{className:"flex gap-4 pt-6 border-t",children:[(0,np.jsxs)("button",{type:"submit",disabled:s,className:"flex-1 flex items-center justify-center gap-2 bg-purple-600 text-white py-3 rounded-lg hover:bg-purple-700 disabled:opacity-50",children:[(0,np.jsx)(z,{className:"w-5 h-5"}),s?"Saving...":"Save Chapter"]}),(0,np.jsx)("button",{type:"button",onClick:i,disabled:s,className:"flex-1 border-2 border-gray-300 py-3 rounded-lg hover:bg-gray-50 disabled:opacity-50",children:"Cancel"})]})]})]})})},op=e=>{let{scores:t,loading:n,onRefresh:r}=e;const i={};t.forEach(e=>{i[e.playerName]||(i[e.playerName]={name:e.playerName,uid:e.uid,attempts:[],totalScore:0,chaptersCompleted:new Set}),i[e.playerName].attempts.push(e),i[e.playerName].totalScore+=e.score,i[e.playerName].chaptersCompleted.add(e.chapterTitle)});const s=Object.values(i).map(e=>c(c({},e),{},{chaptersCompleted:e.chaptersCompleted.size,avgScore:Math.round(e.totalScore/e.attempts.length),totalAttempts:e.attempts.length})).sort((e,t)=>t.totalScore-e.totalScore);return(0,np.jsxs)("div",{children:[(0,np.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,np.jsx)("div",{children:(0,np.jsxs)("p",{className:"text-gray-600",children:["Total Students: ",(0,np.jsx)("span",{className:"font-bold",children:s.length})," | Total Submissions: ",(0,np.jsx)("span",{className:"font-bold",children:t.length})]})}),(0,np.jsx)("button",{onClick:r,disabled:n,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:n?"Loading...":"Refresh"})]}),0===s.length?(0,np.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,np.jsx)(Xf,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),(0,np.jsx)("p",{className:"text-lg",children:"No student data yet."}),(0,np.jsx)("p",{className:"text-sm",children:"Scores will appear here once students submit ranked attempts."})]}):(0,np.jsx)("div",{className:"space-y-4",children:s.map((e,t)=>(0,np.jsxs)("div",{className:"border-2 border-gray-200 rounded-lg p-4 hover:border-purple-300 transition-colors",children:[(0,np.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,np.jsxs)("div",{className:"flex items-center gap-3",children:[(0,np.jsxs)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center font-bold text-white ".concat(0===t?"bg-yellow-500":1===t?"bg-gray-400":2===t?"bg-orange-600":"bg-purple-600"),children:["#",t+1]}),(0,np.jsxs)("div",{children:[(0,np.jsx)("h3",{className:"text-lg font-bold",children:e.name}),(0,np.jsxs)("p",{className:"text-xs text-gray-500",children:["UID: ",e.uid.substring(0,8),"..."]})]})]}),(0,np.jsxs)("div",{className:"text-right",children:[(0,np.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:e.totalScore}),(0,np.jsx)("div",{className:"text-xs text-gray-500",children:"Total Points"})]})]}),(0,np.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,np.jsxs)("div",{className:"bg-blue-50 rounded-lg p-3",children:[(0,np.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:e.chaptersCompleted}),(0,np.jsx)("div",{className:"text-xs text-gray-600",children:"Chapters"})]}),(0,np.jsxs)("div",{className:"bg-green-50 rounded-lg p-3",children:[(0,np.jsx)("div",{className:"text-2xl font-bold text-green-600",children:e.avgScore}),(0,np.jsx)("div",{className:"text-xs text-gray-600",children:"Avg Score"})]}),(0,np.jsxs)("div",{className:"bg-purple-50 rounded-lg p-3",children:[(0,np.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:e.totalAttempts}),(0,np.jsx)("div",{className:"text-xs text-gray-600",children:"Attempts"})]})]}),(0,np.jsxs)("details",{className:"mt-3",children:[(0,np.jsxs)("summary",{className:"cursor-pointer text-sm text-gray-600 hover:text-gray-800 font-semibold",children:["View Attempts (",e.attempts.length,")"]}),(0,np.jsx)("div",{className:"mt-2 space-y-2",children:e.attempts.map((e,t)=>{var n;return(0,np.jsxs)("div",{className:"flex justify-between items-center text-sm bg-gray-50 p-2 rounded",children:[(0,np.jsx)("span",{className:"font-medium",children:e.chapterTitle}),(0,np.jsxs)("div",{className:"flex items-center gap-4",children:[(0,np.jsxs)("span",{className:"text-purple-600 font-bold",children:[e.score," pts"]}),(0,np.jsx)("span",{className:"text-gray-500 text-xs",children:null!==(n=e.timestamp)&&void 0!==n&&n.toDate?e.timestamp.toDate().toLocaleString():"N/A"})]})]},t)})})]})]},e.uid))})]})},ap=e=>{let{analyticsData:t,loading:n,onRefresh:r}=e;const i={};t.forEach(e=>{const t=e.questionId;if(!t)return;i[t]||(i[t]={questionId:t,chapter:e.chapterTitle||"Unknown",totalAttempts:0,correctAttempts:0,incorrectAttempts:0,avgTimeSpent:0,timeData:[],rationaleCorrect:0,rationaleIncorrect:0,incorrectOptions:{}});const n=i[t];n.totalAttempts++,e.isCorrect?n.correctAttempts++:n.incorrectAttempts++,e.timeSpent&&n.timeData.push(e.timeSpent),"correct"===e.rationaleTier?n.rationaleCorrect++:"incorrect"!==e.rationaleTier&&"weak"!==e.rationaleTier||n.rationaleIncorrect++}),Object.values(i).forEach(e=>{e.percentCorrect=Math.round(e.correctAttempts/e.totalAttempts*100),e.avgTimeSpent=e.timeData.length>0?Math.round(e.timeData.reduce((e,t)=>e+t,0)/e.timeData.length):0,e.percentCorrect>90?e.flag="Too Easy":e.percentCorrect<40?e.flag="Too Hard":e.flag="Good"});const s=Object.values(i).sort((e,t)=>e.percentCorrect-t.percentCorrect);return n?(0,np.jsx)("div",{className:"text-center py-12 text-gray-500",children:"Loading analytics..."}):0===t.length?(0,np.jsxs)("div",{className:"text-center py-12",children:[(0,np.jsx)("p",{className:"text-gray-600 mb-4",children:"No question analytics available yet."}),(0,np.jsx)("p",{className:"text-sm text-gray-500",children:"Analytics are collected when students answer questions in ranked mode."})]}):(0,np.jsxs)("div",{children:[(0,np.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,np.jsxs)("div",{children:[(0,np.jsx)("h3",{className:"text-xl font-bold",children:"Item Analysis Dashboard"}),(0,np.jsx)("p",{className:"text-sm text-gray-600",children:"Question performance metrics across all students"})]}),(0,np.jsx)("button",{onClick:r,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm",children:"Refresh Data"})]}),(0,np.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[(0,np.jsxs)("div",{className:"bg-blue-50 rounded-xl p-4",children:[(0,np.jsx)("div",{className:"text-3xl font-bold text-blue-600",children:s.length}),(0,np.jsx)("div",{className:"text-sm text-gray-600",children:"Questions Analyzed"})]}),(0,np.jsxs)("div",{className:"bg-green-50 rounded-xl p-4",children:[(0,np.jsx)("div",{className:"text-3xl font-bold text-green-600",children:s.filter(e=>"Good"===e.flag).length}),(0,np.jsx)("div",{className:"text-sm text-gray-600",children:"Good Difficulty"})]}),(0,np.jsxs)("div",{className:"bg-red-50 rounded-xl p-4",children:[(0,np.jsx)("div",{className:"text-3xl font-bold text-red-600",children:s.filter(e=>"Too Easy"===e.flag||"Too Hard"===e.flag).length}),(0,np.jsx)("div",{className:"text-sm text-gray-600",children:"Need Review"})]})]}),(0,np.jsx)("div",{className:"overflow-x-auto",children:(0,np.jsxs)("table",{className:"w-full border-collapse",children:[(0,np.jsx)("thead",{children:(0,np.jsxs)("tr",{className:"bg-gray-100",children:[(0,np.jsx)("th",{className:"p-3 text-left text-sm font-bold",children:"Question ID"}),(0,np.jsx)("th",{className:"p-3 text-left text-sm font-bold",children:"Chapter"}),(0,np.jsx)("th",{className:"p-3 text-center text-sm font-bold",children:"Attempts"}),(0,np.jsx)("th",{className:"p-3 text-center text-sm font-bold",children:"% Correct"}),(0,np.jsx)("th",{className:"p-3 text-center text-sm font-bold",children:"Avg Time"}),(0,np.jsx)("th",{className:"p-3 text-center text-sm font-bold",children:"Rationale Acc"}),(0,np.jsx)("th",{className:"p-3 text-center text-sm font-bold",children:"Flag"})]})}),(0,np.jsx)("tbody",{children:s.map(e=>{const t=e.rationaleCorrect+e.rationaleIncorrect>0?Math.round(e.rationaleCorrect/(e.rationaleCorrect+e.rationaleIncorrect)*100):null;return(0,np.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,np.jsx)("td",{className:"p-3 text-sm font-mono",children:e.questionId}),(0,np.jsx)("td",{className:"p-3 text-sm",children:e.chapter}),(0,np.jsx)("td",{className:"p-3 text-center text-sm",children:e.totalAttempts}),(0,np.jsx)("td",{className:"p-3 text-center",children:(0,np.jsxs)("span",{className:"px-2 py-1 rounded font-bold text-sm ".concat(e.percentCorrect>=70?"bg-green-100 text-green-700":e.percentCorrect>=50?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"),children:[e.percentCorrect,"%"]})}),(0,np.jsxs)("td",{className:"p-3 text-center text-sm",children:[e.avgTimeSpent,"s"]}),(0,np.jsx)("td",{className:"p-3 text-center text-sm",children:null!==t?"".concat(t,"%"):"N/A"}),(0,np.jsx)("td",{className:"p-3 text-center",children:(0,np.jsx)("span",{className:"px-2 py-1 rounded text-xs font-bold ".concat("Good"===e.flag?"bg-blue-100 text-blue-700":"Too Easy"===e.flag?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"),children:e.flag})})]},e.questionId)})})]})}),(0,np.jsxs)("div",{className:"mt-6 p-4 bg-blue-50 rounded-xl",children:[(0,np.jsx)("h4",{className:"font-bold text-blue-900 mb-2",children:"Recommendations:"}),(0,np.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1",children:[(0,np.jsxs)("li",{children:["\u2022 ",(0,np.jsxs)("strong",{children:["Too Easy (",">","90%):"]})," Consider adding distractors or increasing complexity"]}),(0,np.jsxs)("li",{children:["\u2022 ",(0,np.jsxs)("strong",{children:["Too Hard (","<","40%):"]})," Review question clarity and review concept with students"]}),(0,np.jsxs)("li",{children:["\u2022 ",(0,np.jsx)("strong",{children:"Good (40-90%):"})," These questions effectively assess understanding"]}),(0,np.jsxs)("li",{children:["\u2022 ",(0,np.jsx)("strong",{children:"Low Rationale Accuracy:"})," Question may have confusing reasoning options"]})]})]})]})},lp=e=>{let{onExit:t}=e;const[n,i]=(0,r.useState)(!1),[s,o]=(0,r.useState)(""),[a,l]=(0,r.useState)([]),[d,h]=(0,r.useState)(null),[f,p]=(0,r.useState)(!1),[m,g]=(0,r.useState)("chapters"),[y,v]=(0,r.useState)([]),[b,w]=(0,r.useState)([]),[I,x]=(0,r.useState)([]);(0,r.useEffect)(()=>{n&&(T(),N(),_(),E())},[n]);const E=async()=>{if(Hf)try{const e=lu(xc(Hf,"artifacts","rn-mastery-game","public","data","analytics"),hu("timestamp","desc")),t=await Nu(e),n=[];t.forEach(e=>{n.push(c({id:e.id},e.data()))}),x(n)}catch(e){console.error("Error loading analytics:",e)}},_=async()=>{if(Hf)try{const e=lu(xc(Hf,"artifacts","rn-mastery-game","public","data","scores"),hu("timestamp","desc")),t=await Nu(e),n=[];t.forEach(e=>{n.push(c({id:e.id},e.data()))}),w(n)}catch(e){console.error("Error loading student scores:",e)}},N=async()=>{if(Hf)try{const e=(await Nu(xc(Hf,"settings"))).docs.find(e=>"chapterAccess"===e.id);e&&v(e.data().unlocked||[])}catch(e){console.error("Error loading locks:",e)}},T=async()=>{try{if(p(!0),!Hf)return console.error("Firebase not initialized"),void l([]);const e=await Nu(xc(Hf,"customChapters")),t=[];e.forEach(e=>{t.push(c({id:e.id},e.data()))}),l(t)}catch(e){console.error("Error loading chapters:",e),l([])}finally{p(!1)}},S=e=>{e.preventDefault(),"nursing2024"===s?i(!0):alert("Incorrect password")},k=async e=>{try{if(p(!0),e.id){const t=Ec(Hf,"customChapters",e.id);await function(e,t,n){e=pc(e,wc);const r=pc(e.firestore,Tc),i=qc(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=me(t))||t instanceof Ac?Gc(i,"updateDoc",e._key,t,n,a):Hc(i,"updateDoc",e._key,t),Su(r,[s.toMutation(e._key,hs.exists(!0))])}(t,e),alert("Chapter updated!")}else await Tu(xc(Hf,"customChapters"),e),alert("Chapter added!");await T(),h(null)}catch(t){console.error("Error saving chapter:",t),alert("Error saving chapter: "+t.message)}finally{p(!1)}},A=async e=>{var t;if(window.confirm("Delete this chapter? This cannot be undone."))try{p(!0),await(t=Ec(Hf,"customChapters",e),Su(pc(t.firestore,Tc),[new Ns(t._key,hs.none())])),alert("Chapter deleted!"),await T()}catch(n){console.error("Error deleting chapter:",n),alert("Error deleting chapter: "+n.message)}finally{p(!1)}};return n?null!==d?(0,np.jsx)(sp,{chapter:d,onSave:k,onCancel:()=>h(null),loading:f}):(0,np.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 p-4",children:(0,np.jsx)("div",{className:"max-w-6xl mx-auto",children:(0,np.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl p-8",children:[(0,np.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,np.jsx)("h2",{className:"text-3xl font-bold",children:"Instructor Mode"}),(0,np.jsxs)("button",{onClick:t,className:"flex items-center gap-2 px-4 py-2 border-2 border-gray-300 rounded-lg hover:bg-gray-50",children:[(0,np.jsx)(Yf,{className:"w-4 h-4"}),"Exit"]})]}),(0,np.jsxs)("div",{className:"flex gap-2 mb-6 border-b",children:[(0,np.jsx)("button",{onClick:()=>g("chapters"),className:"px-6 py-3 font-semibold transition-colors ".concat("chapters"===m?"text-purple-600 border-b-2 border-purple-600":"text-gray-500 hover:text-gray-700"),children:"Chapter Management"}),(0,np.jsxs)("button",{onClick:()=>g("itemAnalysis"),className:"px-6 py-3 font-semibold transition-colors ".concat("itemAnalysis"===m?"text-purple-600 border-b-2 border-purple-600":"text-gray-500 hover:text-gray-700"),children:[(0,np.jsx)(Qf,{className:"w-4 h-4 inline mr-2"}),"Item Analysis"]}),(0,np.jsxs)("button",{onClick:()=>g("locks"),className:"px-6 py-3 font-semibold transition-colors ".concat("locks"===m?"text-purple-600 border-b-2 border-purple-600":"text-gray-500 hover:text-gray-700"),children:[(0,np.jsx)(C,{className:"w-4 h-4 inline mr-2"}),"Chapter Locks"]}),(0,np.jsxs)("button",{onClick:()=>g("analytics"),className:"px-6 py-3 font-semibold transition-colors ".concat("analytics"===m?"text-purple-600 border-b-2 border-purple-600":"text-gray-500 hover:text-gray-700"),children:[(0,np.jsx)(Xf,{className:"w-4 h-4 inline mr-2"}),"Student Analytics"]})]}),"chapters"===m&&(0,np.jsxs)(np.Fragment,{children:[(0,np.jsxs)("div",{className:"flex gap-4 mb-6",children:[(0,np.jsxs)("button",{onClick:()=>h({}),className:"flex items-center gap-2 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[(0,np.jsx)(Jf,{className:"w-5 h-5"}),"Add New Chapter"]}),(0,np.jsxs)("button",{onClick:()=>{const e=JSON.stringify(a,null,2),t=new Blob([e],{type:"application/json"}),n=URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download="chapters-backup-".concat(Date.now(),".json"),r.click()},className:"flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[(0,np.jsx)(V,{className:"w-5 h-5"}),"Export All"]}),(0,np.jsxs)("label",{className:"flex items-center gap-2 px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 cursor-pointer",children:[(0,np.jsx)($f,{className:"w-5 h-5"}),"Import",(0,np.jsx)("input",{type:"file",accept:".json",onChange:e=>{const t=e.target.files[0];if(!t)return;const n=new FileReader;n.onload=async e=>{try{const t=JSON.parse(e.target.result);if(!Array.isArray(t))return void alert("Invalid format. Expected an array of chapters.");p(!0);for(const e of t){const{id:t}=e,n=u(e,rp);await Tu(xc(Hf,"customChapters"),n)}alert("Imported ".concat(t.length," chapters!")),await T()}catch(t){console.error("Error importing:",t),alert("Error importing chapters: "+t.message)}finally{p(!1)}},n.readAsText(t)},className:"hidden"})]})]}),f&&(0,np.jsxs)("div",{className:"text-center py-8",children:[(0,np.jsx)("div",{className:"animate-spin w-12 h-12 border-4 border-purple-600 border-t-transparent rounded-full mx-auto"}),(0,np.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading..."})]}),!f&&0===a.length&&(0,np.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,np.jsx)("p",{className:"text-lg",children:"No custom chapters yet."}),(0,np.jsx)("p",{className:"text-sm",children:'Click "Add New Chapter" to get started.'})]}),!f&&a.length>0&&(0,np.jsx)("div",{className:"grid gap-4",children:a.map(e=>{var t;return(0,np.jsx)("div",{className:"border-2 border-gray-200 rounded-lg p-4 hover:border-purple-300 transition-colors",children:(0,np.jsxs)("div",{className:"flex items-start justify-between",children:[(0,np.jsxs)("div",{className:"flex-1",children:[(0,np.jsx)("h3",{className:"text-xl font-bold mb-2",children:e.title}),(0,np.jsx)("p",{className:"text-gray-600 mb-2",children:e.description}),(0,np.jsxs)("div",{className:"flex gap-4 text-sm text-gray-500",children:[(0,np.jsxs)("span",{children:["ID: ",e.chapterId]}),(0,np.jsxs)("span",{children:[(null===(t=e.questions)||void 0===t?void 0:t.length)||0," questions"]})]})]}),(0,np.jsxs)("div",{className:"flex gap-2",children:[(0,np.jsx)("button",{onClick:()=>h(e),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg",children:(0,np.jsx)(Zf,{className:"w-5 h-5"})}),(0,np.jsx)("button",{onClick:()=>A(e.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",children:(0,np.jsx)(ep,{className:"w-5 h-5"})})]})]})},e.id)})})]}),"locks"===m&&(0,np.jsx)(ip,{unlockedChapters:y,onToggleLock:async e=>{try{p(!0);const t=y.includes(e)?y.filter(t=>t!==e):[...y,e];await function(e,t,n){e=pc(e,wc);const r=pc(e.firestore,Tc),i=vu(e.converter,t,n);return Su(r,[Vc(qc(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,hs.none())])}(Ec(Hf,"settings","chapterAccess"),{unlocked:t}),v(t)}catch(t){console.error("Error toggling lock:",t),alert("Error updating chapter lock: "+t.message)}finally{p(!1)}},loading:f}),"itemAnalysis"===m&&(0,np.jsx)(ap,{analyticsData:I,loading:f,onRefresh:E}),"analytics"===m&&(0,np.jsx)(op,{scores:b,loading:f,onRefresh:_})]})})}):(0,np.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 flex items-center justify-center p-4",children:(0,np.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl p-8 w-full max-w-md",children:[(0,np.jsx)("div",{className:"flex items-center justify-center mb-6",children:(0,np.jsx)(C,{className:"w-12 h-12 text-purple-600"})}),(0,np.jsx)("h2",{className:"text-2xl font-bold text-center mb-6",children:"Instructor Mode"}),(0,np.jsxs)("form",{onSubmit:S,className:"space-y-4",children:[(0,np.jsxs)("div",{children:[(0,np.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),(0,np.jsx)("input",{type:"password",value:s,onChange:e=>o(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter instructor password"})]}),(0,np.jsx)("button",{type:"submit",className:"w-full bg-purple-600 text-white py-3 rounded-lg hover:bg-purple-700 transition-colors font-semibold",children:"Login"}),(0,np.jsx)("button",{type:"button",onClick:t,className:"w-full border-2 border-gray-300 text-gray-700 py-3 rounded-lg hover:bg-gray-50 transition-colors font-semibold",children:"Back to Game"})]})]})})};function cp(e){const{text:t,options:n,correctIndex:r,rationale:i,concept:s,skill:o,bloom:a}=e,l=Math.random()<.2,u=l?function(e){const{concept:t,skill:n,correctIndex:r,options:i}=e;return["This addresses the most immediate physiological need based on nursing priorities (ABCs - Airway, Breathing, Circulation). While other options are appropriate, they can be delayed until the patient is stabilized.","This intervention is important for ongoing care, but does not address the most urgent need. Patient safety and physiological stability take precedence over this action.","While this is clinically appropriate and should be completed, it represents a secondary priority. The immediate threat to patient well-being must be addressed first.","This action is part of comprehensive nursing care but can be safely delayed. The highest priority intervention focuses on preventing immediate complications or harm."]}(e):function(e){const{concept:t,skill:n,bloom:r,correctIndex:i,options:s}=e;s[i];return[hp(e),fp(e),"This option addresses a different priority in ".concat(t||"care"),"While related to ".concat((null===n||void 0===n?void 0:n[0])||"the concept",", this doesn't address the immediate need")]}(e),d=l?function(e,t){const n=["A patient with ".concat(t||"this condition"," requires multiple interventions. Which action should the nurse complete first?"),"The nurse is caring for a patient with ".concat(t||"this condition",". All of the following are appropriate, but which is the highest priority?"),"When caring for a patient with ".concat(t||"this condition",", the nurse recognizes several needs. Which intervention is most important initially?"),"A patient presents with ".concat(t||"this condition",". The nurse plans care. Which action should take priority?")];return n[Math.floor(Math.random()*n.length)]}(0,s):function(e,t,n){if(e.includes("nurse")&&(e.includes("patient")||e.includes("client")))return up(e);return function(e,t,n){if(null!==n&&void 0!==n&&n.includes("TEACHING_ERROR")||e.toLowerCase().includes("teaching")||e.toLowerCase().includes("indicates the need for further"))return function(e,t){const n=["A patient with ".concat(t||"this condition"," makes the following statement. Which indicates a misunderstanding that could lead to complications?"),"During discharge teaching for ".concat(t||"this condition",", which patient statement requires immediate intervention to prevent adverse outcomes?"),"The nurse is evaluating understanding of ".concat(t||"this condition",". Which statement suggests the patient is at risk for poor outcomes?")];return n[Math.floor(Math.random()*n.length)]}(0,t);if(e.toLowerCase().includes("correlates")||e.toLowerCase().includes("function of"))return function(e,t){const n=["A patient presents with abnormal ".concat(t||"findings",". The nurse anticipates which clinical manifestation will require priority intervention?"),"During assessment of ".concat(t||"this system",", which finding indicates the most urgent need for intervention?"),"The nurse notes changes in ".concat(t||"function",". Which assessment finding suggests immediate risk to the patient?")];return n[Math.floor(Math.random()*n.length)]}(0,t);if(e.toLowerCase().includes("which type")||e.toLowerCase().includes("which is"))return function(e,t){const n=["A patient shows signs consistent with ".concat(t||"this process",". Which assessment finding requires the nurse to act first?"),"In a patient experiencing ".concat(t||"this condition",", which finding indicates the highest priority for immediate intervention?"),"The nurse is caring for multiple patients. Which assessment finding related to ".concat(t||"this system"," requires immediate attention?")];return n[Math.floor(Math.random()*n.length)]}(0,t);if(null!==n&&void 0!==n&&n.includes("PRIORITY")||e.toLowerCase().includes("most appropriate"))return function(e,t){const n=["To prevent complications in a patient with ".concat(t||"this condition",", the nurse's priority action is:"),"A patient with ".concat(t||"this condition"," is at risk for deterioration. Which intervention should the nurse implement first?"),"The nurse identifies early signs of ".concat(t||"complications",". Which action will prevent further decline?")];return n[Math.floor(Math.random()*n.length)]}(0,t);if(null!==n&&void 0!==n&&n.includes("LAB_INTERPRETATION")||e.toLowerCase().includes("lab")||e.toLowerCase().includes("test"))return function(e,t){const n=["A patient's lab results show abnormalities related to ".concat(t||"this system",". Which finding requires immediate notification of the provider?"),"During review of diagnostic tests for ".concat(t||"this condition",", which result indicates the need for urgent intervention?"),"The nurse receives critical lab values related to ".concat(t||"function",". Which finding poses the greatest immediate threat?")];return n[Math.floor(Math.random()*n.length)]}(0,t);return up("In caring for a patient with ".concat(t||"this condition",", ").concat(e.charAt(0).toLowerCase()).concat(e.slice(1)))}(e,t,n)}(t,s,o),h=l?function(e,t,n){return e.map((e,r)=>{if(r===t)return dp(e,"immediate",n);return dp(e,r%3===0?"urgent":r%3===1?"important":"routine",n)})}(n,r,s):function(e){const t=Math.floor(3*Math.random());if(0===t)return e.map(e=>function(e){if(e.length>60||e.includes("BP")||e.includes("within"))return e;const t=[" within the next 5 minutes"," immediately to prevent deterioration"," while monitoring vital signs"," before condition worsens"," as first priority"];if(Math.random()>.5)return e+t[Math.floor(Math.random()*t.length)];return e}(e));if(1===t)return e.map(e=>function(e){if(e.length>60)return e;const t=["considering patient history","noting recent lab changes","observing current symptoms","based on assessment findings"];if(Math.random()>.6){const n=t[Math.floor(Math.random()*t.length)];return"".concat(e," - ").concat(n)}return e}(e));return e.map(e=>function(e){if(e.length>60)return e;const t=["to prevent complications","to stabilize condition","to ensure safety","to reduce risk"];if(Math.random()>.7)return"".concat(e," ").concat(t[Math.floor(Math.random()*t.length)]);return e}(e))}(n),{newOptions:f,newCorrectIndex:p}=function(e,t){e[t];const n=e.map((e,t)=>t);for(let s=n.length-1;s>0;s--){const e=Math.floor(Math.random()*(s+1));[n[s],n[e]]=[n[e],n[s]]}const r=n.map(t=>e[t]),i=n.indexOf(t);return{newOptions:r,newCorrectIndex:i}}(h,r);return c(c({},e),{},{originalText:t,text:d,options:f,correctIndex:p,rationaleOptions:u,requiresRationale:!0,correctRationaleIndex:0,timeLimit:30,isTransformed:!0,isPriorityQuestion:l})}function up(e){const t=["PRIORITY: ","The nurse must first: ","The most important action is: ","To prevent complications, the nurse should: "];return t[Math.floor(Math.random()*t.length)]+e.charAt(0).toLowerCase()+e.slice(1)}function dp(e,t,n){let r=e.replace(/\b(always|never|must|only|all)\b/gi,"").replace(/\s{2,}/g," ").trim();const i={immediate:[r,"".concat(r," to stabilize condition"),"".concat(r," as priority intervention")],urgent:["".concat(r," after initial assessment"),"".concat(r," following stabilization"),"".concat(r," once safety is ensured")],important:["".concat(r," when condition permits"),"".concat(r," during ongoing care"),"".concat(r," as part of comprehensive plan")],routine:["".concat(r," before discharge"),"".concat(r," during follow-up care"),"".concat(r," when time allows")]},s=i[t]||i.important;return s[Math.floor(Math.random()*s.length)]}function hp(e){const{concept:t,skill:n,bloom:r,rationale:i}=e;if(i&&i.trim()){const e=i.split(".").map(e=>e.trim()).filter(e=>e.length>0);if(e.length>0)return e[0]+"."}return null!==n&&void 0!==n&&n.includes("PRIORITY")?"This addresses the most critical need based on ".concat(t||"nursing priorities","."):"APPLICATION"===r||"CLINICAL_JUDGMENT"===r?"This option requires analyzing the situation and applying clinical judgment based on ".concat(t||"the scenario","."):t?"This is the correct action based on evidence-based practice for ".concat(t,"."):"This option demonstrates proper clinical judgment and evidence-based practice."}function fp(e){const{concept:t,skill:n,rationale:r}=e;if(r&&r.trim()){const e=r.split(".").map(e=>e.trim()).filter(e=>e.length>0);if(e.length>1)return e[1]+"."}const i=["This option is mentioned in the textbook about ".concat(t||"this topic","."),"This is commonly recommended for ".concat(t||"this condition","."),"This intervention is part of standard nursing care.","This action appears in the care guidelines."];return i[Math.floor(Math.random()*i.length)]}function pp(e){if(e.length<5)return!1;if(e.every(t=>t===e[0]))return!0;let t=!0;for(let r=1;r<e.length;r++)if(e[r]===e[r-1]){t=!1;break}if(t)return!0;let n=!0;for(let r=1;r<e.length;r++)if((e[r]-e[r-1]+4)%4!==1){n=!1;break}return n}const mp={id:"day-to-be-wrong",title:"\u2696\ufe0f A Day to be Wrong",icon:"\u2696\ufe0f",description:"Every answer is wrong. Pick the least dangerous risk.",questions:[{id:"ld_q01_mdro_moral_injury",text:"\ud83e\ude78 COMPETING PRIORITIES: You are charge nurse. ONE negative-pressure room. THREE patients arrive. You must answer: (1) Where do you go FIRST? (2) What gets worse because of it?",scenario:'**Patient A:** "Feeling off" \u2022 Recent antibiotic \u2022 Some GI symptoms\n\n**Patient B:** ICU transfer \u2022 "Fever" \u2022 History of resistant infection\n\n**Patient C:** Known colonization \u2022 Wound actively draining \u2022 Roommate with "low immunity"\n\n\u26a0\ufe0f NO FULL LABS \u2022 NO VITALS \u2022 NO DIAGNOSIS CONFIRMATION',options:["Patient A - Recent antibiotic + GI symptoms","Patient B - ICU transfer with fever history","Patient C - Draining wound + vulnerable roommate","Try to share the room between patients"],correctIndex:2,timeLimit:45,requiresConsequence:!0,consequences:{0:"\u26a0\ufe0f **You chose A.** C. diff contained BUT: Immunocompromised patient now colonized with MRSA. Cost: One infection prevented, one created.",1:"\u26a0\ufe0f **You chose B.** CRE monitored BUT: C. diff now spreading. 3 patients in hallway exposed. Cost: Saved one, infected three.",2:"\u2713 **Least dangerous.** Immunocompromised protected BUT: You delayed CRE protocols. Cost: Best choice still has consequences.",3:"\u274c **Unit disaster.** You tried to be fair. Cost: 2 cross-contaminated patients + 3 exposed staff + outbreak investigation."},costOfChoice:{description:"EVERY ANSWER HAS A COST. The game will track what you sacrificed.",trackSacrifices:!0},rationale:"**Best choice: Patient C** (though still not ideal)\n\n**Why C is least dangerous:**\n- MRSA + draining wound + immunocompromised roommate = HIGH transmission risk\n- Prevents transmission to vulnerable patient\n- Contact precautions can be enforced\n\n**Why the others are worse:**\n\n**Patient A (C. diff):**\n- C. diff needs CONTACT precautions + soap/water, NOT negative pressure\n- Negative pressure is wasted on this patient\n- Can be managed in regular room with proper handwashing\n\n**Patient B (CRE):**\n- CRE is a mortality risk but NOT airborne\n- Contact precautions are sufficient\n- Negative pressure doesn't add protection value\n\n**Patient D (rotation):**\n- Resource allocation based on need, not equality\n- Increases transmission risk by moving infected patients\n- Logistically impossible and clinically unsound\n\n**NCLEX Teaching Point:**\n\"NCLEX doesn't test what's right. It tests whether you can explain why the others are worse.\"\n\n\u26a0\ufe0f **NOTE:** In reality, none of these patients need negative pressure for their conditions. This tests resource allocation under imperfect circumstances.",skill:["CLINICAL_JUDGMENT","PRIORITY","INFECTION_CONTROL"],concept:"RESOURCE_ALLOCATION",bloom:"EVALUATE",difficulty:5,examTip:"Negative-pressure rooms are for AIRBORNE precautions (TB, measles, varicella). None of these patients technically need it, but you must choose who benefits most from isolation."},{id:"ld_q02_hiv_labs_lie",text:"HIV patient presents to clinic with the following data:",scenario:'**CD4:** 240\n**Viral load:** Undetectable\n**Symptoms:** New SOB, dry cough\n**ART adherence:** "Pretty good"',options:["ART failure - patient is not adherent","PCP pneumonia - CD4 near 200 with respiratory symptoms","Anxiety - patient is worried about their diagnosis","Medication side effects - ART can cause respiratory symptoms"],correctIndex:1,timeLimit:60,consequences:{0:"\u274c **Delayed diagnosis!** Viral load rebounds to 50,000 in 2 weeks. Patient was actually adherent.",1:"\u2705 **Life saved.** Started on Bactrim. Chest X-ray confirms PCP. Patient hospitalized but stable.",2:"\u274c **Patient deteriorates.** Dismissed as anxiety. Now in ICU with respiratory failure. PCP diagnosis missed for 48 hours.",3:"\u274c **Critical delay.** Respiratory symptoms worsened. Emergency intubation required. Should have suspected OI first."},rationale:'**Best choice: PCP pneumonia**\n\n**Why PCP is the priority concern:**\n- CD4 count 240 (near the critical 200 threshold for PCP risk)\n- Classic PCP symptoms: SOB + dry cough\n- PCP can develop even with undetectable viral load\n- Life-threatening if not treated immediately\n\n**Why the others are worse:**\n\n**ART failure:**\n- Viral load is UNDETECTABLE - ART is working\n- "Pretty good" adherence is enough to maintain viral suppression\n- Not the immediate concern\n\n**Anxiety:**\n- Dismisses potentially life-threatening symptoms\n- Psychological symptoms don\'t cause SOB and dry cough\n- Dangerous assumption\n\n**Medication side effects:**\n- While possible, respiratory symptoms are NOT common ART side effects\n- Too risky to attribute serious symptoms to medications\n- Must rule out infection first\n\n**NCLEX Teaching Point:**\n"Undetectable doesn\'t mean invincible. CD4 count determines opportunistic infection risk."\n\n**Clinical Pearl:**\n- Viral load = how well ART is working\n- CD4 count = immune system strength and OI risk\n- Symptoms OVERRIDE reassuring labs',skill:["CLINICAL_JUDGMENT","LAB_INTERPRETATION","PRIORITY"],concept:"HIV_COMPLICATIONS",bloom:"ANALYZE",difficulty:5,examTip:"Viral load and CD4 count tell different stories. CD4 < 200 = PCP risk, regardless of viral suppression."},{id:"ld_q03_ranking_priority",text:"\u23f1\ufe0f LEAST WRONG: Needlestick 90min ago. All 4 actions below are correct. Which prevents the MOST irreversible harm FIRST? (Choose highest priority only)",scenario:"**HIV+ Patient Post-Exposure:**\n- Needlestick injury 90 minutes ago\n- Source patient unknown status\n- Employee terrified, no PEP started\n- Window closing\n\n\u26a0\ufe0f CHOOSE ONE - SEQUENCE DETERMINES OUTCOME",options:["Start PEP immediately - time-sensitive medication","Obtain source patient labs first - need baseline data","Provide emotional support - employee is panicking","Complete incident documentation - required protocol"],correctIndex:0,timeLimit:30,hardMode:!0,costOfChoice:"You must name what gets sacrificed by choosing this action",consequences:{0:"\u2705 **PEP started within window.** COST: Employee still anxious but protected. Could have been gentler.",1:"\u274c **Labs ordered.** COST: PEP delayed 3 hours. Effectiveness dropped from 95% to 70%. Preventable risk.",2:"\u274c **Employee calmed.** COST: PEP delayed 2 hours talking. Now only 50% effective. Feelings > survival?",3:"\u274c **Documentation perfect.** COST: PEP started 4 hours late. Nearly useless now. Great paperwork, poor outcome."},rationale:'**Required actions: HIV test, Hepatitis B screening, Renal function labs, Condom counseling**\n\n**Why each is required or not:**\n\n\u2705 **HIV test** - REQUIRED\n- Must confirm patient is HIV-negative before starting PrEP\n- PrEP is for prevention, not treatment\n- Starting PrEP on HIV+ patient causes resistance\n\n\u2705 **Hepatitis B screening** - REQUIRED\n- Tenofovir (in PrEP) treats HBV\n- Stopping PrEP can cause HBV flare in infected patients\n- Must know HBV status before starting\n\n\u2705 **Renal function labs** - REQUIRED\n- PrEP can cause kidney damage\n- Need baseline creatinine/eGFR\n- Monitor throughout treatment\n\n\u274c **CD4 count** - NOT required\n- CD4 is for monitoring HIV disease progression\n- Patient is HIV-negative (taking PrEP for prevention)\n- This is the trap answer - sounds important but irrelevant\n\n\u2705 **Condom counseling** - REQUIRED\n- PrEP doesn\'t prevent other STIs\n- Patient education on comprehensive prevention\n- Required counseling component\n\n\u274c **ART resistance testing** - NOT required\n- Resistance testing is for HIV+ patients on ART\n- Not relevant for HIV-negative person on PrEP\n- Another trap answer\n\n**NCLEX Teaching Point:**\n"Know what doesn\'t matter. Distinguish prevention vs treatment."\n\n**Student Trap:**\nStudents pick CD4 because it "sounds important" for HIV. This tests understanding of WHEN tests are indicated.',skill:["CLINICAL_JUDGMENT","TEACHING","MED_SAFETY"],concept:"HIV_PREVENTION",bloom:"APPLY",difficulty:5,examTip:"PrEP = Prevention for HIV-negative patients. CD4 count is only for HIV-positive patients. Don't get trapped by 'sounds important' answers."},{id:"ld_q04_priority_flip",text:"You have FOUR patients. Who do you see FIRST?",scenario:"**Patient A:** HIV, CD4 180 \u2022 Missed ART doses \u2022 No symptoms\n\n**Patient B:** HIV, CD4 350 \u2022 Severe headache + photophobia\n\n**Patient C:** HIV, CD4 90 \u2022 Stable, on prophylaxis\n\n**Patient D:** HIV-negative partner asking about PrEP",options:["Patient A - lowest CD4 and non-adherent","Patient B - neurological symptoms suggest CNS infection","Patient C - CD4 90 is critically low","Patient D - PrEP education is important for prevention"],correctIndex:1,timeLimit:45,consequences:{0:"\u274c **Patient B seizes in hallway!** Focused on labs instead of acute neuro symptoms. Now emergent intubation needed.",1:"\u2705 **Crisis averted.** LP shows cryptococcal meningitis. Amphotericin started. Patient stabilized in ICU.",2:"\u274c **Patient B found unresponsive!** CD4 90 is chronic; acute neuro symptoms were the emergency. Delayed care = poor outcome.",3:"\u274c **Patient B codes!** PrEP education can wait. Severe headache + photophobia = meningitis until proven otherwise."},rationale:'**Best choice: Patient B**\n\n**Why Patient B is the priority:**\n- Severe headache + photophobia = classic signs of meningitis\n- CNS infection is IMMEDIATELY life-threatening\n- CD4 350 is high enough for cryptococcal meningitis or toxoplasmosis\n- Symptoms indicate CURRENT emergency\n\n**Why the others are worse priorities:**\n\n**Patient A (CD4 180, missed doses):**\n- Low CD4 but NO symptoms = not immediate emergency\n- ART adherence counseling is important but not urgent\n- Can wait for acute patient\n\n**Patient C (CD4 90):**\n- Critically low CD4 BUT stable on prophylaxis\n- No acute symptoms described\n- Chronic management, not emergency\n\n**Patient D (PrEP education):**\n- Important preventive care\n- NOT an emergency\n- Can be scheduled/delayed\n\n**NCLEX Teaching Point:**\n"The sickest patient is not always the one with the worst labs."\n\n**Priority Framework:**\n1. **Acute symptoms** > Chronic labs\n2. **Neurological changes** = emergency\n3. **Stability** matters more than numbers\n\n**Classic NCLEX Trap:**\nStudents reflexively choose "lowest CD4" without reading symptoms. This tests clinical judgment over numbers.',skill:["CLINICAL_JUDGMENT","PRIORITY","ASSESSMENT"],concept:"HIV_COMPLICATIONS",bloom:"EVALUATE",difficulty:5,examTip:"Don't get distracted by the 'worst lab value'. Read the SYMPTOMS. Neuro changes = see first."},{id:"ld_q05_needlestick_time",text:"Nurse reports a needle stick 2 hours ago but says: 'I wanted to finish my assignment first.' What is the MOST serious issue now?",options:["Documentation delay - incident wasn't reported immediately","Emotional distress - nurse needs psychological support","Missed PEP window - time-sensitive intervention delayed","Exposure severity - need to determine source patient's status"],correctIndex:2,timeLimit:30,consequences:{0:"\u26a0\ufe0f **Documentation delayed but PEP started.** Better late than never, but golden window narrowing.",1:"\u274c **Emotional support given.** But PEP window continues to close. Now 3+ hours post-exposure. Effectiveness dropping.",2:"\u2705 **PEP initiated immediately.** Started within ideal window despite delay. Source patient testing underway.",3:"\u274c **Waiting for source labs!** PEP not started. Now 4+ hours post-exposure. Critical time wasted."},rationale:'**Best choice: Missed PEP window**\n\n**Why PEP delay is the priority:**\n- PEP (Post-Exposure Prophylaxis) must start within 72 hours (ideally <2 hours)\n- Every hour of delay reduces effectiveness\n- 2-hour delay is already significant\n- Time-sensitive medication must be given NOW\n\n**Why the others are less urgent:**\n\n**Documentation delay:**\n- Important for legal/tracking purposes\n- But doesn\'t affect health outcome\n- Can be done after PEP is started\n- Not a clinical priority\n\n**Emotional distress:**\n- Valid concern\n- But physical protection comes first\n- Psychological support can follow\n- ABCs before emotions\n\n**Exposure severity:**\n- Important to assess\n- But PEP should start while investigating\n- Don\'t delay treatment waiting for source patient labs\n- Treatment is more urgent than diagnosis\n\n**NCLEX Teaching Point:**\n"NCLEX punishes delayed urgency. Time-sensitive interventions > investigation."\n\n**PEP Window Rules:**\n- Ideal: <2 hours\n- Acceptable: <72 hours\n- After 72 hours: Usually not effective\n\n**Priority Order:**\n1. Start PEP immediately\n2. Test source patient\n3. Document incident\n4. Provide emotional support\n\n**Student Trap:**\nStudents think "we need to know the source first" - NO. Start PEP while investigating.',skill:["CLINICAL_JUDGMENT","PRIORITY","MED_SAFETY"],concept:"OCCUPATIONAL_SAFETY",bloom:"EVALUATE",difficulty:5,examTip:"Time-sensitive interventions can't wait for complete information. PEP now, investigate later."},{id:"ld_q06_final_boss_defend_wrong",text:"\u2620\ufe0f FINAL BOSS: Defend the WRONG answer. Patient with 'low immunity' exposed to draining wound. You chose NOT to isolate them. Defend your choice.",scenario:"**What Happened:**\n- You were charge nurse\n- ONE isolation room available\n- Patient C (draining MRSA wound) needed room\n- Immunocompromised roommate was at risk\n- You chose DIFFERENTLY\n\n**NOW DEFEND IT:**\n\nInfection control is demanding an explanation. Your manager is standing here. The family is asking questions.\n\n\u26a0\ufe0f You must make a CLINICAL ARGUMENT for why NOT isolating was defensible, despite the obvious risk.",options:["Resource scarcity - other patients had higher mortality risk","MRSA colonization vs infection - contact precautions sufficient","Patient autonomy - roommate understood and accepted risk","Cost-benefit analysis - isolation causes psychological harm"],correctIndex:1,timeLimit:90,hardMode:!0,finalBoss:!0,requiresDefense:!0,consequences:{0:"\u26a0\ufe0f **Defensible but weak.** Admin accepts 'higher mortality' reasoning. But family is filing complaint about transparency.",1:"\u2705 **Strongest defense.** MRSA colonization + proper contact precautions CAN be managed without isolation. Clinically sound.",2:"\u274c **Ethical violation.** 'Patient understood risk' doesn't protect YOU from negligence. Informed consent \u2260 adequate precautions.",3:"\u274c **Admin rejects this.** Psychological harm doesn't override infection control. You're being reassigned pending investigation."},rationale:'**FINAL BOSS RULES: DEFEND THE WRONG ANSWER**\n\nThis round tests whether you can:\n1. Recognize nuance in "wrong" decisions\n2. Construct clinical arguments under pressure\n3. Distinguish between wrong vs defensible\n\n**Why Option B (MRSA colonization) is most defensible:**\n\n- MRSA **colonization** \u2260 active infection\n- Contact precautions (gloves/gown) ARE evidence-based for colonization\n- Isolation is for **airborne** or **droplet** spread\n- Draining wound can be managed with proper technique\n\n**Why the others fail:**\n\n**A (Resource scarcity):**\n- Legally risky - suggests you gambled with patient safety\n- Admin might accept but family won\'t\n- Opens you to malpractice claims\n\n**C (Patient autonomy):**\n- Informed consent doesn\'t absolve you of duty\n- Immunocompromised patient can\'t truly "consent" to preventable infection\n- This is ethically and legally indefensible\n\n**D (Psychological harm):**\n- Isolation has side effects BUT\n- Infection control > psychological comfort\n- This argument will get you reassigned\n\n**THE LESSON:**\nEven "wrong" answers have DEGREES of defensibility. The game forces you to think like a charge nurse under investigation.\n\n**NCLEX Teaching Point:**\n"There is no perfect answer, but some wrong answers are less wrong than others. Know which battles you can defend."',skill:["CLINICAL_JUDGMENT","INFECTION_CONTROL","ETHICS","LEADERSHIP"],concept:"RESOURCE_ALLOCATION",bloom:"CREATE",difficulty:5,examTip:"Final Boss tests meta-cognition: Can you defend an imperfect choice with clinical reasoning? This is charge nurse reality."}]},gp={cdiff_outbreak:{id:"ld_escalation_cdiff",text:"\ud83d\udea8 ESCALATION: Two more patients now have diarrhea. Administration demands an action plan. What do you do FIRST?",scenario:"**New Development:**\n- Patients D & E: Acute watery diarrhea started 24h after ED visit\n- Both were in hallway beds near Patient A\n- Lab confirms: Patient A positive for C. diff\n- Infection control called emergency meeting",options:["Close the unit to new admissions immediately","Use your EMERGENCY PASS to get rapid cleaning/disinfection","Send mass email to all staff about handwashing","Call provider to order empiric vancomycin for all exposed patients"],correctIndex:1,timeLimit:45,requiresResource:"emergencyPasses",consequences:{0:"\u274c **Unit closed!** Administration furious. -20 beds = patients diverted. Your manager is now being questioned.",1:"\u2705 **EMERGENCY PASS used wisely.** Rapid bleach cleaning prevents further spread. Outbreak contained at 3 cases.",2:"\u274c **Email ignored.** C. diff spores survive alcohol sanitizer. Six patients now infected.",3:"\u274c **Provider refuses.** 'I'm not treating email notifications.' Outbreak continues. Seven cases by week end."},rationale:"Emergency passes exist for outbreaks. Rapid environmental disinfection (bleach) is the priority for C. diff spores. Closing units is administrative last resort.",skill:["CLINICAL_JUDGMENT","INFECTION_CONTROL"],bloom:"EVALUATE"},hiv_crisis:{id:"ld_escalation_hiv_crisis",text:"\ud83d\udea8 ESCALATION: Patient with CD4 count 12 now has seizures. You delayed care. What NOW?",scenario:"**Crisis:**\n- Patient seizing in hallway\n- No bed available in ICU\n- You have ONE PROVIDER CALL available\n- Code team is at another emergency",options:["Use PROVIDER CALL for emergency neurology consult","Start seizure precautions and wait for code team","Transfer to ICU immediately using your authority","Give lorazepam and hope it stops"],correctIndex:0,timeLimit:30,requiresResource:"providerCalls",consequences:{0:"\u2705 **PROVIDER CALL justified.** MD orders STAT MRI and antifungals. Cryptococcal meningitis confirmed. Patient survives with deficits.",1:"\u274c **Patient falls during seizure.** Head injury. Now intubated. Family considering lawsuit.",2:"\u274c **No ICU bed available!** Transfer request denied. Patient continues seizing. Permanent brain damage.",3:"\u274c **Seizure stops... then recurs.** Lorazepam bought 20 minutes. Not enough. Patient codes."},rationale:"Provider calls are for emergencies. CD4 of 12 + seizures = life-threatening opportunistic infection needing immediate specialist intervention.",skill:["CLINICAL_JUDGMENT","NEURO_ASSESSMENT"],bloom:"EVALUATE"},priority_code:{id:"ld_escalation_priority_code",text:"\ud83d\udea8 ESCALATION: Patient B is coding from unrecognized meningitis. Code team needs direction. What's your call?",scenario:"**Code Blue:**\n- Patient B unresponsive, seizure \u2192 cardiac arrest\n- Code team running ACLS\n- You're charge nurse - they need post-ROSC plan\n- One ISOLATION ROOM available for post-code care",options:["ICU admission, empiric antibiotics, isolation room for infection risk","Post-code monitoring in ED, save isolation room","Transfer to outside hospital with neuro-ICU","Continue code - outcome poor with delayed treatment"],correctIndex:0,timeLimit:30,requiresResource:"isolationRooms",consequences:{0:"\u2705 **ISOLATION ROOM used appropriately.** ROSC achieved. Amphotericin started. Critical but alive.",1:"\u274c **Staff exposure!** Cryptococcal meningitis now exposed entire ED. Three nurses out sick. Public health investigating.",2:"\u274c **Transfer denied.** 'Too unstable to move.' Patient dies during preparation. Medical examiner case.",3:"\u274c **Code called.** Family devastated. Your initial priority error led here. Preventable death."},rationale:"Post-ROSC care for infectious meningitis requires isolation. Staff safety + patient care. This is when resources get used.",skill:["CLINICAL_JUDGMENT","CODE_MANAGEMENT"],bloom:"EVALUATE"},needlestick_disaster:{id:"ld_escalation_needlestick",text:"\ud83d\udea8 ESCALATION: 4 hours post-exposure. PEP effectiveness dropping. Employee health closed. What now?",scenario:"**Critical Window:**\n- Now 4 hours since needle stick\n- Source patient: HIV+ (uncontrolled), HCV+, HBsAg unknown\n- Employee health closed until 8am (4 more hours)\n- You have one EMERGENCY PASS to override protocols",options:["Use EMERGENCY PASS - activate 24/7 occupational health on-call","Wait for employee health in morning, document well","Send RN to ED as 'patient' for PEP","Give leftover HIV meds from pharmacy stock"],correctIndex:0,timeLimit:30,requiresResource:"emergencyPasses",consequences:{0:"\u2705 **EMERGENCY PASS justified.** On-call MD orders PEP within 30 min. Optimal window maintained.",1:"\u274c **8 hours total delay.** PEP effectiveness significantly reduced. RN's anxiety through the roof. Risk counseling fails.",2:"\u274c **ED refuses.** 'This is occupational exposure, wrong department.' Now 6 hours delayed. Nurses' union filing grievance.",3:"\u274c **Medication error report filed.** Wrong PEP regimen given. Now need correct meds + report incident. Trust destroyed."},rationale:"PEP works best within 2 hours. Emergency passes exist for staff safety emergencies. This is textbook appropriate use.",skill:["CLINICAL_JUDGMENT","OCCUPATIONAL_SAFETY"],bloom:"EVALUATE"}};console.log("Firebase initialized:",{db:!!Hf,auth:!!Gf});const yp=async e=>{const t={NODE_ENV:"production",PUBLIC_URL:"/Term-3-Gaming",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_GEMINI_API_KEY||"AIzaSyAT-wsupPN4ROtkDzkYVJ9yRJiGa4LvvV8",n=[1e3,2e3,4e3,8e3,16e3];for(let c=0;c<=n.length;c++)try{var r,i,s,o,a;const n=await fetch("https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=".concat(t),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:e}]}]})});if(!n.ok)throw new Error("API Error: ".concat(n.status));return(null===(r=(await n.json()).candidates)||void 0===r||null===(i=r[0])||void 0===i||null===(s=i.content)||void 0===s||null===(o=s.parts)||void 0===o||null===(a=o[0])||void 0===a?void 0:a.text)||"Could not generate response."}catch(l){if(c===n.length)return"Sorry, the AI tutor is currently offline. Please try again later.";await new Promise(e=>setTimeout(e,n[c]))}};let vp="rn-mastery-game";"undefined"!==typeof window&&"undefined"!==typeof window.__app_id&&(vp=window.__app_id);const bp=[{id:"ch18",title:"Ch 18: Immune Assessment",icon:(0,np.jsx)(v,{className:"w-6 h-6"}),description:"Anatomy, function, and assessment.",questions:[{id:"ch18_q01",text:"The nurse is teaching a group of patients about first-line defense against infection. Which patient statement indicates the need for further education?",options:["The skin is a first-line defense.","A sneeze is a mechanical defense.","My saliva is a biochemical defense.","A cut with pus is a mechanical first-line defense."],correctIndex:3,rationale:"A cut with pus indicates an inflammatory response (second-line defense), not a first-line defense."},{id:"ch18_q02",text:"The nurse correlates the function of the thymus gland to which outcome?",options:["WBC development","T-cell development","Cytokine production","B-cell production"],correctIndex:1,rationale:"The thymus gland is the primary site for the maturation and development of T-cells."},{id:"ch18_q03",text:"Which type of leukocyte releases heparin as part of the inflammatory response?",options:["Basophil","Eosinophil","Monocyte","Neutrophil"],correctIndex:0,rationale:"Basophils release histamine and heparin during the inflammatory response."},{id:"ch18_q04",text:"A nurse is caring for a patient who is experiencing leukocytosis. Which action is most appropriate?",options:["Assessing for source of infection","Assessing for bleeding","Reverse isolation","Electric razor use"],correctIndex:0,rationale:"Leukocytosis (elevated WBC) is a sign of infection. The priority is to find the cause."},{id:"ch18_q05",text:"Breastfeeding provides which type of immunity?",options:["Natural Active","Artificial Active","Natural Passive","Artificial Passive"],correctIndex:2,rationale:"Natural Passive Immunity occurs when antibodies are passed from mother to baby (placenta/breastmilk)."},{id:"ch18_q06",text:"Which age-related change increases an older adult's susceptibility to cancer?",options:["Thymus involution","Increased autoantibodies","Decreased Cytotoxic T-cell surveillance","Increased vaccine response"],correctIndex:2,rationale:"Decreased surveillance by Cytotoxic T-cells allows malignant cells to proliferate."},{id:"ch18_q07",text:"A 'Left Shift' in WBC differential indicates:",options:["Viral infection","Acute bacterial infection","Parasitic infection","Allergy"],correctIndex:1,rationale:"A 'Left Shift' means increased immature neutrophils (bands), a sign of acute bacterial infection."},{id:"ch18_q08",text:"Which finding suggests potential immune deficiency?",options:["BP 120/80","Frequent, recurrent infections","Seasonal allergies","Mild fatigue"],correctIndex:1,rationale:"Frequent, severe, or recurrent infections are the hallmark of immune deficiency."},{id:"ch18_q09",text:"Which organ filters old blood cells and foreign antigens from the blood?",options:["Thymus","Spleen","Tonsils","Bone Marrow"],correctIndex:1,rationale:"The spleen filters blood and mounts immune responses to blood-borne pathogens."},{id:"ch18_q10",text:"Which immunoglobulin crosses the placenta?",options:["IgM","IgA","IgG","IgE"],correctIndex:2,rationale:"IgG is the most abundant and the only Ig that crosses the placenta."},{id:"ch18_q11",text:"A hard, fixed, non-tender lymph node suggests:",options:["Infection","Malignancy","Aging","Inflammation"],correctIndex:1,rationale:"Malignant nodes are hard, fixed, and non-tender. Infected nodes are soft and tender."},{id:"ch18_q12",text:"Elevated Eosinophils indicate:",options:["Bacterial infection","Viral infection","Parasitic infection/Allergy","Autoimmune flare"],correctIndex:2,rationale:"Eosinophils rise during allergic reactions and parasitic infections."},{id:"ch18_q13",text:"Which nutrient is critical for antibody synthesis?",options:["Protein","Carbs","Fats","Fiber"],correctIndex:0,rationale:"Protein is essential for antibody production. Malnutrition compromises immunity."},{id:"ch18_q14",text:"Primary function of B-Lymphocytes?",options:["Cellular attack","Phagocytosis","Humoral immunity (Antibodies)","Histamine release"],correctIndex:2,rationale:"B-cells produce antibodies (Humoral Immunity)."},{id:"ch18_q15",text:"Inflammation causes which vascular change?",options:["Vasoconstriction","Vasodilation & permeability","Decreased flow","Decreased permeability"],correctIndex:1,rationale:"Vasodilation (heat/redness) and permeability (swelling) allow immune cells to reach the site."},{id:"ch18_q16",text:"Natural Killer (NK) cells are part of which immunity?",options:["Adaptive","Innate","Passive","Artificial"],correctIndex:1,rationale:"NK cells provide immediate, non-specific defense as part of innate immunity."},{id:"ch18_q17",text:"Which WBC is the 'first responder' to bacterial infection?",options:["Lymphocyte","Monocyte","Neutrophil","Basophil"],correctIndex:2,rationale:"Neutrophils are the most abundant and first to arrive at infection sites."},{id:"ch18_q18",text:"Complement system activation results in:",options:["Decreased inflammation","Pathogen lysis","Antibody suppression","WBC destruction"],correctIndex:1,rationale:"Complement creates membrane attack complexes that lyse pathogens."},{id:"ch18_q19",text:"Memory B-cells provide:",options:["Immediate response","Long-term immunity","Phagocytosis","Inflammation"],correctIndex:1,rationale:"Memory cells enable faster, stronger responses upon re-exposure."},{id:"ch18_q20",text:"Which finding suggests lymphoma?",options:["Painful, mobile nodes","Painless, fixed lymphadenopathy","Fever only","Normal CBC"],correctIndex:1,rationale:"Painless, fixed nodes that don't resolve are concerning for malignancy."},{id:"ch18_q21",text:"Neutropenia increases risk for:",options:["Bleeding","Infection","Allergy","Clotting"],correctIndex:1,rationale:"Low neutrophils (<1500) significantly increase infection risk."},{id:"ch18_q22",text:"Monocytes differentiate into:",options:["Neutrophils","Macrophages","T-cells","Platelets"],correctIndex:1,rationale:"Monocytes leave blood and become tissue macrophages."},{id:"ch18_q23",text:"IgM indicates:",options:["Past infection","Active/recent infection","Vaccine response","Allergy"],correctIndex:1,rationale:"IgM is the first antibody produced during acute infection."},{id:"ch18_q24",text:"Interferons are released in response to:",options:["Bacteria","Viruses","Parasites","Allergens"],correctIndex:1,rationale:"Interferons 'interfere' with viral replication."},{id:"ch18_q25",text:"CD4 cells are also called:",options:["Killer T-cells","Helper T-cells","B-cells","NK cells"],correctIndex:1,rationale:"CD4+ T-cells are helper cells that coordinate immune responses."}]},{id:"ch19",title:"Ch 19: Immune Disorders",icon:(0,np.jsx)(b,{className:"w-6 h-6"}),description:"Hypersensitivities & Autoimmunity.",questions:[{id:"ch19_q01",text:"Which Ig is a mediator in allergic responses?",options:["IgA","IgD","IgE","IgG"],correctIndex:2,rationale:"IgE binds to mast cells and triggers histamine release in allergies."},{id:"ch19_q02",text:"Latex sensitivity is cross-reactive with:",options:["Strawberries","Shellfish","Bananas/Avocados","Peanuts"],correctIndex:2,rationale:"Bananas, avocados, and kiwis share similar proteins with latex."},{id:"ch19_q03",text:"Signs of Anaphylaxis (Type I) include:",options:["Delayed rash","Jaundice","Stridor, wheezing, hypotension","Joint pain"],correctIndex:2,rationale:"Stridor and hypotension indicate life-threatening airway constriction and shock."},{id:"ch19_q04",text:"A hemolytic transfusion reaction is which type?",options:["Type I","Type II (Cytotoxic)","Type III","Type IV"],correctIndex:1,rationale:"Antibodies attacking donor RBCs is a Type II Cytotoxic reaction."},{id:"ch19_q05",text:"SLE (Lupus) is which type of hypersensitivity?",options:["Type I","Type II","Type III (Immune Complex)","Type IV"],correctIndex:2,rationale:"SLE involves immune complex deposition in tissues (Type III)."},{id:"ch19_q06",text:"Priority for a severe bee sting reaction?",options:["Oral antihistamine","Epinephrine IM","Ice","Drive to hospital"],correctIndex:1,rationale:"Epinephrine is the life-saving priority to reverse anaphylaxis."},{id:"ch19_q07",text:"The TB skin test (PPD) is which reaction type?",options:["Type I","Type II","Type III","Type IV (Delayed)"],correctIndex:3,rationale:"PPD is a T-cell mediated Delayed (Type IV) reaction."},{id:"ch19_q08",text:"First-line drug for angioedema of the lips/tongue?",options:["Fluids","Epinephrine","Steroids","Benadryl"],correctIndex:1,rationale:"Airway compromise requires Epinephrine immediately."},{id:"ch19_q09",text:"Goodpasture's syndrome (antibodies attack lung/kidney) is:",options:["Autoimmunity","Immunodeficiency","Gammopathy","Alloimmunity"],correctIndex:0,rationale:"Autoimmunity is the loss of self-tolerance attacking own tissues."},{id:"ch19_q10",text:"Crucial intervention for B-cell deficiency?",options:["Avoid live vaccines","Daily steroids","Plasmapheresis","High potassium"],correctIndex:0,rationale:"Without antibodies, live vaccines can cause the actual disease."},{id:"ch19_q11",text:"Serum Sickness is which type of reaction?",options:["Type I","Type II","Type III","Type IV"],correctIndex:2,rationale:"Serum sickness is a Type III immune complex reaction."},{id:"ch19_q12",text:"Sign of allergic reaction to antibiotics?",options:["HR 72","Diffuse pruritus/urticaria","Hunger","Low urine output"],correctIndex:1,rationale:"Itching and hives are classic signs of allergy."},{id:"ch19_q13",text:"Important instruction before allergy skin testing?",options:["Stop antihistamines 48-72h prior","Fast 12h","Apply lotion","Double allergy meds"],correctIndex:0,rationale:"Antihistamines suppress the skin response and cause false negatives."},{id:"ch19_q14",text:"Hyperacute transplant rejection occurs:",options:["Minutes to hours","6 months","Years","If meds stopped"],correctIndex:0,rationale:"Hyperacute rejection is immediate and antibody-mediated."},{id:"ch19_q15",text:"Cell type responsible for Type IV reactions?",options:["B-cells","Sensitized T-cells","Neutrophils","Mast cells"],correctIndex:1,rationale:"Type IV is cell-mediated by T-cells, not antibodies."},{id:"ch19_q16",text:"Which medication suppresses Type I allergic reactions?",options:["Antihistamines","NSAIDs","ACE inhibitors","Beta blockers"],correctIndex:0,rationale:"Antihistamines block histamine release from mast cells in Type I reactions."},{id:"ch19_q17",text:"Hemolytic transfusion reaction is which type?",options:["Type I","Type II","Type III","Type IV"],correctIndex:1,rationale:"Type II cytotoxic reaction occurs when antibodies attack transfused RBCs."},{id:"ch19_q18",text:"Contact dermatitis from poison ivy is which type?",options:["Type I","Type II","Type III","Type IV"],correctIndex:3,rationale:"Poison ivy causes a delayed Type IV cell-mediated hypersensitivity."},{id:"ch19_q19",text:"Classic sign of Systemic Lupus Erythematosus (SLE)?",options:["Butterfly rash","Spider veins","Clubbing","Pallor"],correctIndex:0,rationale:"Malar (butterfly) rash across cheeks and nose is characteristic of SLE."},{id:"ch19_q20",text:"Priority nursing action during anaphylaxis?",options:["Establish IV access","Administer epinephrine","Get vital signs","Call physician"],correctIndex:1,rationale:"Epinephrine is the first-line treatment to reverse bronchospasm and vasodilation."},{id:"ch19_q21",text:"Which immunosuppressant requires monitoring for nephrotoxicity?",options:["Azathioprine","Prednisone","Cyclosporine","Methotrexate"],correctIndex:2,rationale:"Cyclosporine can damage kidneys; monitor creatinine and BUN levels."},{id:"ch19_q22",text:"Positive ANA test suggests which condition?",options:["Diabetes","Hypertension","Autoimmune disorder","Bacterial infection"],correctIndex:2,rationale:"Antinuclear antibodies (ANA) indicate autoimmune conditions like SLE."},{id:"ch19_q23",text:"Chronic transplant rejection time frame?",options:["Minutes","Hours to days","Months to years","Never occurs"],correctIndex:2,rationale:"Chronic rejection is a slow progressive process occurring months to years post-transplant."},{id:"ch19_q24",text:"Food most commonly causing Type I allergies in children?",options:["Wheat","Peanuts","Corn","Rice"],correctIndex:1,rationale:"Peanuts cause severe IgE-mediated allergic reactions and anaphylaxis in children."},{id:"ch19_q25",text:"Teaching point for clients with latex allergy?",options:["Only avoid powdered gloves","Report to healthcare providers","Allergy decreases over time","Safe to use latex at home"],correctIndex:1,rationale:"Clients must inform all healthcare providers to ensure latex-free equipment and gloves."}]},{id:"ch20",title:"Ch 20: Connective Tissue",icon:(0,np.jsx)(w,{className:"w-6 h-6"}),description:"RA, Lupus, Gout, Scleroderma.",questions:[{id:"ch20_q01",text:"Highest risk for Osteoarthritis (OA)?",options:["40yo admin","45yo construction","55yo obese female machinist","60yo accountant"],correctIndex:2,rationale:"Risk factors: Age >55, Female, Obesity, Repetitive motion."},{id:"ch20_q02",text:"Non-pharm therapy for Lupus?",options:["Avoid sun/Use sunscreen","Increase sun","Limit fluids","High protein only"],correctIndex:0,rationale:"Sun exposure triggers SLE flares (photosensitivity)."},{id:"ch20_q03",text:"Finding associated with RA (not OA)?",options:["Asymmetrical pain","Heberden's nodes","Symmetrical pain/Morning stiffness >1hr","Crepitus"],correctIndex:2,rationale:"RA is systemic, symmetrical, and causes prolonged morning stiffness."},{id:"ch20_q04",text:"Medication for ACUTE Gout flare?",options:["Allopurinol","Colchicine","Febuxostat","Methotrexate"],correctIndex:1,rationale:"Colchicine treats acute inflammation. Allopurinol prevents future attacks."},{id:"ch20_q05",text:"In CREST syndrome, 'R' stands for:",options:["Rash","Raynaud's Phenomenon","Renal","Rigidity"],correctIndex:1,rationale:"Calcinosis, Raynaud's, Esophageal dysfunction, Sclerodactyly, Telangiectasia."},{id:"ch20_q06",text:"Dietary modification for Gout?",options:["High protein","Low purine (no organ meat/alcohol)","Gluten-free","Fluid restriction"],correctIndex:1,rationale:"Purines break down into uric acid, which causes Gout."},{id:"ch20_q07",text:"Adverse effect of Methotrexate?",options:["Weight gain","Bone marrow suppression","Insomnia","Hyperactivity"],correctIndex:1,rationale:"Methotrexate causes immunosuppression/bone marrow suppression."},{id:"ch20_q08",text:"Heberden's nodes are a sign of:",options:["RA","Osteoarthritis","Gout","Lupus"],correctIndex:1,rationale:"Bony overgrowths on distal joints (Heberden's) are classic OA."},{id:"ch20_q09",text:"Fibromyalgia involves:",options:["Inflammation","Autoimmunity","Central sensitization/Amplified pain","Uric acid"],correctIndex:2,rationale:"Fibromyalgia is a non-inflammatory chronic pain syndrome."},{id:"ch20_q10",text:"Hallmark of Sj\xf6gren's syndrome?",options:["Dry eyes/mouth","Weakness","Kidney stones","Tremors"],correctIndex:0,rationale:"Sj\xf6gren's attacks moisture glands (eyes/mouth)."},{id:"ch20_q11",text:"Specific lab for SLE (Lupus)?",options:["RF","Anti-dsDNA","Uric Acid","CRP"],correctIndex:1,rationale:"Anti-dsDNA and Anti-Smith are highly specific for Lupus."},{id:"ch20_q12",text:"Scleroderma patient with swallowing difficulty?",options:["Esophageal dysfunction","Infection","Anxiety","Side effect"],correctIndex:0,rationale:"Esophageal hardening causes dysphagia (CREST)."},{id:"ch20_q13",text:"Best exercise for knee OA?",options:["Jogging","Heavy weights","Swimming/Water aerobics","Bed rest"],correctIndex:2,rationale:"Low-impact water exercise reduces joint stress."},{id:"ch20_q14",text:"Raynaud's trigger to avoid?",options:["Warmth","Cold & Stress","Water","Elevation"],correctIndex:1,rationale:"Cold and stress trigger vasospasm in digits."},{id:"ch20_q15",text:"Indication for Arthroplasty (Joint Replacement)?",options:["Diagnosis","Uncontrolled pain/mobility loss","Age <40","Cream failure"],correctIndex:1,rationale:"Surgery is the last resort for severe pain/loss of function."},{id:"ch20_q16",text:"First-line DMARD for Rheumatoid Arthritis?",options:["Prednisone","Methotrexate","Ibuprofen","Acetaminophen"],correctIndex:1,rationale:"Methotrexate is the gold standard DMARD to slow RA progression."},{id:"ch20_q17",text:"Lab value elevated in Rheumatoid Arthritis?",options:["Glucose","Rheumatoid Factor (RF)","Hemoglobin","Sodium"],correctIndex:1,rationale:"Rheumatoid Factor is an autoantibody present in 70-80% of RA patients."},{id:"ch20_q18",text:"Teaching for patient on Methotrexate?",options:["Take with grapefruit juice","Avoid folic acid","Avoid alcohol","Double dose if missed"],correctIndex:2,rationale:"Alcohol increases hepatotoxicity risk with Methotrexate."},{id:"ch20_q19",text:"Joint most commonly affected by Gout?",options:["Hip","Shoulder","Great toe (MTP joint)","Elbow"],correctIndex:2,rationale:"Gout classically presents in the first metatarsophalangeal joint (big toe)."},{id:"ch20_q20",text:"Complication of untreated Osteoarthritis?",options:["Increased flexibility","Joint deformity & disability","Hyperglycemia","Anemia"],correctIndex:1,rationale:"Progressive cartilage loss leads to deformity and loss of function."},{id:"ch20_q21",text:"Medication that can trigger Gout attack?",options:["Thiazide diuretics","Beta blockers","Calcium channel blockers","ACE inhibitors"],correctIndex:0,rationale:"Diuretics increase uric acid levels by reducing renal excretion."},{id:"ch20_q22",text:"Lab test to confirm diagnosis of Gout?",options:["CBC","Synovial fluid analysis for urate crystals","Chest X-ray","EKG"],correctIndex:1,rationale:"Needle-shaped urate crystals in joint fluid confirm Gout."},{id:"ch20_q23",text:"Expected X-ray finding in Osteoarthritis?",options:["Joint space widening","Joint space narrowing & bone spurs","Fractures","Soft tissue swelling only"],correctIndex:1,rationale:"OA shows decreased joint space and osteophytes (bone spurs)."},{id:"ch20_q24",text:"Priority teaching for Lupus patient about pregnancy?",options:["Safe to get pregnant anytime","High-risk; requires specialist care","Stop all medications","Avoid prenatal vitamins"],correctIndex:1,rationale:"SLE pregnancies are high-risk due to flares and complications; need MFM specialist."},{id:"ch20_q25",text:"Biologic therapy for severe Rheumatoid Arthritis?",options:["Aspirin","TNF inhibitors (Etanercept)","Tylenol","Vitamin D"],correctIndex:1,rationale:"TNF-alpha inhibitors target specific immune pathways in RA."}]},{id:"ch21",title:"Ch 21: MDROs",icon:(0,np.jsx)(I,{className:"w-6 h-6"}),description:"Transmission & Infection Control.",questions:[{id:"ch21_q01",text:"Contact Transmission involves:",options:["Insect bite","Direct/Indirect contact","Airborne particles","Ingestion"],correctIndex:1,rationale:"Direct contact or contact with contaminated surfaces."},{id:"ch21_q02",text:"Vector-Borne Transmission involves:",options:["Insects (ticks/mosquitoes)","Direct contact","Breathing","Food"],correctIndex:0,rationale:"Vectors are living organisms (insects) that transmit disease."},{id:"ch21_q03",text:"Airborne Transmission involves:",options:["Doorknobs","Breathing small suspended particles","Food","Droplets >5 microns"],correctIndex:1,rationale:"Airborne pathogens remain suspended in air for long periods."},{id:"ch21_q04",text:"Common MDRO requiring Contact Precautions?",options:["Strep","MRSA","Flu","Shingles"],correctIndex:1,rationale:"MRSA is a resistant organism spread by contact."},{id:"ch21_q05",text:"Priority for C. diff?",options:["Mask","Soap & Water hand wash","Negative pressure","Open door"],correctIndex:1,rationale:"Alcohol does not kill C. diff spores; mechanical washing is required."},{id:"ch21_q06",text:"VRE is spread via:",options:["Contact","Airborne","Water","Mosquitoes"],correctIndex:0,rationale:"VRE survives on surfaces/hands; spread by contact."},{id:"ch21_q07",text:"Highest risk for MDRO?",options:["Broken arm","ICU with central line/antibiotics","Cold","Outpatient"],correctIndex:1,rationale:"Invasive devices and antibiotic use increase MDRO risk."},{id:"ch21_q08",text:"Acinetobacter baumannii is associated with:",options:["Food","VAP/Wound infections in ICU","Sore throat","Ticks"],correctIndex:1,rationale:"Opportunistic pathogen common in ICUs/ventilators."},{id:"ch21_q09",text:"Antibiotic Stewardship means:",options:["Antibiotics for all","Right drug/dose/duration","Creating drugs","No antibiotics"],correctIndex:1,rationale:"Optimizing use to prevent resistance."},{id:"ch21_q10",text:"Donning PPE order?",options:["Gloves first","Gown -> Gloves","Mask -> Gloves","Gloves -> Mask"],correctIndex:1,rationale:"Gown first, then gloves over cuffs."},{id:"ch21_q11",text:"Most contaminated PPE item (remove first)?",options:["Mask","Gown","Gloves","Goggles"],correctIndex:2,rationale:"Gloves are most contaminated."},{id:"ch21_q12",text:"CRE are dangerous because:",options:["Viral","Resistant to carbapenems","Affect kids","Waterborne"],correctIndex:1,rationale:"Resistant to last-resort antibiotics."},{id:"ch21_q13",text:"Cohort isolation involves:",options:["Same organism roommates","Any roommate","Home","Negative pressure"],correctIndex:0,rationale:"Patients with the SAME active infection can share a room."},{id:"ch21_q14",text:"Best way to break transmission?",options:["Diagnosis","Hand Hygiene","Nutrition","Vaccines"],correctIndex:1,rationale:"Hand hygiene is #1 for preventing spread."},{id:"ch21_q15",text:"Standard Precautions apply to:",options:["Infected only","HIV only","All patients","Surgical only"],correctIndex:2,rationale:"Universal standard for all patients."},{id:"ch21_q16",text:"Transmission-based precaution for active TB?",options:["Contact","Droplet","Airborne","Standard only"],correctIndex:2,rationale:"TB requires airborne precautions with N95 respirator."},{id:"ch21_q17",text:"PPE removal (doffing) order?",options:["Mask first","Gloves -> Gown -> Mask -> Goggles","Gown first","Goggles first"],correctIndex:1,rationale:"Remove most contaminated items first (gloves) before touching face."},{id:"ch21_q18",text:"Type of precaution for Influenza?",options:["Contact","Airborne","Droplet","Protective environment"],correctIndex:2,rationale:"Influenza spreads via large droplets; requires surgical mask."},{id:"ch21_q19",text:"ESBL organisms are resistant to:",options:["All antibiotics","Beta-lactam antibiotics","Antifungals","Antivirals"],correctIndex:1,rationale:"Extended-spectrum beta-lactamase breaks down penicillins and cephalosporins."},{id:"ch21_q20",text:"Contact precautions require:",options:["N95 mask","Gown and gloves","Negative pressure room","PAPR"],correctIndex:1,rationale:"Gown and gloves prevent transmission via direct contact."},{id:"ch21_q21",text:"CRE stands for:",options:["Carbapenem-Resistant Enterobacteriaceae","Common Respiratory Enterococcus","Chronic Renal Encephalopathy","Continuous Renal Excretion"],correctIndex:0,rationale:"CRE are 'superbugs' resistant to carbapenem antibiotics."},{id:"ch21_q22",text:"Negative pressure room is required for:",options:["MRSA","C. diff","Tuberculosis","VRE"],correctIndex:2,rationale:"Negative pressure prevents airborne particles from escaping the room."},{id:"ch21_q23",text:"Priority action if exposed to blood/bodily fluids?",options:["Document later","Wash area immediately & report","Continue working","Wait until end of shift"],correctIndex:1,rationale:"Immediate washing and reporting enables timely post-exposure prophylaxis."},{id:"ch21_q24",text:"MDROs develop resistance primarily due to:",options:["Proper antibiotic use","Overuse and misuse of antibiotics","Handwashing","Vaccination"],correctIndex:1,rationale:"Inappropriate antibiotic use drives selection of resistant strains."},{id:"ch21_q25",text:"Which patient requires protective environment (reverse isolation)?",options:["MRSA infection","Neutropenic cancer patient","Diabetic","Post-op day 1"],correctIndex:1,rationale:"Immunocompromised patients need protection from environmental pathogens."}]},{id:"ch22",title:"Ch 22: HIV/AIDS",icon:(0,np.jsx)(x,{className:"w-6 h-6"}),description:"Etiology, Progression, Management.",questions:[{id:"ch22_q01",text:"Correct HIV progression?",options:["Acute->AIDS","Viral transmission -> Seroconversion -> Acute -> Chronic -> AIDS","AIDS first","Transmission->AIDS"],correctIndex:1,rationale:"Transmission > Antibodies > Acute Sx > Latency > AIDS."},{id:"ch22_q02",text:"Sign of deterioration in HIV?",options:["Undetectable load","Weight loss >10%","Night sweats","CD4 600"],correctIndex:1,rationale:"Wasting syndrome (>10% loss) indicates progression."},{id:"ch22_q03",text:"PrEP is:",options:["Vaccine","Daily med to prevent HIV","After sex","Cure"],correctIndex:1,rationale:"Pre-Exposure Prophylaxis prevents acquisition."},{id:"ch22_q04",text:"CD4 count of 180 indicates:",options:["Acute HIV","AIDS","Adherence","Normal"],correctIndex:1,rationale:"AIDS < 200 CD4 cells."},{id:"ch22_q05",text:"Opportunistic Infection (OI) in AIDS?",options:["Strep","PCP Pneumonia","Flu","Eczema"],correctIndex:1,rationale:"PCP is a classic OI."},{id:"ch22_q06",text:"Goal of ART?",options:["Cure","Undetectable viral load","Increase virus","Decrease CD4"],correctIndex:1,rationale:"Suppress virus to undetectable levels."},{id:"ch22_q07",text:"Kaposi's Sarcoma presents as:",options:["Purple/red skin lesions","White patches","Diarrhea","Blindness"],correctIndex:0,rationale:"Cancer of blood vessels causing purple lesions."},{id:"ch22_q08",text:"Needle stick priority?",options:["Wait","PEP within 72h","Antibiotics","Retire"],correctIndex:1,rationale:"Post-Exposure Prophylaxis ASAP (max 72h)."},{id:"ch22_q09",text:"Undetectable viral load means:",options:["Cured","Gone","Untransmittable (U=U)","Stop meds"],correctIndex:2,rationale:"Cannot transmit sexually, but must keep taking meds."},{id:"ch22_q10",text:"Oral Thrush presents as:",options:["Blisters","Creamy white patches","Bleeding","Taste loss"],correctIndex:1,rationale:"Fungal infection, white patches."},{id:"ch22_q11",text:"HIV Screening/Confirmation test?",options:["CBC","CXR","4th Gen Antigen/Antibody","UA"],correctIndex:2,rationale:"Detects p24 antigen and antibodies early."},{id:"ch22_q12",text:"IRIS is:",options:["Collapse","Immune recovery causing inflammation","Stop meds","Mutation"],correctIndex:1,rationale:"Recovering immune system attacks old infections."},{id:"ch22_q13",text:"Vertical Transmission:",options:["Sex","Needles","Mother-to-child","Blood"],correctIndex:2,rationale:"Perinatal transmission."},{id:"ch22_q14",text:"ART Adherence requirement:",options:["When sick","95%+","Double dose","Stop if side effects"],correctIndex:1,rationale:"Strict adherence prevents resistance."},{id:"ch22_q15",text:"TB in HIV:",options:["Rare","Leading cause of death","Untreatable","No isolation"],correctIndex:1,rationale:"Major coinfection and killer."},{id:"ch22_q16",text:"Window period for HIV testing refers to:",options:["Treatment duration","Time between infection and detectable antibodies","CD4 recovery time","Viral load doubling time"],correctIndex:1,rationale:"It takes 2-12 weeks for antibodies to develop; tests may be negative during this time."},{id:"ch22_q17",text:"Common side effect of Efavirenz (NNRTI)?",options:["Weight gain","Vivid dreams/CNS effects","Hair loss","Diarrhea"],correctIndex:1,rationale:"Efavirenz commonly causes neuropsychiatric side effects including vivid dreams."},{id:"ch22_q18",text:"PrEP (Pre-Exposure Prophylaxis) is for:",options:["Treating HIV infection","Preventing HIV in high-risk individuals","Curing AIDS","Treating opportunistic infections"],correctIndex:1,rationale:"PrEP (Truvada/Descovy) reduces HIV acquisition risk by >90% when taken consistently."},{id:"ch22_q19",text:"CD4 count indicating severe immunosuppression/AIDS?",options:[">500","350-500","200-350","<200"],correctIndex:3,rationale:"CD4 <200 defines AIDS and dramatically increases opportunistic infection risk."},{id:"ch22_q20",text:"Cryptococcal meningitis in AIDS patients presents with:",options:["Rash","Severe headache & altered mental status","Cough","Diarrhea"],correctIndex:1,rationale:"Fungal meningitis causes headache, fever, and neurological changes."},{id:"ch22_q21",text:"Adherence requirement for ART effectiveness?",options:["50%","75%",">95%","Take when sick"],correctIndex:2,rationale:"Strict adherence >95% prevents resistance and maintains viral suppression."},{id:"ch22_q22",text:"Wasting syndrome (HIV-associated) is defined as:",options:["Weight gain",">10% unintentional weight loss","Increased muscle mass","Fluid retention"],correctIndex:1,rationale:"AIDS wasting involves severe involuntary weight loss with muscle depletion."},{id:"ch22_q23",text:"Integrase inhibitor example?",options:["Raltegravir","Efavirenz","Lamivudine","Ritonavir"],correctIndex:0,rationale:"Raltegravir (Isentress) blocks HIV integration into host DNA."},{id:"ch22_q24",text:"Patient education about ART resistance?",options:["Missing doses has no effect","Resistance develops with inconsistent use","Double dose if missed","Stop meds if feeling better"],correctIndex:1,rationale:"Inconsistent dosing allows viral replication and mutation to resistant strains."},{id:"ch22_q25",text:"Legal requirement for HIV status disclosure?",options:["Must tell everyone","Varies by state; often required to inform sexual partners","Never required","Only employers need to know"],correctIndex:1,rationale:"Laws vary; many states criminalize non-disclosure to sexual partners."}]},{id:"quiz1",title:"Review for Quiz 1",icon:(0,np.jsx)(E,{className:"w-6 h-6"}),description:"Mixed Review: Chapters 18-22.",questions:[{id:"quiz1_q01",text:"Which antibody provides passive immunity in breast milk?",options:["IgG","IgM","IgA","IgE"],correctIndex:2,rationale:"IgA is secreted in mucous membranes and breast milk."},{id:"quiz1_q02",text:"Contact dermatitis is which hypersensitivity type?",options:["Type I","Type II","Type III","Type IV"],correctIndex:3,rationale:"Type IV delayed cell-mediated reaction (e.g., poison ivy)."},{id:"quiz1_q03",text:"Heberden's nodes are found in:",options:["Rheumatoid Arthritis","Osteoarthritis","Gout","Lupus"],correctIndex:1,rationale:"Bony enlargements at DIP joints characteristic of OA."},{id:"quiz1_q04",text:"Why is soap and water required for C. diff?",options:["Smells better","Alcohol doesn't kill spores","Faster","Required by law"],correctIndex:1,rationale:"Mechanical action of soap and water removes C. diff spores; alcohol doesn't."},{id:"quiz1_q05",text:"CD4 count at AIDS diagnosis?",options:[">500","350-500","200-350","<200"],correctIndex:3,rationale:"AIDS is defined by CD4 <200 or opportunistic infections."},{id:"quiz1_q06",text:"Which cell type produces antibodies?",options:["T-cells","Plasma cells (B-cells)","Neutrophils","Basophils"],correctIndex:1,rationale:"B-cells differentiate into plasma cells that secrete antibodies."},{id:"quiz1_q07",text:"Butterfly rash is associated with:",options:["RA","OA","SLE (Lupus)","Gout"],correctIndex:2,rationale:"Malar rash across cheeks/nose is classic for Systemic Lupus Erythematosus."},{id:"quiz1_q08",text:"Priority action during anaphylaxis?",options:["Call physician","Administer epinephrine","Start IV","Take vital signs"],correctIndex:1,rationale:"Epinephrine IM is the first-line life-saving treatment."},{id:"quiz1_q09",text:"MRSA requires which precautions?",options:["Standard only","Contact","Airborne","Droplet"],correctIndex:1,rationale:"MRSA spreads via direct contact; gown and gloves required."},{id:"quiz1_q10",text:"Goal of antiretroviral therapy (ART)?",options:["Cure HIV","Increase CD4","Undetectable viral load","Kill all T-cells"],correctIndex:2,rationale:"ART suppresses HIV replication to undetectable levels."},{id:"quiz1_q11",text:"Inflammation is part of which immunity?",options:["Adaptive","Innate","Passive","Artificial"],correctIndex:1,rationale:"Inflammation is a non-specific innate immune response."},{id:"quiz1_q12",text:"Serum sickness is which type of reaction?",options:["Type I","Type II","Type III","Type IV"],correctIndex:2,rationale:"Type III immune complex-mediated hypersensitivity."},{id:"quiz1_q13",text:"Which medication prevents Gout attacks long-term?",options:["Colchicine","Allopurinol","Prednisone","NSAIDs"],correctIndex:1,rationale:"Allopurinol reduces uric acid production to prevent future flares."},{id:"quiz1_q14",text:"Hand hygiene is most effective at preventing:",options:["Aging","MDRO transmission","Genetic diseases","Cancer"],correctIndex:1,rationale:"Proper handwashing is the #1 method to break infection chain."},{id:"quiz1_q15",text:"Kaposi's Sarcoma appears as:",options:["White patches","Purple skin lesions","Yellow nodules","Clear blisters"],correctIndex:1,rationale:"Vascular cancer causing purple/red lesions in AIDS patients."},{id:"quiz1_q16",text:"Which antibody is first to respond in infection?",options:["IgA","IgE","IgG","IgM"],correctIndex:3,rationale:"IgM appears first during acute infection ('M for iMmediate')."},{id:"quiz1_q17",text:"Anaphylaxis involves which antibody?",options:["IgA","IgE","IgG","IgM"],correctIndex:1,rationale:"IgE binds to allergens and triggers mast cell degranulation."},{id:"quiz1_q18",text:"Lab most specific for SLE?",options:["CBC","Anti-dsDNA","CRP","Uric acid"],correctIndex:1,rationale:"Anti-dsDNA and Anti-Smith antibodies are highly specific for Lupus."},{id:"quiz1_q19",text:"Standard precautions apply to:",options:["Infected patients only","HIV patients only","All patients","Surgical patients only"],correctIndex:2,rationale:"Standard precautions are used universally for all patient care."},{id:"quiz1_q20",text:"Undetectable = Untransmittable (U=U) means:",options:["HIV is cured","Cannot transmit HIV sexually","Can stop medications","CD4 is restored"],correctIndex:1,rationale:"Sustained viral suppression prevents sexual transmission of HIV."},{id:"quiz1_q21",text:"Which immunity provides immediate, non-specific defense?",options:["Adaptive","Innate","Passive","Humoral"],correctIndex:1,rationale:"Innate immunity (barriers, inflammation, phagocytes) responds immediately."},{id:"quiz1_q22",text:"First-line DMARD for Rheumatoid Arthritis?",options:["Prednisone","Methotrexate","Ibuprofen","Tylenol"],correctIndex:1,rationale:"Methotrexate is the gold-standard DMARD to slow RA progression."},{id:"quiz1_q23",text:"PPE doffing order (removal)?",options:["Mask first","Gloves -> Gown -> Mask","Gown first","Random order"],correctIndex:1,rationale:"Remove most contaminated items (gloves) first, mask last."},{id:"quiz1_q24",text:"PEP (Post-Exposure Prophylaxis) must start within:",options:["1 week","72 hours","1 month","No time limit"],correctIndex:1,rationale:"PEP is most effective when started within 72 hours of HIV exposure."},{id:"quiz1_q25",text:"Neutrophils primarily fight which infections?",options:["Viral","Bacterial","Parasitic","Fungal"],correctIndex:1,rationale:"Neutrophils are first responders to bacterial infections."}]},{id:"day-to-be-wrong",title:"\u2696\ufe0f A Day to be Wrong",icon:(0,np.jsx)(_,{className:"w-6 h-6"}),description:"\ud83d\udd25\ud83d\udd25\ud83d\udd25\ud83d\udd25\ud83d\udd25 Every answer is wrong - pick the least dangerous",questions:mp.questions.map(e=>c(c({},e),{},{chapter:"day-to-be-wrong",chapterId:"day-to-be-wrong",skill:e.skill||["CLINICAL_JUDGMENT"],bloom:e.bloom||"EVALUATE",difficulty:5}))}];function wp(){const[e,t]=(0,r.useState)("menu"),[n,i]=(0,r.useState)("study"),[s,o]=(0,r.useState)(()=>{const e=localStorage.getItem("rnMasteryStudyScores");return e?JSON.parse(e):{}}),[a,l]=(0,r.useState)(100),[u,d]=(0,r.useState)(null),[h,f]=(0,r.useState)([]),[p,m]=(0,r.useState)(0),[g,y]=(0,r.useState)(null),[v,w]=(0,r.useState)(!1),[I,x]=(0,r.useState)(0),[B,G]=(0,r.useState)(0),[W,K]=(0,r.useState)(0),[Y,Q]=(0,r.useState)(0),[X,J]=(0,r.useState)([]),[$,Z]=(0,r.useState)(!1),[ee,te]=(0,r.useState)([]),[ne,re]=(0,r.useState)(null),[ie,se]=(0,r.useState)(30),[oe,ae]=(0,r.useState)(0),[le,ce]=(0,r.useState)(null),[ue,de]=(0,r.useState)(!1),[he,fe]=(0,r.useState)([]),[pe,ge]=(0,r.useState)(null),[ye,ve]=(0,r.useState)(0),[be,we]=(0,r.useState)(0),[Ie,xe]=(0,r.useState)(0),[Ee,_e]=(0,r.useState)(100),[Ne,Te]=(0,r.useState)(!1),[Se,Ce]=(0,r.useState)([]),[ke,Ae]=(0,r.useState)([]),[Re,Pe]=(0,r.useState)(()=>{const e=localStorage.getItem("rnMasteryWeakness");return e?JSON.parse(e):{missedBySkill:{},missedByConcept:{},missedByBloom:{}}}),[Oe,Le]=(0,r.useState)(()=>{const e=localStorage.getItem("rnMasteryConceptMissCount");return e?JSON.parse(e):{}}),[Me,De]=(0,r.useState)([]),[je,Fe]=(0,r.useState)(!1),[Ue,qe]=(0,r.useState)(null),[Ve,ze]=(0,r.useState)(()=>{const e=localStorage.getItem("rnMasteryRemediationCompleted");return e?JSON.parse(e):{}}),[Be,He]=(0,r.useState)(()=>{const e=localStorage.getItem("rnMasteryQuestionHistory");return e?JSON.parse(e):{}}),[Ge,We]=(0,r.useState)(0),[Ke,Ye]=(0,r.useState)(null),[Qe,Xe]=(0,r.useState)({isolationRooms:1,emergencyPasses:1,providerCalls:1}),[Je,$e]=(0,r.useState)(0),[Ze,et]=(0,r.useState)([]),[tt,nt]=(0,r.useState)("solo"),[rt,it]=(0,r.useState)(""),[st,ot]=(0,r.useState)([]),[at,lt]=(0,r.useState)(!1),[ct,ut]=(0,r.useState)(1),[dt,ht]=(0,r.useState)([]),[ft,pt]=(0,r.useState)(!1),[mt,gt]=(0,r.useState)(()=>{const e=localStorage.getItem("rnMasteryAnalytics");return e?JSON.parse(e):{totalAttempts:0,correctCount:0,missedCount:0,confidenceStats:{sureCorrect:0,sureWrong:0,guessCorrect:0,guessWrong:0}}}),[yt,vt]=(0,r.useState)(null),[bt,wt]=(0,r.useState)(!1),[It,xt]=(0,r.useState)(null),[Et,_t]=(0,r.useState)(!1),[Nt,Tt]=(0,r.useState)(null),[Ct,kt]=(0,r.useState)(""),[At,Rt]=(0,r.useState)(!1),[Pt,Ot]=(0,r.useState)([]),[Lt,Mt]=(0,r.useState)({connected:!!Hf&&!!Gf,authenticated:!1,initializing:!0});(0,r.useEffect)(()=>{(async()=>{if(Hf)try{const e=await Nu(xc(Hf,"customChapters")),t=[];e.forEach(e=>{t.push(c(c({},e.data()),{},{id:e.id}))}),Ce(t)}catch(e){console.error("Error loading custom chapters:",e)}})();(async()=>{if(Hf)try{const e=(await Nu(xc(Hf,"settings"))).docs.find(e=>"chapterAccess"===e.id);if(e){const t=e.data().unlocked||[];t.includes("day-to-be-wrong")||t.push("day-to-be-wrong"),Ae(t)}else Ae(["ch18","ch19","ch20","ch21","ch22","quiz1","day-to-be-wrong"])}catch(e){console.error("Error loading chapter locks:",e),Ae(["ch18","ch19","ch20","ch21","ch22","quiz1","day-to-be-wrong"])}})()},[]),(0,r.useEffect)(()=>{if("ranked"!==n||"playing"!==e||v)return;const t=h[p],r=("day-to-be-wrong"===u&&null!==t&&void 0!==t&&t.timeLimit&&t.timeLimit,setInterval(()=>{se(e=>e<=1?(clearInterval(r),zt(g,"TIMEOUT"),0):e-1),ae(e=>e+1)},1e3));return()=>clearInterval(r)},[n,e,v,p]),(0,r.useEffect)(()=>{if(!Gf||!Hf)return console.error("Firebase not initialized properly"),void Mt({connected:!1,authenticated:!1,initializing:!1});Mt({connected:!0,authenticated:!1,initializing:!0});const e=function(e,t,n,r){return me(e).onAuthStateChanged(t,n,r)}(Gf,async e=>{if(console.log("Auth state changed:",e?"User logged in: ".concat(e.uid):"No user"),Tt(e),Mt({connected:!0,authenticated:!!e,initializing:!1}),e&&Hf)try{const t=lu(xc(Hf,"artifacts",vp,"public","data","scores"),function(e,t,n){const r=t,i=iu("where",e);return cu._create(i,r,n)}("uid","==",e.uid)),n=(await Nu(t)).docs.map(e=>e.data().chapterTitle);Ot([...new Set(n)]),console.log("Loaded submitted chapters:",n)}catch(xp){console.error("Error fetching submitted chapters:",xp)}});return(async()=>{try{if(console.log("Starting auth initialization..."),"undefined"!==typeof window&&window.__initial_auth_token)console.log("Signing in with custom token"),await Nh(Gf,window.__initial_auth_token);else{console.log("Attempting anonymous sign in...");const e=await async function(e){var t;if(St(e.app))return Promise.reject(Uu(e));const n=Hd(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new vh({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await yh(n,{returnSecureToken:!0}),i=await vh._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}(Gf);console.log("Anonymous sign in successful:",e.user.uid)}}catch(e){console.error("Auth initialization FAILED:",e),console.error("Error code:",e.code),console.error("Error message:",e.message),"auth/operation-not-allowed"===e.code?alert("\u26a0\ufe0f Anonymous authentication is disabled.\n\nPlease enable it in:\nFirebase Console \u2192 Authentication \u2192 Sign-in method \u2192 Anonymous \u2192 Enable"):alert("Authentication failed: "+e.message),Mt({connected:!0,authenticated:!1,initializing:!1})}})(),()=>e()},[]);const Dt=e=>{const t=s[e];return t&&t.percentage>=85},jt=e=>{var t;return(null===(t=s[e])||void 0===t?void 0:t.percentage)||0},Ft=()=>{if("ranked"!==n||0===h.length)return null;const e=Math.round(W/h.length*40),t=ye+be+Y,r=t>0?Math.round((1*ye+.5*be)/t*40):0,i=Ie/h.length;let s=20;s=i<5?Math.round(10):i>25?Math.round(14):i>=10&&i<=20?20:Math.round(17);return{total:e+r+s,accuracy:e,rationale:r,time:s,avgTime:Math.round(i)}},Ut=function(e){const r=e.id||e.chapterId;if("day-to-be-wrong"===r)return void pt(!0);if("ranked"===n&&Me.length>0)return void alert("\u26a0\ufe0f Remediation Required\n\nYou must complete remediation for these concepts before accessing Rank Mode:\n\n".concat(Me.map(e=>"\u2022 ".concat(e)).join("\n"),'\n\nClick the "\ud83d\udcda Remediation" button to strengthen your understanding.'));if("ranked"===n&&!Dt(r)){const e=jt(r);return void alert("\ud83d\udd12 Rank Mode Locked\n\nYou need 85% in Study Mode to unlock Rank Mode.\n\nCurrent Study Mode score: ".concat(e,"%\n\nComplete Study Mode first to demonstrate mastery!"))}let i=Kf(e.questions);if(0!==i.length){if("ranked"===n){const e=["APPLICATION","ANALYSIS","PRIORITIZATION","CLINICAL_JUDGMENT","EVALUATE","SYNTHESIS"],t=i.filter(t=>t.bloom&&e.some(e=>t.bloom.toUpperCase().includes(e)));i=t.length>=5?t:i;const n=i.filter(e=>{const t=(e=>{const t=Be[e];if(!t||!t.lastAttempt)return{isRecent:!1};const n=new Date(t.lastAttempt),r=(Date.now()-n.getTime())/36e5;return{isRecent:r<24,hoursSince:Math.round(r),attemptCount:t.attemptCount||0}})(e.id);return!t.isRecent||t.attemptCount<3});if(n.length<5)return void alert("\u26a0\ufe0f Anti-Memorization Protection\n\nYou've recently attempted most questions in this chapter.\n\nWait 24 hours or try a different chapter to ensure valid assessment.");i=n,i=i.map(e=>cp(e))}d(e),f(i),m(0),x(0),G(0),K(0),Q(0),J([]),fe([]),"ranked"===n&&(ve(0),we(0),xe(0),_e(100),We(0)),t("playing"),qt(),"ranked"===n&&(se(30),ae(0))}else alert("No questions found for this chapter.")},qt=()=>{const e=h[p+1];if(y(null!==e&&void 0!==e&&e.isMultiSelect?[]:null),re(null),ce(null),de(!1),ge(null),Ye(null),"ranked"===n){const e=h[p+1],t="day-to-be-wrong"===u&&null!==e&&void 0!==e&&e.timeLimit?e.timeLimit:30;se(t),ae(0)}w(!1),vt(null),Z(!1),te([])},Vt=()=>{if($||v)return;const e=h[p],t=Array.isArray(e.correctIndex)?e.correctIndex:[e.correctIndex],n=e.options.map((e,t)=>t).filter(e=>!t.includes(e)).sort(()=>Math.random()-.5).slice(0,2);te(n),Z(!0)},zt=(e,r)=>{if(y(e),re(r),"TIMEOUT"!==r&&"ranked"===n&&h[p].requiresRationale&&!ue)return void de(!0);const i=h[p];let s;if(i.isMultiSelect&&Array.isArray(i.correctIndex)){const t=Array.isArray(e)?e.sort((e,t)=>e-t):[],n=[...i.correctIndex].sort((e,t)=>e-t);s=t.length===n.length&&t.every((e,t)=>e===n[t])}else s=null!==e&&e===i.correctIndex;const o="day-to-be-wrong"===u;if(o&&i.consequences&&null!==e&&Ye(i.consequences[e]||null),o&&i.requiresResource&&s){const e=i.requiresResource;Qe[e]>0&&Xe(c(c({},Qe),{},{[e]:Qe[e]-1}))}let a=!1;if("ranked"===n&&oe<3&&(a=!0,We(Ge+1)),"ranked"===n&&((e,t,n)=>{const r=c({},Be);r[e]||(r[e]={attemptCount:0,lastAttempt:null,averageTime:0,correctCount:0});const i=r[e];i.attemptCount++,i.lastAttempt=(new Date).toISOString(),i.averageTime=(i.averageTime*(i.attemptCount-1)+t)/i.attemptCount,n&&i.correctCount++,He(r),localStorage.setItem("rnMasteryQuestionHistory",JSON.stringify(r))})(i.id,oe,s),"ranked"===n){const t=[...he,e].slice(-5);fe(t),pp(t)&&console.warn("Answer pattern detected - possible guessing")}let l=0,d=1,f=null,m=null;if("TIMEOUT"===r){if(Q(Y+1),G(0),J([...X,{question:i,selectedAnswer:e,questionNumber:p+1,timeSpent:"ranked"===n?oe:null,selectedRationale:null,reason:"timeout"}]),i.skill||i.concept){const e=c({},Re),t=c({},Oe);Array.isArray(i.skill)&&i.skill.forEach(t=>{e.missedBySkill=e.missedBySkill||{},e.missedBySkill[t]=(e.missedBySkill[t]||0)+1}),i.concept&&(e.missedByConcept=e.missedByConcept||{},e.missedByConcept[i.concept]=(e.missedByConcept[i.concept]||0)+1,t[i.concept]=(t[i.concept]||0)+1,t[i.concept]>=2&&!Ve[i.concept]&&(Me.includes(i.concept)||De([...Me,i.concept])),Le(t),localStorage.setItem("rnMasteryConceptMissCount",JSON.stringify(t))),i.bloom&&(e.missedByBloom=e.missedByBloom||{},e.missedByBloom[i.bloom]=(e.missedByBloom[i.bloom]||0)+1),Pe(e),localStorage.setItem("rnMasteryWeakness",JSON.stringify(e))}l=0}else if(s)if(K(W+1),o)l=oe>45?3:10,G(B+1);else if("ranked"===n)if(i.requiresRationale&&null!==le){const e=(g=le,i.correctRationaleIndex,0===g?{score:100,tier:"correct"}:1===g?{score:50,tier:"weak"}:{score:0,tier:"incorrect"});f=e.score,m=e.tier,ge(m),"correct"===m?ve(ye+1):"weak"===m&&we(be+1),xe(Ie+oe),"incorrect"===m?(l=0,G(0)):(l="SURE"===r?150:100,l+=50*B,d=function(e,t){return e<3?.5:e<=15?1.3:e<=22?1:e<=t?.9:.7}(oe,i.timeLimit||30),l=Math.round(l*d),"weak"===m&&(l=Math.round(.5*l)),a&&oe<3&&(l=Math.round(.3*l)),pp(he)&&(l=Math.round(.5*l)),G(B+1))}else l="SURE"===r?150:100,G(B+1);else G(B+1);else{if(Q(Y+1),G(0),at&&!s)return ut(0),x(I+l),w(!0),void setTimeout(()=>{alert("\ud83d\udc80 SUDDEN DEATH ELIMINATION!\n\nYou answered incorrectly on Question ".concat(p+1,".\n\nFinal Score: ").concat(I+l,"\nQuestions Survived: ").concat(p,"/").concat(h.length,"\n\nOnly the perfect survive in Sudden Death mode!")),t("summary")},2e3);if(o&&(l=-10),J([...X,{question:i,selectedAnswer:e,questionNumber:p+1,timeSpent:"ranked"===n?oe:null,selectedRationale:"ranked"===n?le:null}]),i.skill||i.concept){const e=c({},Re),t=c({},Oe);Array.isArray(i.skill)&&i.skill.forEach(t=>{e.missedBySkill=e.missedBySkill||{},e.missedBySkill[t]=(e.missedBySkill[t]||0)+1}),i.concept&&(e.missedByConcept=e.missedByConcept||{},e.missedByConcept[i.concept]=(e.missedByConcept[i.concept]||0)+1,t[i.concept]=(t[i.concept]||0)+1,t[i.concept]>=2&&!Ve[i.concept]&&(Me.includes(i.concept)||De([...Me,i.concept])),Le(t),localStorage.setItem("rnMasteryConceptMissCount",JSON.stringify(t))),i.bloom&&(e.missedByBloom=e.missedByBloom||{},e.missedByBloom[i.bloom]=(e.missedByBloom[i.bloom]||0)+1),Pe(e),localStorage.setItem("rnMasteryWeakness",JSON.stringify(e))}}var g;x(I+l);const v="SURE"===r?s?"sureCorrect":"sureWrong":s?"guessCorrect":"guessWrong",b=c(c({},mt),{},{totalAttempts:mt.totalAttempts+1,correctCount:mt.correctCount+(s?1:0),missedCount:mt.missedCount+(s?0:1),confidenceStats:c(c({},mt.confidenceStats),{},{[v]:mt.confidenceStats[v]+1})});if(gt(b),localStorage.setItem("rnMasteryAnalytics",JSON.stringify(b)),Nt&&Hf)try{const e=h[p];Tu(xc(Hf,"artifacts",vp,"public","data","analytics"),{uid:Nt.uid,questionId:e.id,chapterTitle:u.title,isCorrect:s,confidence:r,timeSpent:"ranked"===n?oe:null,timeMultiplier:"ranked"===n?d:null,rationaleCorrect:"ranked"===n&&e.requiresRationale?le===(e.correctRationaleIndex||0):null,rationaleTier:"ranked"===n&&e.requiresRationale?m:null,timestamp:ku()}).catch(e=>console.error("Analytics save error:",e))}catch(xp){console.error("Analytics error:",xp)}if(w(!0),o&&!s&&"TIMEOUT"!==r&&!at){const e=Bt(i.id);e&&!Ze.includes(e)&&(et([...Ze,e]),$e(Je+1))}},Bt=e=>({ld_q01_mdro_moral_injury:"cdiff_outbreak",ld_q02_hiv_cd4_vs_viral_load:"hiv_crisis",ld_q04_priority_flip:"priority_code",ld_q05_needlestick_time:"needlestick_disaster"}[e]),Ht=()=>{if("day-to-be-wrong"===u&&Ze.length>0){const e=Ze[0],t=gp[e];if(t){const e=[...h.slice(0,p+1),t,...h.slice(p+1)];f(e),et(Ze.slice(1))}}if(p<h.length-1){if(m(p+1),qt(),"ranked"===n&&p>0){const e=Math.round(W/(p+1)*100);if(l(e),e<70&&p>=4)return alert("\u26a0\ufe0f Performance Alert\n\nYour current Rank Mode score is ".concat(e,"%.\n\nReturning to Study Mode to strengthen your understanding.\n\nCome back when you're ready to score 85%+!")),t("menu"),void i("study")}}else{const e=Math.round(W/h.length*100);if(je&&Ue){if(e>=80){const t=c(c({},Ve),{},{[Ue]:!0});ze(t),localStorage.setItem("rnMasteryRemediationCompleted",JSON.stringify(t)),De(Me.filter(e=>e!==Ue)),alert("\u2705 Remediation Complete!\n\nYou scored ".concat(e,"% on ").concat(Ue,".\n\n").concat(Me.length>1?"Complete remaining remediation tasks to unlock Rank Mode.":"You can now access Rank Mode!"))}else alert("\ud83d\udcda Keep Practicing\n\nYou scored ".concat(e,"% on ").concat(Ue," remediation.\n\nYou need 80% to complete remediation. Review the material and try again!"));return Fe(!1),qe(null),void t("menu")}if("study"===n&&u){const t=u.id||u.chapterId,n=c(c({},s),{},{[t]:{percentage:e,correctCount:W,totalQuestions:h.length,timestamp:(new Date).toISOString()}});o(n),localStorage.setItem("rnMasteryStudyScores",JSON.stringify(n)),e>=85&&setTimeout(()=>{alert("\ud83c\udf89 Rank Mode Unlocked!\n\nYou scored ".concat(e,"% in Study Mode.\n\nYou can now attempt Rank Mode for this chapter!"))},1500)}e>=70&&(H({particleCount:100,spread:70,origin:{y:.6},colors:["#FFD700","#FFA500","#FF6B6B","#4ECDC4","#45B7D1"]}),100===e&&setTimeout(()=>{H({particleCount:150,spread:100,origin:{y:.5},colors:["#FFD700","#FFA500"]})},300)),t("summary")}},Gt=async()=>{if(!({NODE_ENV:"production",PUBLIC_URL:"/Term-3-Gaming",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_GEMINI_API_KEY||""))return vt("\ud83d\udca1 AI Tutor Feature\n\nTo enable AI-powered mnemonics and clinical pearls, set up a Google Gemini API key.\n\nGet your free API key at: https://aistudio.google.com/app/apikey\n\nFor now, review the rationale provided above to understand this concept!"),void wt(!1);wt(!0);const e=h[p],t='Context: Nursing Student Game - Clinical Pearls Focus. Question: "'.concat(e.text,'". Answer: "').concat(e.options[e.correctIndex],'". Rationale: "').concat(e.rationale,'". Task: Give a very short, memorable mnemonic AND a clinical pearl (real-world nursing insight) to help remember this concept in practice.'),n=await yp(t);vt(n),wt(!1)},Wt=async()=>{if(!({NODE_ENV:"production",PUBLIC_URL:"/Term-3-Gaming",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_GEMINI_API_KEY||""))return void xt("\ud83d\udcda AI Study Guide Feature\n\nTo enable AI-generated study guides, you need to set up a Google Gemini API key:\n\n1. Get a free API key at: https://aistudio.google.com/app/apikey\n2. Add it to your .env file:\n   REACT_APP_GEMINI_API_KEY=your_key_here\n3. Rebuild and redeploy\n\nFor the deployed version, the instructor needs to add the API key directly to the code or use a backend service.\n\nIn the meantime, use the download feature to export your quiz results and create your own study guide!");_t(!0);const e='Create a high-yield study guide for: "'.concat(u.title,'". Include key concepts, clinical pearls, and NCLEX-style tips. Keep it concise (300 words max).'),t=await yp(e);xt(t),_t(!1)},Kt=()=>{if(!It)return;const e="AI STUDY GUIDE - ".concat(u.title,"\nGenerated: ").concat((new Date).toLocaleString(),"\n\n==============================================\nCHAPTER SUMMARY\n==============================================\n").concat(u.title,"\nScore: ").concat(I," | Accuracy: ").concat(Math.round(W/h.length*100),"%\nQuestions Correct: ").concat(W,"/").concat(h.length,"\n\n==============================================\nAI-GENERATED STUDY NOTES\n==============================================\n\n").concat(It,"\n\n==============================================\nMISSED QUESTIONS REVIEW\n==============================================\n\n").concat(X.length>0?X.map((e,t)=>"\nQuestion ".concat(e.questionNumber,":\n").concat(e.question.text,"\n\nYour Answer: ").concat(e.question.options[e.selectedAnswer],"\nCorrect Answer: ").concat(e.question.options[e.question.correctIndex],"\n\nRationale: ").concat(e.question.rationale,"\n\n---\n")).join("\n"):"No missed questions - Perfect score!","\n\n==============================================\n"),t=new Blob([e],{type:"text/plain"}),n=URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download="".concat(u.title.replace(/\s+/g,"_"),"_Study_Guide.txt"),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)},Yt=async()=>{if(Ct.trim())if(Nt)if(Pt.includes(u.title))alert("You have already submitted a score for this chapter!");else{Rt(!0);try{const r=Ft();console.log("Saving score to leaderboard:",{playerName:Ct.trim(),score:I,chapterTitle:u.title,uid:Nt.uid,clinicalReasoningScore:null===r||void 0===r?void 0:r.total});const i={playerName:Ct.trim(),score:I,chapterTitle:u.title,rank:(e=I,e<1e3?"Novice":e<2e3?"Apprentice":e<3e3?"Expert RN":"Clinical Legend \ud83d\udc51"),timestamp:ku(),uid:Nt.uid};"day-to-be-wrong"===u.id&&(i.mode=tt,i.escalationLevel=Je,i.resourcesPreserved=Object.values(Qe).reduce((e,t)=>e+t,0),"sudden-death"===tt&&(i.survived=ct>0,i.questionsSurvived=W),"team"===tt&&rt&&(i.teamName=rt)),"ranked"===n&&r&&(i.clinicalReasoningScore=r.total,i.crsAccuracy=r.accuracy,i.crsRationale=r.rationale,i.crsTime=r.time),await Tu(xc(Hf,"artifacts",vp,"public","data","scores"),i),console.log("Score saved successfully!"),Ot([...Pt,u.title]),Rt(!1),alert("Score submitted successfully! \ud83c\udf89"),t("leaderboard")}catch(r){console.error("Error saving score:",r),alert("Failed to save score: ".concat(r.message,". Please check your internet connection and try again.")),Rt(!1)}var e}else alert("Authentication required. Please wait a moment and try again.");else alert("Please enter your name before submitting!")},Qt=()=>(0,np.jsx)("div",{className:"min-h-screen bg-slate-900 text-white p-6 flex flex-col items-center justify-center font-sans",children:(0,np.jsxs)("div",{className:"max-w-5xl w-full animate-in fade-in zoom-in-95 duration-500",children:[(0,np.jsxs)("header",{className:"text-center mb-8",children:[(0,np.jsxs)("h1",{className:"text-6xl font-black mb-2 tracking-tighter",children:[(0,np.jsx)("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-500",children:"RN"}),(0,np.jsx)("span",{className:"text-white",children:" MASTERY"})]}),(0,np.jsx)("p",{className:"text-slate-400 text-xl font-medium",children:"Classroom Edition v5.0"}),(0,np.jsxs)("div",{className:"flex justify-center mt-6 gap-4",children:[(0,np.jsxs)("button",{onClick:()=>i("study"),className:"px-6 py-2 rounded-full font-bold flex items-center transition-all ".concat("study"===n?"bg-emerald-500 text-white shadow-lg shadow-emerald-500/20":"bg-slate-800 text-slate-400 hover:text-white"),children:[(0,np.jsx)(N,{className:"w-4 h-4 mr-2"})," Study Mode"]}),(0,np.jsxs)("button",{onClick:()=>i("ranked"),className:"px-6 py-2 rounded-full font-bold flex items-center transition-all ".concat("ranked"===n?"bg-purple-600 text-white shadow-lg shadow-purple-500/20":"bg-slate-800 text-slate-400 hover:text-white"),children:[(0,np.jsx)(T,{className:"w-4 h-4 mr-2"})," Ranked Mode"]})]}),"ranked"===n&&(0,np.jsx)("p",{className:"text-slate-500 text-sm mt-3",children:"\ud83d\udd12 One-shot submission \u2022 High stakes scoring"})]}),Me.length>0&&"ranked"===n&&(0,np.jsx)("div",{className:"mb-6 p-5 bg-gradient-to-r from-red-900/30 to-orange-900/30 border-2 border-red-500/50 rounded-2xl",children:(0,np.jsxs)("div",{className:"flex items-start gap-4",children:[(0,np.jsx)("div",{className:"w-12 h-12 bg-red-500/20 rounded-full flex items-center justify-center flex-shrink-0",children:(0,np.jsx)(b,{className:"w-6 h-6 text-red-400"})}),(0,np.jsxs)("div",{className:"flex-1",children:[(0,np.jsx)("h3",{className:"text-xl font-bold text-red-300 mb-2",children:"\u26a0\ufe0f Remediation Required"}),(0,np.jsx)("p",{className:"text-red-200 text-sm mb-3",children:"You've missed these concepts multiple times. Complete remediation to unlock Rank Mode:"}),(0,np.jsx)("div",{className:"space-y-2",children:Me.map(e=>(0,np.jsxs)("div",{className:"flex items-center justify-between bg-slate-900/50 p-3 rounded-lg",children:[(0,np.jsx)("span",{className:"text-white font-semibold",children:e}),(0,np.jsx)("button",{onClick:()=>(e=>{const n=[...bp,...Se].flatMap(e=>Kf(e.questions||[])).filter(t=>t.concept===e);if(0===n.length)return void alert("No questions found for concept: ".concat(e));const r=Math.min(5,Math.max(3,n.length)),i=n.sort(()=>Math.random()-.5).slice(0,r);Fe(!0),qe(e),f(i),m(0),x(0),G(0),K(0),Q(0),J([]),t("playing"),qt(),alert("\ud83d\udcda Remediation: ".concat(e,"\n\nYou'll answer ").concat(r," questions to strengthen this concept.\n\nScore 80% or higher to complete remediation and unlock Rank Mode."))})(e),className:"px-4 py-2 bg-orange-600 hover:bg-orange-500 text-white rounded-lg font-bold text-sm transition-colors flex items-center gap-2",children:"\ud83d\udcda Start Remediation"})]},e))})]})]})}),(0,np.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:[...bp,...Se].filter(e=>"day-to-be-wrong"!==(e.id||e.chapterId)||"ranked"===n).map(e=>{var t;const r=e.id||e.chapterId,i=Pt.includes(e.title),s="day-to-be-wrong"!==r&&!ke.includes(r),o=Dt(r),a=jt(r),l=s||("day-to-be-wrong"===r?i:"ranked"===n&&(!o||i));return(0,np.jsxs)("button",{disabled:l,onClick:()=>Ut(e),className:"p-6 rounded-2xl border flex flex-col items-center text-center transition-all group relative overflow-hidden ".concat(l?"bg-slate-800/50 border-slate-700 opacity-50 cursor-not-allowed":"bg-slate-800 border-slate-700 hover:border-cyan-500 hover:bg-slate-750"),children:[i&&(0,np.jsxs)("div",{className:"absolute top-2 right-2 bg-green-500/20 text-green-400 px-2 py-1 rounded-full text-xs font-bold flex items-center",children:[(0,np.jsx)(S,{className:"w-3 h-3 mr-1"})," Ranked"]}),s&&(0,np.jsxs)("div",{className:"absolute top-2 left-2 bg-red-500/20 text-red-400 px-2 py-1 rounded-full text-xs font-bold flex items-center",children:[(0,np.jsx)(C,{className:"w-3 h-3 mr-1"})," Locked"]}),(0,np.jsx)("div",{className:"p-4 rounded-xl mb-4 transition-transform group-hover:scale-110 ".concat("ranked"===n?"bg-purple-500/20 text-purple-400":"bg-emerald-500/20 text-emerald-400"),children:e.icon}),(0,np.jsx)("h3",{className:"font-bold text-lg text-white",children:e.title}),(0,np.jsxs)("div",{className:"text-xs text-slate-400 mt-1",children:[(null===(t=e.questions)||void 0===t?void 0:t.length)||25," Questions"]}),"ranked"===n&&(0,np.jsx)("div",{className:"mt-2 text-xs",children:"day-to-be-wrong"===r?(0,np.jsx)("span",{className:"text-cyan-400 font-semibold",children:"\ud83d\udd25 Always Available"}):o?(0,np.jsxs)("span",{className:"text-green-400 font-semibold",children:["\u2713 Unlocked (",a,"%)"]}):(0,np.jsxs)("span",{className:"text-yellow-400 font-semibold",children:["\ud83d\udd12 Need 85% (",a,"%)"]})})]},r)})}),(0,np.jsxs)("div",{className:"mt-8 flex justify-center gap-4",children:[(0,np.jsxs)("button",{onClick:()=>t("leaderboard"),className:"text-slate-400 hover:text-white flex items-center text-sm transition",children:[(0,np.jsx)(k,{className:"w-4 h-4 mr-2"})," View Leaderboard"]}),(0,np.jsxs)("button",{onClick:()=>Te(!0),className:"text-slate-400 hover:text-white flex items-center text-sm transition",children:[(0,np.jsx)(A,{className:"w-4 h-4 mr-2"})," Instructor Mode"]})]})]})}),Xt=()=>{const e=h[p],r=function(e){const{skill:t,concept:n}=e;return null!==t&&void 0!==t&&t.includes("TEACHING_ERROR")?"\ud83d\udca1 Exam Tip: 'Further teaching needed' = find the UNSAFE or INCORRECT statement.":null!==t&&void 0!==t&&t.includes("MED_SAFETY")?"\ud83d\udca1 Exam Tip: Medication questions are SAFETY questions. Think harm prevention first.":null!==t&&void 0!==t&&t.includes("PRIORITY")?"\ud83d\udca1 Exam Tip: Use ABC, Maslow, Safety first. Prevent harm > Comfort.":null!==t&&void 0!==t&&t.includes("SEQUENCING")?"\ud83d\udca1 Exam Tip: Follow proper order: Assessment before intervention, emergencies first.":null!==t&&void 0!==t&&t.includes("LAB_INTERPRETATION")?"\ud83d\udca1 Exam Tip: Know normal ranges. High/Low triggers action. Relate labs to symptoms.":null!==t&&void 0!==t&&t.includes("INFECTION_CONTROL")?"\ud83d\udca1 Exam Tip: Hand hygiene is #1. Know isolation types. PPE order matters.":"ANAPHYLAXIS"===n?"\ud83d\udca1 Exam Tip: Anaphylaxis = EPINEPHRINE first, always. Airway is life.":"C_DIFF"===n?"\ud83d\udca1 Exam Tip: C. diff = SOAP & WATER only. Alcohol doesn't kill spores.":"HIV_PROGRESSION"===n||"ANTIRETROVIRAL_THERAPY"===n?"\ud83d\udca1 Exam Tip: ART adherence >95%. Undetectable = Untransmittable (U=U).":"GOUT"===n?"\ud83d\udca1 Exam Tip: Gout = uric acid crystals. Colchicine for acute, Allopurinol prevents.":"RHEUMATOID_ARTHRITIS"===n?"\ud83d\udca1 Exam Tip: RA = symmetrical, morning stiffness >1hr, systemic. Methotrexate is gold standard.":"APPLICATION"===e.bloom?"\ud83d\udca1 Exam Tip: Application questions test your clinical judgment. Think 'What would I do?'":"\ud83d\udca1 Exam Tip: Read carefully, eliminate wrong answers, trust your nursing judgment."}(e);return(0,np.jsxs)("div",{className:"min-h-screen bg-slate-900 text-white flex flex-col font-sans",children:[(0,np.jsxs)("div",{className:"p-6 flex justify-between items-center border-b border-slate-800 bg-slate-900/90 backdrop-blur sticky top-0 z-10",children:[(0,np.jsxs)("div",{className:"flex items-center gap-4",children:[(0,np.jsx)("button",{onClick:()=>t("menu"),className:"text-slate-400 hover:text-white transition",children:"Exit"}),je&&(0,np.jsxs)("div",{className:"px-3 py-1 rounded-full bg-orange-500/20 border border-orange-500 text-xs font-bold text-orange-300 flex items-center gap-2",children:["\ud83d\udcda Remediation: ",Ue]}),e.concept&&!je&&(0,np.jsx)("div",{className:"px-3 py-1 rounded-full bg-slate-800 border border-slate-700 text-xs font-bold text-slate-300",children:e.concept.replace(/_/g," ")}),"ranked"===n&&!je&&(0,np.jsxs)("div",{className:"px-3 py-1 rounded-full border text-xs font-bold ".concat(ie<=10?"bg-red-500/20 border-red-500 text-red-400 animate-pulse":ie<=20?"bg-yellow-500/20 border-yellow-500 text-yellow-400":"bg-slate-800 border-slate-700 text-slate-300"),children:["\u23f1\ufe0f ",ie,"s"]}),at&&(0,np.jsx)("div",{className:"px-3 py-1 rounded-full bg-red-500/30 border-2 border-red-500 text-xs font-bold text-red-300 flex items-center gap-2 animate-pulse",children:"\ud83d\udc80 SUDDEN DEATH - 1 LIFE"}),"team"===tt&&rt&&(0,np.jsxs)("div",{className:"px-3 py-1 rounded-full bg-purple-500/20 border border-purple-500 text-xs font-bold text-purple-300 flex items-center gap-2",children:["\ud83d\udc65 Team: ",rt]}),"day-to-be-wrong"===u&&!at&&(0,np.jsxs)("div",{className:"flex items-center gap-2",children:[(0,np.jsxs)("div",{className:"px-2 py-1 rounded-md border text-xs font-bold ".concat(Qe.isolationRooms>0?"bg-blue-500/20 border-blue-500 text-blue-300":"bg-slate-700/50 border-slate-600 text-slate-500 line-through"),children:["\ud83d\udeaa ISO: ",Qe.isolationRooms]}),(0,np.jsxs)("div",{className:"px-2 py-1 rounded-md border text-xs font-bold ".concat(Qe.emergencyPasses>0?"bg-red-500/20 border-red-500 text-red-300":"bg-slate-700/50 border-slate-600 text-slate-500 line-through"),children:["\ud83d\udea8 PASS: ",Qe.emergencyPasses]}),(0,np.jsxs)("div",{className:"px-2 py-1 rounded-md border text-xs font-bold ".concat(Qe.providerCalls>0?"bg-purple-500/20 border-purple-500 text-purple-300":"bg-slate-700/50 border-slate-600 text-slate-500 line-through"),children:["\ud83d\udcde MD: ",Qe.providerCalls]})]})]}),(0,np.jsxs)("div",{className:"flex items-center gap-6",children:[(0,np.jsxs)("div",{className:"flex items-center font-bold ".concat(B>2?"text-orange-400 animate-pulse":"text-slate-500"),children:[(0,np.jsx)(R,{className:"w-5 h-5 mr-1"})," ",B]}),(0,np.jsx)("div",{className:"font-mono text-xl font-black text-white",children:I})]})]}),(0,np.jsxs)("div",{className:"flex-1 max-w-3xl mx-auto w-full p-8 flex flex-col justify-center",children:[(0,np.jsxs)("div",{className:"mb-2 text-slate-500 text-sm font-bold",children:["Question ",p+1," / ",h.length,Je>0&&(0,np.jsxs)("span",{className:"ml-2 px-2 py-0.5 bg-red-500/20 border border-red-500 text-red-400 rounded text-xs font-bold",children:["\ud83d\udea8 ESCALATION LEVEL ",Je]})]}),e.requiresResource&&0===Qe[e.requiresResource]&&(0,np.jsx)("div",{className:"mb-4 p-4 bg-red-900/30 border-2 border-red-500 rounded-xl",children:(0,np.jsxs)("div",{className:"flex items-center gap-3 text-red-300",children:[(0,np.jsx)(b,{className:"w-5 h-5 shrink-0"}),(0,np.jsxs)("div",{className:"text-sm font-semibold",children:["\u26a0\ufe0f This question requires a ",(0,np.jsx)("span",{className:"font-bold",children:e.requiresResource.replace(/([A-Z])/g," $1").toUpperCase()})," but you've already used it! Choose the best alternative."]})]})}),(0,np.jsx)("h2",{className:"text-2xl md:text-3xl font-bold leading-relaxed mb-2",children:e.text}),e.isMultiSelect&&(0,np.jsx)("div",{className:"mb-6",children:(0,np.jsx)("span",{className:"text-sm font-semibold bg-purple-500/20 text-purple-300 px-3 py-1.5 rounded-full border border-purple-500/30 inline-block",children:"\u2713 SELECT ALL THAT APPLY"})}),e.scenario&&(0,np.jsx)("div",{className:"mb-6 p-4 bg-slate-800/50 border border-slate-700 rounded-xl",children:(0,np.jsx)("div",{className:"text-sm text-slate-300 whitespace-pre-line leading-relaxed",children:e.scenario})}),(0,np.jsx)("div",{className:"grid gap-3 mb-8",children:e.options.map((t,r)=>{if(ee.includes(r))return null;const i="string"===typeof t?t:String(t),s=e.isMultiSelect?Array.isArray(g)&&g.includes(r):g===r;let o="p-5 rounded-xl border-2 text-left font-medium transition-all w-full flex items-center ";if(v){o+=(e.isMultiSelect?Array.isArray(e.correctIndex)&&e.correctIndex.includes(r):r===e.correctIndex)?"bg-green-500/20 border-green-500 text-green-100":s?"bg-red-500/20 border-red-500 text-red-100":"bg-slate-800 border-slate-700 opacity-50"}else o+=s?"bg-cyan-500/20 border-cyan-500 text-white":"bg-slate-800 border-slate-700 hover:border-cyan-500 hover:bg-slate-750";const a="ranked"===n&&ue;return(0,np.jsxs)("button",{disabled:v||a,onClick:()=>{if(!a)if(e.isMultiSelect){const e=Array.isArray(g)?g:[];e.includes(r)?y(e.filter(e=>e!==r)):y([...e,r])}else y(r)},className:o+(a?" cursor-not-allowed opacity-75":""),children:[(0,np.jsx)("div",{className:"w-8 h-8 rounded-".concat(e.isMultiSelect?"lg":"full"," bg-slate-700 flex items-center justify-center mr-4 text-sm font-bold text-slate-300 shrink-0 ").concat(s&&!v?"bg-cyan-500 text-white":""),children:e.isMultiSelect&&s?"\u2713":String.fromCharCode(65+r)}),i]},r)})}),v?(0,np.jsxs)("div",{className:"bg-slate-800 border border-slate-700 rounded-2xl p-6 animate-in fade-in zoom-in-95",children:[(0,np.jsxs)("div",{className:"flex items-start gap-4 mb-6",children:[g===e.correctIndex?(0,np.jsx)(S,{className:"w-8 h-8 text-green-400 shrink-0"}):(0,np.jsx)(O,{className:"w-8 h-8 text-red-400 shrink-0"}),(0,np.jsxs)("div",{className:"flex-1",children:[(0,np.jsx)("h3",{className:"text-lg font-bold mb-1 ".concat(g===e.correctIndex?"text-green-400":"text-red-400"),children:g===e.correctIndex?"Correct!":null===g?"Time's Up!":"Incorrect"}),"ranked"===n&&"TIMEOUT"===ne&&(0,np.jsx)("div",{className:"mb-3",children:(0,np.jsxs)("div",{className:"flex items-center gap-2 text-orange-400 text-sm bg-orange-500/10 border border-orange-500/30 rounded-lg p-3",children:[(0,np.jsx)(L,{className:"w-4 h-4"}),(0,np.jsx)("span",{className:"font-semibold",children:"\u23f1\ufe0f Time expired - No points awarded. Try to answer faster next time!"})]})}),Ke&&"day-to-be-wrong"===u&&(0,np.jsx)("div",{className:"mb-4",children:(0,np.jsx)("div",{className:"p-4 rounded-xl border-2 ".concat(g===e.correctIndex?"bg-green-900/20 border-green-500/40 text-green-100":"bg-red-900/30 border-red-500/50 text-red-100"),children:(0,np.jsxs)("div",{className:"flex items-start gap-3",children:[(0,np.jsx)(_,{className:"w-5 h-5 shrink-0 mt-0.5"}),(0,np.jsxs)("div",{className:"flex-1",children:[(0,np.jsx)("div",{className:"text-xs font-bold uppercase tracking-wider mb-1 opacity-80",children:"Consequence"}),(0,np.jsx)("div",{className:"text-sm leading-relaxed whitespace-pre-line",children:Ke}),e.requiresResource&&g===e.correctIndex&&(0,np.jsx)("div",{className:"mt-3 pt-3 border-t border-green-500/30",children:(0,np.jsxs)("div",{className:"flex items-center gap-2 text-xs font-bold text-green-300",children:[(0,np.jsx)(S,{className:"w-4 h-4"}),(0,np.jsxs)("span",{children:["Used: ",e.requiresResource.replace(/([A-Z])/g," $1").toUpperCase()]})]})})]})]})})}),"ranked"===n&&g===e.correctIndex&&"TIMEOUT"!==ne&&(0,np.jsx)("div",{className:"mb-3",children:oe<3?(0,np.jsxs)("div",{className:"flex items-center gap-2 text-red-400 text-sm bg-red-500/10 border border-red-500/30 rounded-lg p-3",children:[(0,np.jsx)(b,{className:"w-4 h-4"}),(0,np.jsxs)("span",{className:"font-semibold",children:["\u26a0\ufe0f RUSH ANSWER! (",oe,"s) - Severe 70% penalty applied. Read carefully!"]})]}):oe<=15?(0,np.jsxs)("div",{className:"flex items-center gap-2 text-green-400 text-sm",children:[(0,np.jsx)(M,{className:"w-4 h-4"}),(0,np.jsxs)("span",{className:"font-semibold",children:["Excellent timing! (",oe,"s) - Bonus points earned \ud83c\udfaf"]})]}):oe<=22?(0,np.jsxs)("div",{className:"flex items-center gap-2 text-blue-400 text-sm",children:[(0,np.jsx)(D,{className:"w-4 h-4"}),(0,np.jsxs)("span",{className:"font-semibold",children:["Good pace (",oe,"s) - Full points awarded"]})]}):oe<=30?(0,np.jsxs)("div",{className:"flex items-center gap-2 text-orange-400 text-sm",children:[(0,np.jsx)(D,{className:"w-4 h-4"}),(0,np.jsxs)("span",{className:"font-semibold",children:["Close call (",oe,"s) - Small time penalty"]})]}):(0,np.jsxs)("div",{className:"flex items-center gap-2 text-red-400 text-sm",children:[(0,np.jsx)(D,{className:"w-4 h-4"}),(0,np.jsxs)("span",{className:"font-semibold",children:["Overtime (",oe,"s) - Score penalty applied"]})]})}),"ranked"===n&&pe&&(0,np.jsx)("div",{className:"mb-3",children:"correct"===pe?(0,np.jsxs)("div",{className:"flex items-center gap-2 text-green-400 text-sm bg-green-500/10 border border-green-500/30 rounded-lg p-3",children:[(0,np.jsx)(S,{className:"w-4 h-4"}),(0,np.jsx)("span",{className:"font-semibold",children:"Excellent reasoning! Full points for clinical judgment \u2713"})]}):"weak"===pe?(0,np.jsxs)("div",{className:"flex items-center gap-2 text-yellow-400 text-sm bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-3",children:[(0,np.jsx)(b,{className:"w-4 h-4"}),(0,np.jsx)("span",{className:"font-semibold",children:"Partial credit - Reasoning shows surface understanding but lacks depth"})]}):(0,np.jsxs)("div",{className:"flex items-center gap-2 text-red-400 text-sm bg-red-500/10 border border-red-500/30 rounded-lg p-3",children:[(0,np.jsx)(O,{className:"w-4 h-4"}),(0,np.jsx)("span",{className:"font-semibold",children:"Incorrect reasoning - Zero points. Right answer requires right rationale!"})]})}),"ranked"===n&&pe&&(0,np.jsx)("div",{className:"mb-3",children:"correct"===pe?(0,np.jsxs)("div",{className:"flex items-center gap-2 text-green-400 text-sm bg-green-500/10 border border-green-500/30 rounded-lg p-3",children:[(0,np.jsx)(S,{className:"w-4 h-4"}),(0,np.jsx)("span",{className:"font-semibold",children:"Excellent reasoning! Full points for clinical judgment \u2713"})]}):"weak"===pe?(0,np.jsxs)("div",{className:"flex items-center gap-2 text-yellow-400 text-sm bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-3",children:[(0,np.jsx)(b,{className:"w-4 h-4"}),(0,np.jsx)("span",{className:"font-semibold",children:"Partial credit - Reasoning shows surface understanding but lacks depth"})]}):(0,np.jsxs)("div",{className:"flex items-center gap-2 text-red-400 text-sm bg-red-500/10 border border-red-500/30 rounded-lg p-3",children:[(0,np.jsx)(O,{className:"w-4 h-4"}),(0,np.jsx)("span",{className:"font-semibold",children:"Incorrect reasoning - Zero points. Right answer requires right rationale!"})]})}),(0,np.jsx)("p",{className:"text-slate-300 leading-relaxed mb-4",children:e.rationale}),r&&(0,np.jsxs)("div",{className:"bg-blue-900/20 border border-blue-500/30 p-4 rounded-xl flex gap-3 items-start",children:[(0,np.jsx)(j,{className:"w-5 h-5 text-blue-400 shrink-0 mt-0.5"}),(0,np.jsxs)("div",{children:[(0,np.jsx)("div",{className:"text-xs font-bold text-blue-400 uppercase tracking-wider mb-1",children:"NCLEX Strategy"}),(0,np.jsx)("p",{className:"text-sm text-blue-200 font-medium",children:r})]})]})]})]}),(0,np.jsxs)("div",{className:"flex justify-between items-center pt-4 border-t border-slate-700",children:["ranked"!==n&&(0,np.jsx)(np.Fragment,{children:yt?(0,np.jsxs)("div",{className:"text-sm text-purple-300 flex items-start",children:[(0,np.jsx)(U,{className:"w-3 h-3 mr-1 mt-0.5 shrink-0"}),(0,np.jsx)("span",{children:yt})]}):(0,np.jsxs)("button",{onClick:Gt,disabled:bt,className:"text-sm text-purple-400 hover:text-purple-300 flex items-center transition",children:[bt?(0,np.jsx)(F,{className:"w-4 h-4 mr-2 animate-spin"}):(0,np.jsx)(U,{className:"w-4 h-4 mr-2"}),"Get Mnemonic"]})}),"ranked"===n&&(0,np.jsx)("div",{})," ",(0,np.jsxs)("button",{onClick:Ht,className:"px-6 py-3 bg-white text-slate-900 font-bold rounded-xl hover:bg-slate-200 transition-colors flex items-center ml-auto",children:["Next ",(0,np.jsx)(q,{className:"ml-2 w-4 h-4"})]})]})]}):(0,np.jsxs)(np.Fragment,{children:[ue&&"ranked"===n&&e.rationaleOptions&&e.rationaleOptions.length>0&&(0,np.jsxs)("div",{className:"mb-6 p-6 bg-purple-900/20 border border-purple-500/30 rounded-xl",children:[(0,np.jsx)("h3",{className:"text-lg font-bold text-purple-300 mb-4",children:"Select Your Reasoning:"}),(0,np.jsx)("div",{className:"grid gap-2",children:e.rationaleOptions.map((e,t)=>(0,np.jsxs)("button",{onClick:()=>ce(t),className:"p-3 rounded-lg text-left text-sm border-2 transition-all ".concat(le===t?"bg-purple-500/20 border-purple-500 text-white":"bg-slate-800 border-slate-700 hover:border-purple-500 text-slate-300"),children:[String.fromCharCode(65+t),". ",e]},t))})]}),(0,np.jsxs)("div",{className:"flex gap-4",children:["ranked"!==n&&(0,np.jsx)("button",{onClick:Vt,disabled:$,className:"p-4 bg-slate-800 hover:bg-slate-700 text-purple-400 border border-slate-700 rounded-xl font-bold transition-all disabled:opacity-50 disabled:cursor-not-allowed",title:"50/50 Lifeline",children:(0,np.jsx)(P,{className:"w-6 h-6"})}),ue&&null===le?(0,np.jsx)("div",{className:"flex-1 py-4 bg-purple-600/20 border-2 border-purple-500 text-purple-300 rounded-xl font-bold text-center",children:"Select a rationale to continue"}):(0,np.jsxs)(np.Fragment,{children:[(0,np.jsx)("button",{onClick:()=>zt(g,"GUESS"),disabled:e.isMultiSelect?!Array.isArray(g)||0===g.length:null===g,className:"flex-1 py-4 bg-slate-700 hover:bg-slate-600 text-slate-200 rounded-xl font-bold transition-all disabled:opacity-50",children:"I'm Guessing \ud83e\udd14"}),(0,np.jsx)("button",{onClick:()=>zt(g,"SURE"),disabled:e.isMultiSelect?!Array.isArray(g)||0===g.length:null===g,className:"flex-1 py-4 bg-blue-600 hover:bg-blue-500 text-white rounded-xl font-bold transition-all shadow-lg shadow-blue-900/20 disabled:opacity-50",children:"I'm Sure! \ud83d\ude80"})]})]})]})]})]})},Jt=()=>{const e=Math.round(W/h.length*100),r=Pt.includes(u.title),i=Ft();return(0,np.jsx)("div",{className:"min-h-screen bg-slate-900 text-white flex flex-col items-center justify-center p-6 font-sans",children:(0,np.jsxs)("div",{className:"max-w-md w-full bg-slate-800 border border-slate-700 rounded-3xl p-8 text-center shadow-2xl animate-in fade-in zoom-in-95",children:[(0,np.jsx)("div",{className:"w-20 h-20 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg shadow-orange-500/50",children:(0,np.jsx)(T,{className:"w-10 h-10 text-white"})}),(0,np.jsx)("h2",{className:"text-3xl font-black mb-2",children:"MODULE COMPLETE"}),(0,np.jsx)("div",{className:"text-slate-400 mb-8 font-bold",children:u.title}),(0,np.jsxs)("div",{className:"grid ".concat("ranked"===n?"grid-cols-3":"grid-cols-2"," gap-4 mb-8"),children:[(0,np.jsxs)("div",{className:"p-4 bg-slate-900 rounded-2xl border border-slate-700",children:[(0,np.jsx)("div",{className:"text-4xl font-black text-white",children:I}),(0,np.jsx)("div",{className:"text-xs font-bold text-slate-500 uppercase mt-1",children:"Score"})]}),(0,np.jsxs)("div",{className:"p-4 bg-slate-900 rounded-2xl border border-slate-700",children:[(0,np.jsxs)("div",{className:"text-4xl font-black ".concat(e>=80?"text-green-400":e>=70?"text-yellow-400":"text-orange-400"),children:[e,"%"]}),(0,np.jsx)("div",{className:"text-xs font-bold text-slate-500 uppercase mt-1",children:"Accuracy"})]}),"ranked"===n&&i&&(0,np.jsxs)("div",{className:"p-4 bg-gradient-to-br from-purple-900/30 to-blue-900/30 rounded-2xl border-2 border-purple-500/50",children:[(0,np.jsx)("div",{className:"text-4xl font-black ".concat(i.total>=80?"text-purple-300":i.total>=70?"text-blue-300":"text-slate-300"),children:i.total}),(0,np.jsx)("div",{className:"text-xs font-bold text-purple-400 uppercase mt-1",children:"CRS"})]})]}),"ranked"===n&&i&&(0,np.jsxs)("div",{className:"mb-6 p-4 bg-purple-900/10 border border-purple-500/30 rounded-xl",children:[(0,np.jsxs)("div",{className:"text-sm font-bold text-purple-300 mb-3 flex items-center justify-center gap-2",children:[(0,np.jsx)(E,{className:"w-4 h-4"}),"Clinical Reasoning Score Breakdown"]}),(0,np.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[(0,np.jsxs)("div",{className:"p-2 bg-slate-900/50 rounded-lg",children:[(0,np.jsxs)("div",{className:"font-bold text-green-400",children:[i.accuracy,"/40"]}),(0,np.jsx)("div",{className:"text-slate-400",children:"Accuracy"})]}),(0,np.jsxs)("div",{className:"p-2 bg-slate-900/50 rounded-lg",children:[(0,np.jsxs)("div",{className:"font-bold text-blue-400",children:[i.rationale,"/40"]}),(0,np.jsx)("div",{className:"text-slate-400",children:"Reasoning"})]}),(0,np.jsxs)("div",{className:"p-2 bg-slate-900/50 rounded-lg",children:[(0,np.jsxs)("div",{className:"font-bold text-purple-400",children:[i.time,"/20"]}),(0,np.jsx)("div",{className:"text-slate-400",children:"Timing"})]})]}),(0,np.jsxs)("div",{className:"text-xs text-slate-400 mt-2",children:["Avg time: ",i.avgTime,"s/question"]})]}),"ranked"===n&&Ge>=3&&(0,np.jsx)("div",{className:"mb-6 p-4 bg-red-900/20 border border-red-500/50 rounded-xl",children:(0,np.jsxs)("div",{className:"flex items-center gap-3 text-red-300",children:[(0,np.jsx)(b,{className:"w-5 h-5 flex-shrink-0"}),(0,np.jsxs)("div",{className:"text-sm",children:[(0,np.jsx)("div",{className:"font-bold mb-1",children:"\u26a0\ufe0f Anti-Memorization Alert"}),(0,np.jsxs)("div",{className:"text-red-200",children:["You rushed through ",Ge," questions (","<","3s each). Slow down and read carefully to demonstrate true understanding."]})]})]})}),(0,np.jsx)("div",{className:"mb-6",children:It?(0,np.jsxs)(np.Fragment,{children:[(0,np.jsxs)("div",{className:"bg-purple-900/20 border border-purple-500/30 p-4 rounded-xl text-left max-h-40 overflow-y-auto mb-3",children:[(0,np.jsx)("div",{className:"text-xs text-purple-300 font-bold mb-2",children:"AI STUDY NOTES:"}),(0,np.jsx)("p",{className:"text-sm text-slate-300 whitespace-pre-wrap",children:It})]}),(0,np.jsxs)("button",{onClick:Kt,className:"w-full py-3 bg-blue-600/20 border border-blue-500/50 text-blue-300 rounded-xl font-bold hover:bg-blue-600/30 transition-colors flex items-center justify-center",children:[(0,np.jsx)(V,{className:"w-4 h-4 mr-2"}),"\ud83d\udcbe Download Study Guide"]})]}):(0,np.jsxs)("button",{onClick:Wt,disabled:Et,className:"w-full py-3 bg-purple-600/20 border border-purple-500/50 text-purple-300 rounded-xl font-bold hover:bg-purple-600/30 transition-colors flex items-center justify-center",children:[Et?(0,np.jsx)(F,{className:"w-4 h-4 mr-2 animate-spin"}):(0,np.jsx)(U,{className:"w-4 h-4 mr-2"}),"Generate Study Guide"]})}),"ranked"===n&&(0,np.jsxs)("div",{className:"mb-4",children:[(0,np.jsxs)("div",{className:"mb-3 flex items-center justify-center gap-2 text-xs",children:[(0,np.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(Lt.authenticated?"bg-green-400":Lt.initializing?"bg-yellow-400 animate-pulse":Lt.connected?"bg-yellow-400":"bg-red-400")}),(0,np.jsx)("span",{className:"text-slate-400",children:Lt.authenticated?"Ready to submit":Lt.initializing?"Connecting to server...":Lt.connected?"Authenticating...":"Offline - scores cannot be saved"})]}),r?(0,np.jsxs)("div",{className:"bg-yellow-500/10 border border-yellow-500/30 p-4 rounded-xl",children:[(0,np.jsx)(C,{className:"w-5 h-5 text-yellow-400 mx-auto mb-2"}),(0,np.jsx)("p",{className:"text-yellow-400 font-bold text-sm",children:"Score already submitted"})]}):(0,np.jsxs)("div",{className:"bg-slate-900 border border-slate-700 p-4 rounded-xl",children:[(0,np.jsx)("h3",{className:"text-white font-bold mb-3 text-sm",children:"Submit to Leaderboard"}),Lt.initializing&&(0,np.jsxs)("p",{className:"text-yellow-400 text-xs mb-2 flex items-center justify-center gap-2",children:[(0,np.jsx)(F,{className:"w-3 h-3 animate-spin"}),"Initializing connection..."]}),!Lt.authenticated&&!Lt.initializing&&Lt.connected&&(0,np.jsx)("p",{className:"text-yellow-400 text-xs mb-2",children:"\u23f3 Authenticating..."}),!Lt.connected&&(0,np.jsx)("p",{className:"text-red-400 text-xs mb-2",children:"\u26a0\ufe0f Not connected to server. Check your internet connection."}),(0,np.jsxs)("div",{className:"flex gap-2",children:[(0,np.jsx)("input",{type:"text",placeholder:"Your Name",value:Ct,onChange:e=>kt(e.target.value),className:"flex-1 bg-slate-800 border border-slate-700 rounded-lg p-3 text-white outline-none focus:border-cyan-500 text-sm",disabled:!Lt.authenticated}),(0,np.jsx)("button",{onClick:Yt,disabled:At||!Ct.trim()||!Lt.authenticated,className:"bg-green-600 hover:bg-green-500 text-white font-bold rounded-lg px-4 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed transition",title:Lt.initializing?"Connecting...":Lt.authenticated?Ct.trim()?"Submit score":"Enter your name first":"Waiting for authentication...",children:At?(0,np.jsx)(F,{className:"w-4 h-4 animate-spin"}):(0,np.jsx)(z,{className:"w-4 h-4"})})]})]})]}),(0,np.jsx)("button",{onClick:()=>t("menu"),className:"w-full py-4 bg-slate-700 hover:bg-slate-600 text-white font-bold rounded-xl transition-all",children:"Return to Menu"})]})})},$t=()=>{const[e,n]=(0,r.useState)([]),[i,s]=(0,r.useState)("all");(0,r.useEffect)(()=>{if(!Hf)return;var e;const t=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=me(e);let a={includeMetadataChanges:!1,source:"default"},l=0;"object"!=typeof n[l]||Nc(n[l])||(a=n[l],l++);const c={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(Nc(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[l+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let u,d,h;if(e instanceof wc)d=pc(e.firestore,Tc),h=wi(e._key.path),u={next:t=>{n[l]&&n[l](Cu(d,e,t))},error:n[l+1],complete:n[l+2]};else{const t=pc(e,bc);d=pc(t.firestore,Tc),h=t._query;const r=new _u(d);u={next:e=>{n[l]&&n[l](new xu(d,r,t,e))},error:n[l+1],complete:n[l+2]},su(e._query)}return function(e,t,n,r){const i=new Zl(r),s=new Il(t,i,n);return e.asyncQueue.enqueueAndForget(async()=>pl(await oc(e),s)),()=>{i.Za(),e.asyncQueue.enqueueAndForget(async()=>ml(await oc(e),s))}}(Sc(d),h,c,u)}(lu(xc(Hf,"artifacts",vp,"public","data","scores"),(mc("limit",e=100),fu._create("limit",e,"F"))),e=>{const t=e.docs.map(e=>c({id:e.id},e.data()));t.sort((e,t)=>t.score-e.score),n(t)});return()=>t()},[]);const o=(()=>{let t=e.filter(e=>"\u2696\ufe0f A Day to be Wrong"===e.chapterTitle);switch(i){case"safest-unit":return t.filter(e=>void 0!==e.escalationLevel).sort((e,t)=>e.escalationLevel===t.escalationLevel?t.score-e.score:e.escalationLevel-t.escalationLevel).slice(0,20);case"resource-master":return t.filter(e=>void 0!==e.resourcesPreserved).sort((e,t)=>e.resourcesPreserved===t.resourcesPreserved?t.score-e.score:t.resourcesPreserved-e.resourcesPreserved).slice(0,20);case"sudden-death":return t.filter(e=>"sudden-death"===e.mode&&!0===e.survived).sort((e,t)=>t.questionsSurvived-e.questionsSurvived).slice(0,20);default:return t.slice(0,50)}})();return(0,np.jsx)("div",{className:"min-h-screen bg-slate-900 text-white p-6 flex flex-col items-center font-sans",children:(0,np.jsxs)("div",{className:"max-w-4xl w-full",children:[(0,np.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,np.jsxs)("h2",{className:"text-3xl font-black flex items-center",children:[(0,np.jsx)(k,{className:"w-8 h-8 mr-3 text-yellow-400"})," LEADERBOARD"]}),(0,np.jsx)("button",{onClick:()=>t("menu"),className:"text-slate-400 hover:text-white transition",children:"Back"})]}),(0,np.jsxs)("div",{className:"mb-6 flex gap-3 flex-wrap",children:[(0,np.jsx)("button",{onClick:()=>s("all"),className:"px-4 py-2 rounded-lg font-bold text-sm transition ".concat("all"===i?"bg-cyan-500 text-white":"bg-slate-800 text-slate-400 hover:bg-slate-700"),children:"\ud83c\udfc6 All Scores"}),(0,np.jsx)("button",{onClick:()=>s("safest-unit"),className:"px-4 py-2 rounded-lg font-bold text-sm transition ".concat("safest-unit"===i?"bg-green-500 text-white":"bg-slate-800 text-slate-400 hover:bg-slate-700"),children:"\ud83d\udee1\ufe0f Safest Unit"}),(0,np.jsx)("button",{onClick:()=>s("resource-master"),className:"px-4 py-2 rounded-lg font-bold text-sm transition ".concat("resource-master"===i?"bg-blue-500 text-white":"bg-slate-800 text-slate-400 hover:bg-slate-700"),children:"\ud83d\udc8e Resource Master"}),(0,np.jsx)("button",{onClick:()=>s("sudden-death"),className:"px-4 py-2 rounded-lg font-bold text-sm transition ".concat("sudden-death"===i?"bg-red-500 text-white":"bg-slate-800 text-slate-400 hover:bg-slate-700"),children:"\ud83d\udc80 Sudden Death Survivors"})]}),(0,np.jsxs)("div",{className:"mb-4 p-4 bg-slate-800/50 border border-slate-700 rounded-xl text-sm text-slate-300",children:["all"===i&&"\ud83c\udfc6 Top scores across all game modes","safest-unit"===i&&"\ud83d\udee1\ufe0f Players who triggered the fewest escalations","resource-master"===i&&"\ud83d\udc8e Players who preserved the most resources","sudden-death"===i&&"\ud83d\udc80 Hall of Fame: Players who survived all 5 questions without a single mistake"]}),(0,np.jsx)("div",{className:"space-y-2",children:0===o.length?(0,np.jsxs)("div",{className:"text-center py-12 text-slate-400",children:[(0,np.jsx)("p",{className:"text-lg",children:"No scores yet in this category"}),(0,np.jsx)("p",{className:"text-sm mt-2",children:"Be the first to make the leaderboard!"})]}):o.map((e,t)=>(0,np.jsxs)("div",{className:"bg-slate-800 p-4 rounded-xl flex items-center border border-slate-700 hover:border-slate-600 transition",children:[(0,np.jsxs)("div",{className:"w-8 font-bold ".concat(0===t?"text-yellow-400":1===t?"text-slate-400":2===t?"text-orange-600":"text-slate-500"),children:["#",t+1]}),(0,np.jsxs)("div",{className:"flex-1 ml-4",children:[(0,np.jsxs)("div",{className:"font-bold text-white flex items-center gap-2",children:[e.playerName,"sudden-death"===e.mode&&(0,np.jsx)("span",{className:"text-red-400 text-xs",children:"\ud83d\udc80"}),"team"===e.mode&&(0,np.jsx)("span",{className:"text-purple-400 text-xs",children:"\ud83d\udc65"})]}),(0,np.jsxs)("div",{className:"text-xs text-slate-400 flex items-center gap-3 mt-1",children:[(0,np.jsx)("span",{children:e.chapterTitle}),"safest-unit"===i&&void 0!==e.escalationLevel&&(0,np.jsxs)("span",{className:"text-green-400",children:["\ud83d\udee1\ufe0f ",e.escalationLevel," escalations"]}),"resource-master"===i&&void 0!==e.resourcesPreserved&&(0,np.jsxs)("span",{className:"text-blue-400",children:["\ud83d\udc8e ",e.resourcesPreserved,"/3 resources"]}),"sudden-death"===i&&void 0!==e.questionsSurvived&&(0,np.jsxs)("span",{className:"text-red-400",children:["\ud83d\udc80 ",e.questionsSurvived,"/5 perfect"]})]})]}),(0,np.jsx)("div",{className:"text-cyan-400 font-mono font-bold text-lg",children:e.score})]},e.id))})]})})};if(Ne)return(0,np.jsx)(lp,{onExit:()=>{Te(!1),Hf&&(Nu(xc(Hf,"customChapters")).then(e=>{const t=[];e.forEach(e=>{t.push(c(c({},e.data()),{},{id:e.id}))}),Ce(t)}),Nu(xc(Hf,"settings")).then(e=>{const t=e.docs.find(e=>"chapterAccess"===e.id);t&&Ae(t.data().unlocked||[])}))}});const Zt=()=>{const[e,n]=(0,r.useState)(""),[i,s]=(0,r.useState)(!1),o=n=>{var r;if("team"===n&&!i)return void s(!0);if("team"===n&&!e.trim())return void alert("Please enter a team name!");nt(n),"sudden-death"===n&&(lt(!0),ut(1)),"team"===n&&it(e.trim());const o=bp.find(e=>"day-to-be-wrong"===e.id),a=Kf(o.questions);d(o),f(a),m(0),x(0),G(0),K(0),Q(0),J([]),fe([]),We(0),Ye(null),Xe({isolationRooms:1,emergencyPasses:1,providerCalls:1}),$e(0),et([]),pt(!1),t("playing"),qt(),null!==(r=a[0])&&void 0!==r&&r.timeLimit?se(a[0].timeLimit):se(60),ae(0)};return(0,np.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 text-white flex items-center justify-center p-6",children:(0,np.jsxs)("div",{className:"max-w-4xl w-full",children:[(0,np.jsx)("button",{onClick:()=>{pt(!1),t("menu")},className:"mb-6 text-slate-400 hover:text-white transition flex items-center",children:"\u2190 Back to Menu"}),(0,np.jsxs)("div",{className:"text-center mb-12",children:[(0,np.jsx)("div",{className:"text-6xl mb-4",children:"\u2696\ufe0f"}),(0,np.jsx)("h1",{className:"text-4xl font-black mb-3",children:"A Day to be Wrong"}),(0,np.jsx)("p",{className:"text-lg text-slate-300",children:"Choose Your Challenge Mode"})]}),i&&(0,np.jsxs)("div",{className:"mb-8 p-6 bg-purple-900/30 border-2 border-purple-500 rounded-2xl",children:[(0,np.jsx)("h3",{className:"text-xl font-bold mb-4 text-purple-300",children:"\ud83d\udc65 Enter Team Name"}),(0,np.jsx)("input",{type:"text",value:e,onChange:e=>n(e.target.value),placeholder:"e.g., Night Shift Warriors, Code Blue Crew",className:"w-full px-4 py-3 bg-slate-800 border border-purple-500 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-purple-400 mb-4",maxLength:30,autoFocus:!0}),(0,np.jsxs)("div",{className:"flex gap-3",children:[(0,np.jsx)("button",{onClick:()=>{s(!1),n("")},className:"flex-1 py-2 bg-slate-700 hover:bg-slate-600 rounded-lg font-bold transition",children:"Cancel"}),(0,np.jsx)("button",{onClick:()=>o("team"),className:"flex-1 py-2 bg-purple-500 hover:bg-purple-400 rounded-lg font-bold transition",children:"Start Battle \u2192"})]})]}),(0,np.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,np.jsxs)("button",{onClick:()=>o("solo"),className:"bg-slate-800 border-2 border-cyan-500 rounded-2xl p-8 hover:bg-slate-750 transition-all group",children:[(0,np.jsx)("div",{className:"text-5xl mb-4",children:"\ud83c\udfaf"}),(0,np.jsx)("h3",{className:"text-2xl font-bold mb-3",children:"Solo Mission"}),(0,np.jsx)("p",{className:"text-slate-400 text-sm mb-4",children:"Face the challenges alone. Master decision-making under pressure."}),(0,np.jsxs)("div",{className:"text-xs text-slate-500 space-y-1",children:[(0,np.jsx)("div",{children:"\u2022 5-9 questions"}),(0,np.jsx)("div",{children:"\u2022 Resource management"}),(0,np.jsx)("div",{children:"\u2022 Escalations on mistakes"}),(0,np.jsx)("div",{children:"\u2022 Personal best tracking"})]}),(0,np.jsx)("div",{className:"mt-6 px-4 py-2 bg-cyan-500/20 text-cyan-300 rounded-lg text-sm font-bold",children:"Classic Mode"})]}),(0,np.jsxs)("button",{onClick:()=>o("team"),className:"bg-slate-800 border-2 border-purple-500 rounded-2xl p-8 hover:bg-slate-750 transition-all group relative overflow-hidden",children:[(0,np.jsx)("div",{className:"absolute top-2 right-2 bg-purple-500 text-white px-2 py-1 rounded-full text-xs font-bold",children:"COMPETITIVE"}),(0,np.jsx)("div",{className:"text-5xl mb-4",children:"\ud83d\udc65"}),(0,np.jsx)("h3",{className:"text-2xl font-bold mb-3",children:"Team Battle"}),(0,np.jsx)("p",{className:"text-slate-400 text-sm mb-4",children:"Compete against other teams in real-time. Fastest wins!"}),(0,np.jsxs)("div",{className:"text-xs text-slate-500 space-y-1",children:[(0,np.jsx)("div",{children:"\u2022 Real-time competition"}),(0,np.jsx)("div",{children:"\u2022 Team leaderboard"}),(0,np.jsx)("div",{children:"\u2022 Shared resources"}),(0,np.jsx)("div",{children:"\u2022 Live rankings"})]}),(0,np.jsx)("div",{className:"mt-6 px-4 py-2 bg-purple-500/20 text-purple-300 rounded-lg text-sm font-bold",children:"Multiplayer"})]}),(0,np.jsxs)("button",{onClick:()=>o("sudden-death"),className:"bg-slate-800 border-2 border-red-500 rounded-2xl p-8 hover:bg-slate-750 transition-all group relative overflow-hidden",children:[(0,np.jsx)("div",{className:"absolute top-2 right-2 bg-red-500 text-white px-2 py-1 rounded-full text-xs font-bold animate-pulse",children:"EXTREME"}),(0,np.jsx)("div",{className:"text-5xl mb-4",children:"\ud83d\udc80"}),(0,np.jsx)("h3",{className:"text-2xl font-bold mb-3",children:"Sudden Death"}),(0,np.jsx)("p",{className:"text-slate-400 text-sm mb-4",children:"One mistake and you're out. Ultimate high-stakes challenge."}),(0,np.jsxs)("div",{className:"text-xs text-slate-500 space-y-1",children:[(0,np.jsx)("div",{children:"\u2022 1 life only"}),(0,np.jsx)("div",{children:"\u2022 No escalations"}),(0,np.jsx)("div",{children:"\u2022 Instant elimination"}),(0,np.jsx)("div",{children:"\u2022 Hall of survivors"})]}),(0,np.jsx)("div",{className:"mt-6 px-4 py-2 bg-red-500/20 text-red-300 rounded-lg text-sm font-bold",children:"Expert Only"})]})]}),(0,np.jsx)("div",{className:"mt-8 text-center text-sm text-slate-400",children:(0,np.jsx)("p",{children:"\ud83d\udca1 Tip: Start with Solo Mode to learn the mechanics before trying competitive modes"})})]})})};return ft?(0,np.jsx)(Zt,{}):"menu"===e?(0,np.jsx)(Qt,{}):"playing"===e?(0,np.jsx)(Xt,{}):"summary"===e?(0,np.jsx)(Jt,{}):"leaderboard"===e?(0,np.jsx)($t,{}):(0,np.jsx)(Qt,{})}const Ip=function(){return(0,np.jsx)("div",{className:"App",children:(0,np.jsx)(wp,{})})};i.createRoot(document.getElementById("root")).render((0,np.jsx)(r.StrictMode,{children:(0,np.jsx)(Ip,{})}))})();
//# sourceMappingURL=main.87b7cdf1.js.map